import{R as v,o as p,j as e,f as b,r as g}from"./index-bd01013b.js";import{B as V,a as y}from"./BotonConTooltip-00fde3ca.js";import{u as w}from"./useDragToScroll-836d6b51.js";const M=({completionTimestamp:c})=>{const[r,t]=g.useState(c-Date.now());g.useEffect(()=>{const h=setInterval(()=>{t(u=>Math.max(0,u-1e3))},1e3);return()=>clearInterval(h)},[]);const a=Math.floor(r/6e4),x=Math.floor(r%6e4/1e3);return e.jsxs("span",{children:[a,"m ",x,"s"]})},N={scrap:{name:"Chatarra"},metalRefinado:{name:"Metal Refinado"},aceroEstructural:{name:"Acero Estructural"},fragmentosPlaca:{name:"Fragmentos de Placa"},circuitosDañados:{name:"Circuitos Dañados"},aleacionReforzada:{name:"Aleación Reforzada"},neuroChipCorrupto:{name:"Neuro-Chip Corrupto"}},B=v.memo(({resources:c,drones:r,activeExpeditions:t,buyAmount:a,onStartExpedition:x,onClaimReward:h,onSetBuyAmount:u,onClose:R})=>{const E={expeditionDrone:t.filter(n=>{var s;return((s=p.find(i=>i.id===n.id))==null?void 0:s.droneType)==="expeditionDrone"}).reduce((n,s)=>n+s.dronesSent,0),expeditionV2Drone:t.filter(n=>{var s;return((s=p.find(i=>i.id===n.id))==null?void 0:s.droneType)==="expeditionV2Drone"}).reduce((n,s)=>n+s.dronesSent,0)},j={expeditionDrone:r.expeditionDrone-E.expeditionDrone,expeditionV2Drone:r.expeditionV2Drone-E.expeditionV2Drone},C=w();return e.jsx("div",{className:"expedition-view-container",children:e.jsxs("div",{className:"expedition-content-area",ref:C,children:[e.jsx("button",{onClick:R,className:"close-button",children:"×"}),e.jsxs("div",{className:"fleet-status",children:[e.jsx("h3",{children:"Estado de la Flota de Expedición"}),e.jsxs("p",{children:["Drones de Expedición (DE-1) Disponibles: ",e.jsx("strong",{style:{color:"#22C55E"},children:j.expeditionDrone})," / ",r.expeditionDrone]}),e.jsxs("p",{children:["Drones de Expedición (DE-2) Disponibles: ",e.jsx("strong",{style:{color:"#10B981"},children:j.expeditionV2Drone})," / ",r.expeditionV2Drone]})]}),e.jsx(V,{buyAmount:a,onSetBuyAmount:u}),t.length>0&&e.jsxs("div",{className:"active-expeditions",children:[e.jsx("h3",{className:"section-title",children:"Expediciones en Curso"}),t.map(n=>{const s=p.find(d=>d.id===n.id);if(!s)return null;const i=n.completionTimestamp<=Date.now();return e.jsxs("div",{className:"expedition-item",children:[e.jsx("h4",{children:s.title}),e.jsxs("p",{children:[n.dronesSent," ",s.droneType==="expeditionV2Drone"?"Drones (DE-2)":"Drones (DE-1)"," enviados."]}),i?e.jsxs("div",{children:[e.jsx("p",{style:{color:"#22C55E"},children:"¡Expedición Completada!"}),e.jsx(y,{onClick:()=>h(n),className:"claim-button",disabled:!1,tooltipText:"",children:"Reclamar Recompensa"})]}):e.jsxs("p",{children:["Tiempo Restante: ",e.jsx(M,{completionTimestamp:n.completionTimestamp})]})]},n.instanceId)})]}),e.jsxs("div",{className:"available-expeditions",children:[e.jsx("h3",{className:"section-title",children:"Destinos Disponibles"}),p.map(n=>{const s=n.droneType,i=n.costs.drones,d=j[s];let D=d>=i;for(const[o,l]of Object.entries(n.costs))if(o!=="drones"&&c[o]<l){D=!1;break}return e.jsxs("div",{className:`expedition-item ${D?"":"unavailable"}`,children:[e.jsx("h4",{children:n.title}),e.jsx("p",{children:n.description}),e.jsxs("p",{children:[e.jsx("strong",{children:"Duración:"})," ",n.duration/60," minutos"]}),e.jsxs("div",{children:[e.jsx("strong",{children:"Requisitos:"}),e.jsxs("ul",{children:[e.jsxs("li",{className:d>=i?"requirement met":"requirement unmet",children:[s==="expeditionV2Drone"?"Drones (DE-2):":"Drones (DE-1):"," ",i]}),Object.entries(n.costs).map(([o,l])=>{if(o==="drones")return null;const m=c[o]>=l,f=N[o]||{name:o};return e.jsxs("li",{className:m?"requirement met":"requirement unmet",children:[f.name,": ",b(l)]},o)})]})]}),e.jsxs("div",{children:[e.jsx("strong",{children:"Posibles Recompensas:"}),e.jsx("ul",{children:Object.entries(n.rewards).map(([o,l])=>{const m=N[o];if(!m)return null;const[f,T]=l;return e.jsxs("li",{children:[m.name,": ",b(f)," - ",b(T)]},o)})})]}),e.jsxs("p",{children:[e.jsx("strong",{children:"Riesgo:"})," ",n.risk.chance*100,"% de posibilidad de perder el dron."]}),e.jsxs("button",{onClick:()=>x(n.id,a),disabled:!D,className:"send-button",children:["Enviar ",a==="max"?`MAX (${Math.floor(d/i)})`:a," ",i>1?"grupos":"grupo"]})]},n.id)})]})]})})});export{B as default};
