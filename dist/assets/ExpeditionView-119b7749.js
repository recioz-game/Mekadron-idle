import{R as C,n as p,j as e,f as b,r as E}from"./index-45ec8132.js";import{u as v}from"./useDragToScroll-90977d89.js";const T=({completionTimestamp:d})=>{const[r,t]=E.useState(d-Date.now());E.useEffect(()=>{const h=setInterval(()=>{t(l=>Math.max(0,l-1e3))},1e3);return()=>clearInterval(h)},[]);const x=Math.floor(r/6e4),u=Math.floor(r%6e4/1e3);return e.jsxs("span",{children:[x,"m ",u,"s"]})},N={scrap:{name:"Chatarra"},metalRefinado:{name:"Metal Refinado"},aceroEstructural:{name:"Acero Estructural"},fragmentosPlaca:{name:"Fragmentos de Placa"},circuitosDañados:{name:"Circuitos Dañados"},aleacionReforzada:{name:"Aleación Reforzada"},neuroChipCorrupto:{name:"Neuro-Chip Corrupto"}},w=C.memo(({resources:d,drones:r,activeExpeditions:t,onStartExpedition:x,onClaimReward:u,onClose:h})=>{const l={expeditionDrone:t.filter(n=>{var s;return((s=p.find(o=>o.id===n.id))==null?void 0:s.droneType)==="expeditionDrone"}).reduce((n,s)=>n+s.dronesSent,0),expeditionV2Drone:t.filter(n=>{var s;return((s=p.find(o=>o.id===n.id))==null?void 0:s.droneType)==="expeditionV2Drone"}).reduce((n,s)=>n+s.dronesSent,0)},D={expeditionDrone:r.expeditionDrone-l.expeditionDrone,expeditionV2Drone:r.expeditionV2Drone-l.expeditionV2Drone},R=v();return e.jsx("div",{className:"expedition-view-container",children:e.jsxs("div",{className:"expedition-content-area",ref:R,children:[e.jsx("button",{onClick:h,className:"close-button",children:"×"}),e.jsxs("div",{className:"fleet-status",children:[e.jsx("h3",{children:"Estado de la Flota de Expedición"}),e.jsxs("p",{children:["Drones de Expedición (DE-1) Disponibles: ",e.jsx("strong",{style:{color:"#22C55E"},children:D.expeditionDrone})," / ",r.expeditionDrone]}),e.jsxs("p",{children:["Drones de Expedición (DE-2) Disponibles: ",e.jsx("strong",{style:{color:"#10B981"},children:D.expeditionV2Drone})," / ",r.expeditionV2Drone]})]}),t.length>0&&e.jsxs("div",{className:"active-expeditions",children:[e.jsx("h3",{className:"section-title",children:"Expediciones en Curso"}),t.map(n=>{const s=p.find(c=>c.id===n.id);if(!s)return null;const o=n.completionTimestamp<=Date.now();return e.jsxs("div",{className:"expedition-item",children:[e.jsx("h4",{children:s.title}),e.jsxs("p",{children:[n.dronesSent," ",s.droneType==="expeditionV2Drone"?"Drones (DE-2)":"Drones (DE-1)"," enviados."]}),o?e.jsxs("div",{children:[e.jsx("p",{style:{color:"#22C55E"},children:"¡Expedición Completada!"}),e.jsx("button",{onClick:()=>u(n),className:"claim-button",children:"Reclamar Recompensa"})]}):e.jsxs("p",{children:["Tiempo Restante: ",e.jsx(T,{completionTimestamp:n.completionTimestamp})]})]},n.instanceId)})]}),e.jsxs("div",{className:"available-expeditions",children:[e.jsx("h3",{className:"section-title",children:"Destinos Disponibles"}),p.map(n=>{const s=n.droneType,o=n.costs.drones,c=D[s];let j=c>=o;for(const[i,a]of Object.entries(n.costs))if(i!=="drones"&&d[i]<a){j=!1;break}return e.jsxs("div",{className:`expedition-item ${j?"":"unavailable"}`,children:[e.jsx("h4",{children:n.title}),e.jsx("p",{children:n.description}),e.jsxs("p",{children:[e.jsx("strong",{children:"Duración:"})," ",n.duration/60," minutos"]}),e.jsxs("div",{children:[e.jsx("strong",{children:"Requisitos:"}),e.jsxs("ul",{children:[e.jsxs("li",{className:c>=o?"requirement met":"requirement unmet",children:[s==="expeditionV2Drone"?"Drones (DE-2):":"Drones (DE-1):"," ",o]}),Object.entries(n.costs).map(([i,a])=>{if(i==="drones")return null;const m=d[i]>=a,f=N[i]||{name:i};return e.jsxs("li",{className:m?"requirement met":"requirement unmet",children:[f.name,": ",b(a)]},i)})]})]}),e.jsxs("div",{children:[e.jsx("strong",{children:"Posibles Recompensas:"}),e.jsx("ul",{children:Object.entries(n.rewards).map(([i,a])=>{const m=N[i];if(!m)return null;const[f,g]=a;return e.jsxs("li",{children:[m.name,": ",b(f)," - ",b(g)]},i)})})]}),e.jsxs("p",{children:[e.jsx("strong",{children:"Riesgo:"})," ",n.risk.chance*100,"% de posibilidad de perder el dron."]}),e.jsxs("button",{onClick:()=>x(n.id),disabled:!j,className:"send-button",children:["Enviar ",o," ",s==="expeditionV2Drone"?"Dron (DE-2)":"Dron (DE-1)"]})]},n.id)})]})]})})});export{w as default};
