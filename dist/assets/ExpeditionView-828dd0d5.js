import{R as g,n as p,j as e,f as E,r as b}from"./index-ffe6c884.js";import{u as v}from"./useDragToScroll-2204099b.js";const T=({completionTimestamp:d})=>{const[o,t]=b.useState(d-Date.now());b.useEffect(()=>{const u=setInterval(()=>{t(l=>Math.max(0,l-1e3))},1e3);return()=>clearInterval(u)},[]);const x=Math.floor(o/6e4),h=Math.floor(o%6e4/1e3);return e.jsxs("span",{children:[x,"m ",h,"s"]})},N={scrap:{name:"Chatarra"},metalRefinado:{name:"Metal Refinado"},aceroEstructural:{name:"Acero Estructural"},fragmentosPlaca:{name:"Fragmentos de Placa"},circuitosDañados:{name:"Circuitos Dañados"},aleacionReforzada:{name:"Aleación Reforzada"},neuroChipCorrupto:{name:"Neuro-Chip Corrupto"}},w=g.memo(({resources:d,drones:o,activeExpeditions:t,onStartExpedition:x,onClaimReward:h,onClose:u})=>{const l={expeditionDrone:t.filter(n=>{var s;return((s=p.find(r=>r.id===n.id))==null?void 0:s.droneType)==="expeditionDrone"}).reduce((n,s)=>n+s.dronesSent,0),expeditionV2Drone:t.filter(n=>{var s;return((s=p.find(r=>r.id===n.id))==null?void 0:s.droneType)==="expeditionV2Drone"}).reduce((n,s)=>n+s.dronesSent,0)},D={expeditionDrone:o.expeditionDrone-l.expeditionDrone,expeditionV2Drone:o.expeditionV2Drone-l.expeditionV2Drone},C=v();return e.jsxs("div",{className:"expedition-view-container",ref:C,children:[e.jsxs("div",{className:"expedition-view-header",children:[e.jsx("h2",{children:"MÓDULO DE EXPEDICIONES"}),e.jsx("button",{onClick:u,className:"close-button",children:"Cerrar"})]}),e.jsxs("div",{className:"fleet-status",children:[e.jsx("h3",{children:"Estado de la Flota de Expedición"}),e.jsxs("p",{children:["Drones de Expedición (DE-1) Disponibles: ",e.jsx("strong",{style:{color:"#22C55E"},children:D.expeditionDrone})," / ",o.expeditionDrone]}),e.jsxs("p",{children:["Drones de Expedición (DE-2) Disponibles: ",e.jsx("strong",{style:{color:"#10B981"},children:D.expeditionV2Drone})," / ",o.expeditionV2Drone]})]}),t.length>0&&e.jsxs("div",{className:"active-expeditions",children:[e.jsx("h3",{className:"section-title",children:"Expediciones en Curso"}),t.map(n=>{const s=p.find(c=>c.id===n.id);if(!s)return null;const r=n.completionTimestamp<=Date.now();return e.jsxs("div",{className:"expedition-item",children:[e.jsx("h4",{children:s.title}),e.jsxs("p",{children:[n.dronesSent," ",s.droneType==="expeditionV2Drone"?"Drones (DE-2)":"Drones (DE-1)"," enviados."]}),r?e.jsxs("div",{children:[e.jsx("p",{style:{color:"#22C55E"},children:"¡Expedición Completada!"}),e.jsx("button",{onClick:()=>h(n),className:"claim-button",children:"Reclamar Recompensa"})]}):e.jsxs("p",{children:["Tiempo Restante: ",e.jsx(T,{completionTimestamp:n.completionTimestamp})]})]},n.instanceId)})]}),e.jsxs("div",{className:"available-expeditions",children:[e.jsx("h3",{className:"section-title",children:"Destinos Disponibles"}),p.map(n=>{const s=n.droneType,r=n.costs.drones,c=D[s];let j=c>=r;for(const[i,a]of Object.entries(n.costs))if(i!=="drones"&&d[i]<a){j=!1;break}return e.jsxs("div",{className:`expedition-item ${j?"":"unavailable"}`,children:[e.jsx("h4",{children:n.title}),e.jsx("p",{children:n.description}),e.jsxs("p",{children:[e.jsx("strong",{children:"Duración:"})," ",n.duration/60," minutos"]}),e.jsxs("div",{children:[e.jsx("strong",{children:"Requisitos:"}),e.jsxs("ul",{children:[e.jsxs("li",{className:c>=r?"requirement met":"requirement unmet",children:[s==="expeditionV2Drone"?"Drones (DE-2):":"Drones (DE-1):"," ",r]}),Object.entries(n.costs).map(([i,a])=>{if(i==="drones")return null;const m=d[i]>=a,f=N[i]||{name:i};return e.jsxs("li",{className:m?"requirement met":"requirement unmet",children:[f.name,": ",E(a)]},i)})]})]}),e.jsxs("div",{children:[e.jsx("strong",{children:"Posibles Recompensas:"}),e.jsx("ul",{children:Object.entries(n.rewards).map(([i,a])=>{const m=N[i];if(!m)return null;const[f,R]=a;return e.jsxs("li",{children:[m.name,": ",E(f)," - ",E(R)]},i)})})]}),e.jsxs("p",{children:[e.jsx("strong",{children:"Riesgo:"})," ",n.risk.chance*100,"% de posibilidad de perder el dron."]}),e.jsxs("button",{onClick:()=>x(n.id),disabled:!j,className:"send-button",children:["Enviar ",r," ",s==="expeditionV2Drone"?"Dron (DE-2)":"Dron (DE-1)"]})]},n.id)})]})]})});export{w as default};
