import{R as y,u as b,a as M,b as f,r as R,j as e}from"./index-969b3215.js";import{u as D}from"./useDragToScroll-15a400bf.js";const w=y.memo(({onClose:u})=>{const p=D(),{activeMissions:c,completedMissions:i}=b(),{scrap:h,maxScrap:x,energy:j,maxEnergy:N}=M(),t=f(),v=R.useCallback(s=>{t({type:"CLAIM_REWARD",payload:s})},[t]),g=s=>Math.min(s.current/s.target*100,100),E=s=>{switch(s.type){case"scrap":return`+${s.value} Chatarra`;case"energy":return`+${s.value} Energía`;case"drone":return"Dron Básico";case"unlock":return`Desbloqueo de ${s.value}`;default:return"Recompensa"}},C=s=>{if(s.completed)return!1;switch(s.reward.type){case"scrap":return h+s.reward.value<=x;case"energy":return j+s.reward.value<=N;case"drone":case"unlock":return!0;default:return!0}},n=c.filter(s=>s.isMain&&!s.completed),l=c.filter(s=>!s.isMain&&!s.completed),o=(s,d)=>{const a=g(s),r=a>=100&&C(s),m=a>=100&&!r;return e.jsxs("div",{className:`mission-item ${d?"main":"secondary"} ${a>=100?"completed":""}`,children:[e.jsxs("div",{className:"mission-header",children:[e.jsx("h4",{className:"mission-title",style:{color:d?"#D946EF":a>=100?"#22C55E":"#F59E0B"},children:s.title}),e.jsx("span",{className:"mission-reward",children:E(s.reward)})]}),e.jsx("p",{className:"mission-description",children:s.description}),e.jsxs("div",{className:"progress-info",children:[e.jsxs("div",{className:"progress-text",children:[e.jsxs("span",{children:["Progreso: ",s.current,"/",s.target]}),e.jsxs("span",{children:[Math.round(a),"%"]})]}),e.jsx("div",{className:"progress-bar-container",children:e.jsx("div",{className:"progress-bar",style:{width:`${a}%`,backgroundColor:a>=100?"#22C55E":"#06B6D4"}})})]}),e.jsxs("div",{className:"mission-objective",children:["Objetivo: ",s.objective]}),a>=100&&e.jsxs("div",{className:"claim-section",children:[m&&e.jsx("span",{className:"claim-warning",children:"Espacio insuficiente"}),e.jsx("button",{onClick:()=>v(s.id),disabled:!r,className:`claim-button ${r?"can-claim":""}`,children:r?"Reclamar":m?"Completar":"Esperando"})]})]})};return e.jsx("div",{className:"missions-panel-container",children:e.jsxs("div",{className:"missions-content-area",ref:p,children:[e.jsx("button",{onClick:u,className:"close-button",children:"×"}),n.length>0&&e.jsxs("div",{className:"mission-category",children:[e.jsx("h3",{style:{color:"#D946EF",borderBottom:"1px solid #D946EF"},children:"MISIÓN PRINCIPAL"}),n.map(s=>o(s,!0))]}),e.jsxs("div",{className:"mission-category",children:[e.jsx("h3",{style:{color:"#F59E0B"},children:"MISIONES SECUNDARIAS"}),l.length===0&&n.length===0?e.jsx("div",{className:"no-missions",children:"No hay misiones activas. ¡Excelente trabajo, técnico!"}):l.map(s=>o(s,!1))]}),i.length>0&&e.jsxs("div",{children:[e.jsx("h3",{style:{color:"#22C55E"},children:"MISIONES COMPLETADAS"}),e.jsxs("div",{className:"completed-missions",children:[e.jsxs("div",{className:"completed-missions-title",children:[i.length," misión(es) completada(s)"]}),e.jsx("div",{className:"completed-missions-text",children:"Continúa expandiendo la estación para desbloquear nuevas misiones."})]})]})]})})});export{w as default};
