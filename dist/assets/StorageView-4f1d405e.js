import{R as ps,j as s,f as t,a as n,g as h}from"./index-6d3cdd80.js";import{B as js,a as U}from"./BotonConTooltip-58909d04.js";import{Q as D}from"./QueueControls-f850448d.js";import{u as gs}from"./useDragToScroll-d9863d94.js";const hs="/Mekadron-idle/assets/storage-basic-41fbd999.png",Ns="/Mekadron-idle/assets/storage-medium-e68240b8.png",Cs="/Mekadron-idle/assets/storage-advanced-049817db.png",qs="/Mekadron-idle/assets/storage-quantum-6aface52.png",$s="/Mekadron-idle/assets/battery-lithium-ion-407b0dc1.png",fs="/Mekadron-idle/assets/accumulator-plasma-963d6d52.png",ks="/Mekadron-idle/assets/harmonic-containment-field-3b46fe0e.png",w=({progress:b,time:r})=>s.jsx("div",{className:"progress-bar-container",children:s.jsx("div",{className:"progress-bar",style:{width:`${b/r*100}%`}})}),Es=ps.memo(({resources:b,basicStorage:r,mediumStorage:N,advancedStorage:C,quantumHoardUnit:es,lithiumIonBattery:$,plasmaAccumulator:q,harmonicContainmentField:as,hasBuilt:a,basicStorageQueue:d,mediumStorageQueue:l,advancedStorageQueue:m,quantumHoardUnitQueue:x,lithiumIonBatteryQueue:p,plasmaAccumulatorQueue:j,harmonicContainmentFieldQueue:g,onBuildBasicStorage:is,onBuildMediumStorage:ts,onBuildAdvancedStorage:cs,onBuildQuantumHoardUnit:ns,onBuildLithiumIonBattery:os,onBuildPlasmaAccumulator:rs,onBuildHarmonicContainmentField:ds,buyAmount:c,onSetBuyAmount:ls,onClose:ms,onCancel:f,numberFormat:i})=>{const{scrap:e,metalRefinado:o}=b,xs=gs(),k=(H,G)=>{const V=H.filter(u=>u.current<u.amount);return V.length===0?"":"Requiere: "+V.map(u=>`${u.text} (${t(u.amount,G)})`).join(", ")},P=h.storage.basicStorage.costs.scrap,z=h.storage.mediumStorage.costs.scrap,v=h.storage.advancedStorage.costs.scrap,M=h.storage.quantumHoardUnit.costs.scrap,A=h.storage.quantumHoardUnit.costs.metalRefinado,I=h.storage.lithiumIonBattery.costs.scrap,L=h.storage.plasmaAccumulator.costs.scrap,T=h.storage.harmonicContainmentField.costs.scrap,E=h.storage.harmonicContainmentField.costs.metalRefinado,R=H=>{const G=H.scrap?Math.floor(e/H.scrap):1/0,V=H.metalRefinado?Math.floor(o/H.metalRefinado):1/0;return Math.min(G,V)},J=R({scrap:P}),K=c==="max"?J:Math.min(c,J),O=R({scrap:z}),W=c==="max"?O:Math.min(c,O),X=R({scrap:v}),Y=c==="max"?X:Math.min(c,X),Z=R({scrap:M,metalRefinado:A}),_=c==="max"?Z:Math.min(c,Z),y=R({scrap:I}),F=c==="max"?y:Math.min(c,y),B=R({scrap:L}),S=c==="max"?B:Math.min(c,B),Q=R({scrap:T,metalRefinado:E}),ss=c==="max"?Q:Math.min(c,Q);return s.jsx("div",{className:"storage-view-container",children:s.jsxs("div",{className:"storage-content-area",ref:xs,children:[s.jsx("button",{onClick:ms,className:"close-button",children:"×"}),s.jsx(js,{buyAmount:c,onSetBuyAmount:ls}),s.jsxs("div",{className:`storage-item ${e>=P?"unlocked":""}`,children:[s.jsxs("div",{className:"storage-item-content",children:[s.jsx("h3",{style:{color:"#F59E0B"},children:"Almacén Básico"}),s.jsxs("p",{children:["Capacidad: +",t(50,i)," chatarra máxima"]}),s.jsxs("p",{children:["Coste: ",t(P,i)," chatarra"]}),s.jsxs("p",{children:["Construidos: ",r," ",d.queue>0?`| En cola: ${d.queue} | Tiempo: ~${n(d.queue*d.time)}`:""]}),d.queue>0&&s.jsxs("div",{children:[s.jsxs("p",{className:"time-info",children:["T/U: ",n(d.time)]}),s.jsx(w,{progress:d.progress,time:d.time})]}),s.jsxs("div",{className:"build-actions",children:[s.jsxs(U,{onClick:is,disabled:e<P,tooltipText:k([{amount:P,current:e,text:"Chatarra"}],i),className:`build-button ${e>=P?"unlocked":""}`,children:["Encargar Almacén Básico ",K>0&&`(${K})`]}),d.queue>0&&s.jsx(D,{itemName:"basicStorage",onCancel:f})]})]}),s.jsx("img",{src:hs,alt:"Almacén Básico",className:"storage-item-image"})]}),s.jsxs("div",{className:`storage-item ${e>=z&&(r>=3||a.mediumStorage)?"unlocked":""} ${r>=3||a.mediumStorage?"":"locked"}`,children:[s.jsxs("div",{className:"storage-item-content",children:[s.jsx("h3",{style:{color:"#22C55E"},children:"Almacén Medio"}),s.jsxs("p",{children:["Capacidad: +",t(500,i)," chatarra máxima"]}),s.jsxs("p",{children:["Coste: ",t(z,i)," chatarra"]}),s.jsxs("p",{children:["Construidos: ",N," ",l.queue>0?`| En cola: ${l.queue} | Tiempo: ~${n(l.queue*l.time)}`:""]}),s.jsx("p",{children:"Requisitos: 3 Almacenes Básicos (solo para el primero)"}),l.queue>0&&s.jsxs("div",{children:[s.jsxs("p",{className:"time-info",children:["T/U: ",n(l.time)]}),s.jsx(w,{progress:l.progress,time:l.time})]}),s.jsxs("div",{className:"build-actions",children:[s.jsxs(U,{onClick:ts,disabled:e<z||r<3&&!a.mediumStorage,tooltipText:k([{amount:z,current:e,text:"Chatarra"},{amount:3,current:r,text:"Almacenes Básicos"}],i),className:`build-button ${e>=z&&(r>=3||a.mediumStorage)?"unlocked":""}`,children:["Encargar Almacén Medio ",W>0&&`(${W})`]}),l.queue>0&&s.jsx(D,{itemName:"mediumStorage",onCancel:f})]}),r<3&&!a.mediumStorage&&s.jsx("p",{className:"requirement-warning",children:"⚠️ Necesitas 3 Almacenes Básicos"})]}),s.jsx("img",{src:Ns,alt:"Almacén Medio",className:"storage-item-image"})]}),s.jsxs("div",{className:`storage-item ${e>=v&&(N>=1||a.advancedStorage)?"unlocked":""} ${N>=1||a.advancedStorage?"":"locked"}`,children:[s.jsxs("div",{className:"storage-item-content",children:[s.jsx("h3",{style:{color:"#D946EF"},children:"Almacén Avanzado"}),s.jsxs("p",{children:["Capacidad: +",t(5e3,i)," chatarra máxima"]}),s.jsxs("p",{children:["Coste: ",t(v,i)," chatarra"]}),s.jsxs("p",{children:["Construidos: ",C," ",m.queue>0?`| En cola: ${m.queue} | Tiempo: ~${n(m.queue*m.time)}`:""]}),s.jsx("p",{children:"Requisitos: 1 Almacén Medio (solo para el primero)"}),m.queue>0&&s.jsxs("div",{children:[s.jsxs("p",{className:"time-info",children:["T/U: ",n(m.time)]}),s.jsx(w,{progress:m.progress,time:m.time})]}),s.jsxs("div",{className:"build-actions",children:[s.jsxs(U,{onClick:cs,disabled:e<v||N<1&&!a.advancedStorage,tooltipText:k([{amount:v,current:e,text:"Chatarra"},{amount:1,current:N,text:"Almacenes Medios"}],i),className:`build-button ${e>=v&&(N>=1||a.advancedStorage)?"unlocked":""}`,style:{backgroundColor:e>=v&&(N>=1||a.advancedStorage)?"#D946EF":"#9CA3AF"},children:["Encargar Almacén Avanzado ",Y>0&&`(${Y})`]}),m.queue>0&&s.jsx(D,{itemName:"advancedStorage",onCancel:f})]}),N<1&&!a.advancedStorage&&s.jsx("p",{className:"requirement-warning",children:"⚠️ Necesitas 1 Almacén Medio"})]}),s.jsx("img",{src:Cs,alt:"Almacén Avanzado",className:"storage-item-image"})]}),s.jsxs("div",{className:`storage-item ${e>=M&&o>=A&&(C>=3||a.quantumHoardUnit)?"unlocked":""} ${C>=3||a.quantumHoardUnit?"":"locked"}`,children:[s.jsxs("div",{className:"storage-item-content",children:[s.jsx("h3",{style:{color:"#D946EF"},children:"Unidad de Acopio Cuántico"}),s.jsxs("p",{children:["Capacidad: +",t(5e4,i)," chatarra máxima"]}),s.jsxs("p",{children:["Coste: ",t(M,i)," chatarra y ",t(A,i)," metal refinado"]}),s.jsxs("p",{children:["Construidos: ",es," ",x.queue>0?`| En cola: ${x.queue} | Tiempo: ~${n(x.queue*x.time)}`:""]}),s.jsx("p",{children:"Requisitos: 3 Almacenes Avanzados (solo para el primero)"}),x.queue>0&&s.jsxs("div",{children:[s.jsxs("p",{className:"time-info",children:["T/U: ",n(x.time)]}),s.jsx(w,{progress:x.progress,time:x.time})]}),s.jsxs("div",{className:"build-actions",children:[s.jsxs(U,{onClick:ns,disabled:e<M||o<A||C<3&&!a.quantumHoardUnit,tooltipText:k([{amount:M,current:e,text:"Chatarra"},{amount:A,current:o,text:"Metal Refinado"},{amount:3,current:C,text:"Almacenes Avanzados"}],i),className:`build-button ${e>=M&&o>=A&&(C>=3||a.quantumHoardUnit)?"unlocked":""}`,style:{backgroundColor:e>=M&&o>=A&&(C>=3||a.quantumHoardUnit)?"#D946EF":"#9CA3AF"},children:["Encargar Acopio Cuántico ",_>0&&`(${_})`]}),x.queue>0&&s.jsx(D,{itemName:"quantumHoardUnit",onCancel:f})]}),C<3&&!a.quantumHoardUnit&&s.jsx("p",{className:"requirement-warning",children:"⚠️ Necesitas 3 Almacenes Avanzados"})]}),s.jsx("img",{src:qs,alt:"Unidad de Acopio Cuántico",className:"storage-item-image"})]}),s.jsx("h3",{style:{borderBottom:"2px solid #06B6D4",paddingBottom:"0.5rem",marginTop:"3rem"},children:"Almacenamiento de Energía"}),s.jsxs("div",{className:`storage-item ${e>=I?"unlocked":""}`,children:[s.jsxs("div",{className:"storage-item-content",children:[s.jsx("h3",{style:{color:"#06B6D4"},children:"Batería de Iones de Litio"}),s.jsxs("p",{children:["Capacidad: +",t(50,i)," energía máxima"]}),s.jsxs("p",{children:["Coste: ",t(I,i)," chatarra"]}),s.jsxs("p",{children:["Construidos: ",$," ",p.queue>0?`| En cola: ${p.queue} | Tiempo: ~${n(p.queue*p.time)}`:""]}),p.queue>0&&s.jsxs("div",{children:[s.jsxs("p",{className:"time-info",children:["T/U: ",n(p.time)]}),s.jsx(w,{progress:p.progress,time:p.time})]}),s.jsxs("div",{className:"build-actions",children:[s.jsxs(U,{onClick:os,disabled:e<I,tooltipText:k([{amount:I,current:e,text:"Chatarra"}],i),className:`build-button ${e>=I?"unlocked":""}`,children:["Encargar Batería ",F>0&&`(${F})`]}),p.queue>0&&s.jsx(D,{itemName:"lithiumIonBattery",onCancel:f})]})]}),s.jsx("img",{src:$s,alt:"Batería de Iones de Litio",className:"storage-item-image"})]}),s.jsxs("div",{className:`storage-item ${e>=L&&($>=5||a.plasmaAccumulator)?"unlocked":""} ${$>=5||a.plasmaAccumulator?"":"locked"}`,children:[s.jsxs("div",{className:"storage-item-content",children:[s.jsx("h3",{style:{color:"#06B6D4"},children:"Acumulador de Plasma"}),s.jsxs("p",{children:["Capacidad: +",t(250,i)," energía máxima"]}),s.jsxs("p",{children:["Coste: ",t(L,i)," chatarra"]}),s.jsxs("p",{children:["Construidos: ",q," ",j.queue>0?`| En cola: ${j.queue} | Tiempo: ~${n(j.queue*j.time)}`:""]}),s.jsx("p",{children:"Requisitos: 5 Baterías de Iones de Litio (solo para el primero)"}),j.queue>0&&s.jsxs("div",{children:[s.jsxs("p",{className:"time-info",children:["T/U: ",n(j.time)]}),s.jsx(w,{progress:j.progress,time:j.time})]}),s.jsxs("div",{className:"build-actions",children:[s.jsxs(U,{onClick:rs,disabled:e<L||$<5&&!a.plasmaAccumulator,tooltipText:k([{amount:L,current:e,text:"Chatarra"},{amount:5,current:$,text:"Baterías de Iones de Litio"}],i),className:`build-button ${e>=L&&($>=5||a.plasmaAccumulator)?"unlocked":""}`,children:["Encargar Acumulador ",S>0&&`(${S})`]}),j.queue>0&&s.jsx(D,{itemName:"plasmaAccumulator",onCancel:f})]}),$<5&&!a.plasmaAccumulator&&s.jsx("p",{className:"requirement-warning",children:"⚠️ Necesitas 5 Baterías de Iones de Litio"})]}),s.jsx("img",{src:fs,alt:"Acumulador de Plasma",className:"storage-item-image"})]}),s.jsxs("div",{className:`storage-item ${e>=T&&o>=E&&(q>=3||a.harmonicContainmentField)?"unlocked":""} ${q>=3||a.harmonicContainmentField?"":"locked"}`,children:[s.jsxs("div",{className:"storage-item-content",children:[s.jsx("h3",{style:{color:"#D946EF"},children:"Campo de Contención Armónico"}),s.jsxs("p",{children:["Capacidad: +",t(1200,i)," energía máxima"]}),s.jsxs("p",{children:["Coste: ",t(T,i)," chatarra y ",t(E,i)," metal refinado"]}),s.jsxs("p",{children:["Construidos: ",as," ",g.queue>0?`| En cola: ${g.queue} | Tiempo: ~${n(g.queue*g.time)}`:""]}),s.jsx("p",{children:"Requisitos: 3 Acumuladores de Plasma (solo para el primero)"}),g.queue>0&&s.jsxs("div",{children:[s.jsxs("p",{className:"time-info",children:["T/U: ",n(g.time)]}),s.jsx(w,{progress:g.progress,time:g.time})]}),s.jsxs("div",{className:"build-actions",children:[s.jsxs(U,{onClick:ds,disabled:e<T||o<E||q<3&&!a.harmonicContainmentField,tooltipText:k([{amount:T,current:e,text:"Chatarra"},{amount:E,current:o,text:"Metal Refinado"},{amount:3,current:q,text:"Acumuladores de Plasma"}],i),className:`build-button ${e>=T&&o>=E&&(q>=3||a.harmonicContainmentField)?"unlocked":""}`,style:{backgroundColor:e>=T&&o>=E&&(q>=3||a.harmonicContainmentField)?"#D946EF":"#9CA3AF"},children:["Encargar Campo de Contención ",ss>0&&`(${ss})`]}),g.queue>0&&s.jsx(D,{itemName:"harmonicContainmentField",onCancel:f})]}),q<3&&!a.harmonicContainmentField&&s.jsx("p",{className:"requirement-warning",children:"⚠️ Necesitas 3 Acumuladores de Plasma"})]}),s.jsx("img",{src:ks,alt:"Campo de Contención Armónico",className:"storage-item-image"})]})]})})});export{Es as default};
