import{R as oe,j as e,f as s,d as L}from"./index-444e1db9.js";import{B as ne}from"./BuyAmountSelector-70206810.js";import{B as f}from"./BotonConTooltip-bcb612d3.js";import{Q as C}from"./QueueControls-3c40aeee.js";import{u as ce}from"./useDragToScroll-c85dd6c3.js";const ie="/Mekadron-idle/assets/drone-basic-85491f9f.png",te="/Mekadron-idle/assets/drone-medium-fd303461.png",de="/Mekadron-idle/assets/drone-advanced-474a19f4.png",le="/Mekadron-idle/assets/drone-expedition-cdc67b44.png",me="/Mekadron-idle/assets/drone-reinforced-basic-d13b19bd.png",xe="/Mekadron-idle/assets/drone-reinforced-medium-4a10a63f.png",he="/Mekadron-idle/assets/drone-reinforced-advanced-f52beac6.png",pe="/Mekadron-idle/assets/drone-expedition-v2-cdfeb4b3.png",je="/Mekadron-idle/assets/drone-golem-bb288f4d.png",ue="/Mekadron-idle/assets/drone-wyrm-2cd90d83.png",ge=oe.memo(({resources:b,bodegaResources:M,drones:r,queues:c,upgrades:o,onBuildBasicDrone:T,onBuildMediumDrone:q,onBuildAdvancedDrone:S,onBuildReinforcedBasic:O,onBuildReinforcedMedium:z,onBuildReinforcedAdvanced:A,onBuildGolemDrone:R,onBuildExpeditionDrone:P,onBuildExpeditionV2Drone:G,onBuildWyrm:w,onDismantle:d,onRetrofit:F,buyAmount:n,onSetBuyAmount:V,onClose:W,onCancel:t})=>{const{scrap:a}=b,{metalRefinado:i,aceroEstructural:E}=M||{},U=ce(),B=15,$=250,y=1500,l={scrap:600,metal:5},m={scrap:2500,metal:15},x={scrap:7e3,metal:30},h={scrap:3e3,metal:20},p={scrap:15e3,metal:100},j={scrap:75e3,steel:5},u={scrap:2e5,steel:15},N=D=>{const I=D.scrap>0?Math.floor(a/D.scrap):1/0,k=D.metal&&D.metal>0?Math.floor(i/D.metal):1/0,se=D.steel&&D.steel>0?Math.floor(E/D.steel):1/0;return Math.min(I,k,se)},X=N({scrap:B}),Y=N({scrap:$}),Z=N({scrap:y}),H=N(l),J=N(m),K=N(x),_=N(h),ee=N(p),re=N(j),ae=N(u),v=D=>{const I=D.filter(k=>k.current<k.amount);return I.length===0?"":"Requiere: "+I.map(k=>`${k.text} (${s(k.amount)})`).join(", ")};return e.jsxs("div",{className:"workshop-container",ref:U,children:[e.jsxs("div",{className:"workshop-header",children:[e.jsx("h2",{children:"TALLER DE DRONES"}),e.jsx("button",{onClick:W,className:"close-button",children:"Cerrar"})]}),e.jsxs("div",{className:"drone-category",style:{borderColor:"#F59E0B"},children:[e.jsx("h3",{style:{color:"#F59E0B"},children:"DRONES DE RECICLADO"}),e.jsx(ne,{buyAmount:n,onSetBuyAmount:V}),e.jsxs("div",{className:`drone-item ${a>=B?"unlocked":""}`,children:[e.jsxs("div",{className:"drone-item-content",children:[e.jsxs("div",{className:"drone-info",children:[e.jsx("h4",{className:"drone-title",style:{color:"#F59E0B"},children:"Dron Básico de Reciclado (DBR)"}),e.jsxs("p",{children:["Producción: +",s(1)," chatarra/segundo"]}),e.jsxs("p",{children:["Consumo: ",s(1)," energía"]}),e.jsxs("p",{children:["Coste: ",s(B)," chatarra"]}),e.jsxs("p",{children:["Flota: ",r.basic," | En cola: ",c.basic.queue]})]}),e.jsxs("div",{className:"controls-container",children:[e.jsx(C,{queue:c.basic,itemName:"basic",onCancel:t}),e.jsx(g,{upgrades:o,droneType:"basic",onDismantle:d,droneCount:r.basic,buyAmount:n}),e.jsx(Q,{resources:b,bodegaResources:M,upgrades:o,droneType:"basic",toDrone:"medium",onRetrofit:F,droneCount:r.basic})]}),e.jsxs(f,{onClick:T,disabled:a<B,tooltipText:v([{resource:"scrap",amount:B,current:a,text:"Chatarra"}]),className:`build-button ${a>=B?"unlocked":""}`,children:["Encargar Dron Básico ",n==="max"&&`(${X})`]})]}),e.jsx("img",{src:ie,alt:"Dron Básico",className:"drone-item-image"})]}),e.jsxs("div",{className:`drone-item ${a>=$&&r.basic>=5?"unlocked":""} ${r.basic>=5?"":"locked"}`,children:[e.jsxs("div",{className:"drone-item-content",children:[e.jsxs("div",{className:"drone-info",children:[e.jsx("h4",{className:"drone-title",style:{color:"#06B6D4"},children:"Dron Medio de Reciclado (DMR)"}),e.jsxs("p",{children:["Producción: +",s(5)," chatarra/segundo"]}),e.jsxs("p",{children:["Consumo: ",s(3)," energía"]}),e.jsxs("p",{children:["Coste: ",s($)," chatarra"]}),e.jsxs("p",{children:["Flota: ",r.medium," | En cola: ",c.medium.queue]}),e.jsx("p",{children:"Requisitos: 5 Drones Básicos"})]}),e.jsxs("div",{className:"controls-container",children:[e.jsx(C,{queue:c.medium,itemName:"medium",onCancel:t}),e.jsx(g,{upgrades:o,droneType:"medium",onDismantle:d,droneCount:r.medium,buyAmount:n}),e.jsx(Q,{resources:b,bodegaResources:M,upgrades:o,droneType:"medium",toDrone:"advanced",onRetrofit:F,droneCount:r.medium})]}),e.jsxs(f,{onClick:q,disabled:a<$||r.basic<5,tooltipText:v([{amount:$,current:a,text:"Chatarra"},{amount:5,current:r.basic,text:"Drones Básicos"}]),className:`build-button ${a>=$&&r.basic>=5?"unlocked":""}`,children:["Encargar Dron Medio ",n==="max"&&`(${Y})`]}),r.basic<5&&e.jsx("p",{className:"requirement-warning",children:"⚠️ Necesitas 5 Drones Básicos para desbloquear"})]}),e.jsx("img",{src:te,alt:"Dron Medio",className:"drone-item-image"})]}),e.jsxs("div",{className:`drone-item ${a>=y&&r.medium>=3?"unlocked":""} ${r.medium>=3?"":"locked"}`,children:[e.jsxs("div",{className:"drone-item-content",children:[e.jsxs("div",{className:"drone-info",children:[e.jsx("h4",{className:"drone-title",style:{color:"#22C55E"},children:"Dron Avanzado de Reciclado (DAR)"}),e.jsxs("p",{children:["Producción: +",s(20)," chatarra/segundo"]}),e.jsxs("p",{children:["Consumo: ",s(5)," energía"]}),e.jsxs("p",{children:["Coste: ",s(y)," chatarra"]}),e.jsxs("p",{children:["Flota: ",r.advanced," | En cola: ",c.advanced.queue]}),e.jsx("p",{children:"Requisitos: 3 Drones Medios"})]}),e.jsxs("div",{className:"controls-container",children:[e.jsx(C,{queue:c.advanced,itemName:"advanced",onCancel:t}),e.jsx(g,{upgrades:o,droneType:"advanced",onDismantle:d,droneCount:r.advanced,buyAmount:n})]}),e.jsxs(f,{onClick:S,disabled:a<y||r.medium<3,tooltipText:v([{amount:y,current:a,text:"Chatarra"},{amount:3,current:r.medium,text:"Drones Medios"}]),className:`build-button ${a>=y&&r.medium>=3?"unlocked":""}`,children:["Encargar Dron Avanzado ",n==="max"&&`(${Z})`]}),r.medium<3&&e.jsx("p",{className:"requirement-warning",children:"⚠️ Necesitas 3 Drones Medios para desbloquear"})]}),e.jsx("img",{src:de,alt:"Dron Avanzado",className:"drone-item-image"})]})]}),e.jsxs("div",{className:"drone-category",style:{borderColor:"#10B981"},children:[e.jsx("h3",{style:{color:"#10B981"},children:"DRONES DE EXPEDICIÓN"}),e.jsxs("div",{className:`drone-item ${a>=h.scrap&&i>=h.metal&&r.advanced>=2?"unlocked":""} ${r.advanced>=2?"":"locked"}`,children:[e.jsxs("div",{className:"drone-item-content",children:[e.jsxs("div",{className:"drone-info",children:[e.jsx("h4",{className:"drone-title",style:{color:"#10B981"},children:"Dron de Expedición (DE-1)"}),e.jsx("p",{children:"Función: Realiza expediciones para obtener recursos especiales"}),e.jsxs("p",{children:["Consumo: ",s(2)," energía (en expediciones)"]}),e.jsxs("p",{children:["Coste: ",s(h.scrap)," chatarra, ",s(h.metal)," metal refinado"]}),e.jsx("p",{children:"Requisitos: 2 Drones Avanzados"}),e.jsxs("p",{children:["Flota: ",r.expeditionDrone," | En cola: ",c.expeditionDrone.queue]})]}),e.jsxs("div",{className:"controls-container",children:[e.jsx(C,{queue:c.expeditionDrone,itemName:"expedition",onCancel:t}),e.jsx(g,{upgrades:o,droneType:"expeditionDrone",onDismantle:d,droneCount:r.expeditionDrone,buyAmount:n})]}),e.jsxs(f,{onClick:P,disabled:a<h.scrap||i<h.metal||r.advanced<2,tooltipText:v([{amount:h.scrap,current:a,text:"Chatarra"},{amount:h.metal,current:i,text:"Metal Refinado"},{amount:2,current:r.advanced,text:"Drones Avanzados"}]),className:`build-button ${a>=h.scrap&&i>=h.metal&&r.advanced>=2?"unlocked":""}`,children:["Encargar Dron de Expedición ",n==="max"&&`(${_})`]}),r.advanced<2&&e.jsx("p",{className:"requirement-warning",children:"⚠️ Necesitas 2 Drones Avanzados para desbloquear"})]}),e.jsx("img",{src:le,alt:"Dron de Expedición",className:"drone-item-image"})]}),e.jsxs("div",{className:`drone-item ${a>=p.scrap&&i>=p.metal&&r.expeditionDrone>=5?"unlocked":""} ${r.expeditionDrone>=5?"":"locked"}`,children:[e.jsxs("div",{className:"drone-item-content",children:[e.jsxs("div",{className:"drone-info",children:[e.jsx("h4",{className:"drone-title",style:{color:"#059669"},children:"Dron de Expedición v2 (DE-2)"}),e.jsx("p",{children:"Función: Realiza expediciones avanzadas para obtener recursos raros"}),e.jsxs("p",{children:["Consumo: ",s(5)," energía (en expediciones)"]}),e.jsxs("p",{children:["Coste: ",s(p.scrap)," chatarra, ",s(p.metal)," metal refinado"]}),e.jsx("p",{children:"Requisitos: 5 Drones de Expedición"}),e.jsxs("p",{children:["Flota: ",r.expeditionV2Drone," | En cola: ",c.expeditionV2Drone.queue]})]}),e.jsxs("div",{className:"controls-container",children:[e.jsx(C,{queue:c.expeditionV2Drone,itemName:"expeditionV2",onCancel:t}),e.jsx(g,{upgrades:o,droneType:"expeditionV2Drone",onDismantle:d,droneCount:r.expeditionV2Drone,buyAmount:n})]}),e.jsxs(f,{onClick:G,disabled:a<p.scrap||i<p.metal||r.expeditionDrone<5,tooltipText:v([{amount:p.scrap,current:a,text:"Chatarra"},{amount:p.metal,current:i,text:"Metal Refinado"},{amount:5,current:r.expeditionDrone,text:"Drones de Expedición"}]),className:`build-button ${a>=p.scrap&&i>=p.metal&&r.expeditionDrone>=5?"unlocked":""}`,children:["Encargar Dron de Expedición v2 ",n==="max"&&`(${ee})`]}),r.expeditionDrone<5&&e.jsx("p",{className:"requirement-warning",children:"⚠️ Necesitas 5 Drones de Expedición para desbloquear"})]}),e.jsx("img",{src:pe,alt:"Dron de Expedición v2",className:"drone-item-image"})]})]}),(o.reinforcedBasicDrones>0||o.reinforcedMediumDrones>0||o.reinforcedAdvancedDrones>0)&&e.jsxs("div",{className:"drone-category",style:{borderColor:"#8B5CF6"},children:[e.jsx("h3",{style:{color:"#8B5CF6"},children:"DRONES REFORZADOS"}),o.reinforcedBasicDrones>0&&e.jsxs("div",{className:`drone-item ${a>=l.scrap&&i>=l.metal?"unlocked":""}`,children:[e.jsxs("div",{className:"drone-item-content",children:[e.jsxs("div",{className:"drone-info",children:[e.jsx("h4",{className:"drone-title",style:{color:"#A78BFA"},children:"Dron Básico Reforzado (DBR-F)"}),e.jsxs("p",{children:["Producción: +",s(8)," chatarra/segundo"]}),e.jsxs("p",{children:["Consumo: ",s(3)," energía"]}),e.jsxs("p",{children:["Coste: ",s(l.scrap)," chatarra, ",s(l.metal)," metal refinado"]}),e.jsxs("p",{children:["Flota: ",r.reinforcedBasic," | En cola: ",c.reinforcedBasic.queue]})]}),e.jsxs("div",{className:"controls-container",children:[e.jsx(C,{queue:c.reinforcedBasic,itemName:"reinforcedBasic",onCancel:t}),e.jsx(g,{upgrades:o,droneType:"reinforcedBasic",onDismantle:d,droneCount:r.reinforcedBasic,buyAmount:n})]}),e.jsxs(f,{onClick:O,disabled:a<l.scrap||i<l.metal,tooltipText:v([{amount:l.scrap,current:a,text:"Chatarra"},{amount:l.metal,current:i,text:"Metal Refinado"}]),className:`build-button ${a>=l.scrap&&i>=l.metal?"unlocked":""}`,children:["Encargar Dron Básico Reforzado ",n==="max"&&`(${H})`]})]}),e.jsx("img",{src:me,alt:"Dron Básico Reforzado",className:"drone-item-image"})]}),o.reinforcedMediumDrones>0&&e.jsxs("div",{className:`drone-item ${a>=m.scrap&&i>=m.metal?"unlocked":""}`,children:[e.jsxs("div",{className:"drone-item-content",children:[e.jsxs("div",{className:"drone-info",children:[e.jsx("h4",{className:"drone-title",style:{color:"#A78BFA"},children:"Dron Medio Reforzado (DMR-F)"}),e.jsxs("p",{children:["Producción: +",s(25)," chatarra/segundo"]}),e.jsxs("p",{children:["Consumo: ",s(6)," energía"]}),e.jsxs("p",{children:["Coste: ",s(m.scrap)," chatarra, ",s(m.metal)," metal refinado"]}),e.jsxs("p",{children:["Flota: ",r.reinforcedMedium," | En cola: ",c.reinforcedMedium.queue]})]}),e.jsxs("div",{className:"controls-container",children:[e.jsx(C,{queue:c.reinforcedMedium,itemName:"reinforcedMedium",onCancel:t}),e.jsx(g,{upgrades:o,droneType:"reinforcedMedium",onDismantle:d,droneCount:r.reinforcedMedium,buyAmount:n})]}),e.jsxs(f,{onClick:z,disabled:a<m.scrap||i<m.metal,tooltipText:v([{amount:m.scrap,current:a,text:"Chatarra"},{amount:m.metal,current:i,text:"Metal Refinado"}]),className:`build-button ${a>=m.scrap&&i>=m.metal?"unlocked":""}`,children:["Encargar Dron Medio Reforzado ",n==="max"&&`(${J})`]})]}),e.jsx("img",{src:xe,alt:"Dron Medio Reforzado",className:"drone-item-image"})]}),o.reinforcedAdvancedDrones>0&&e.jsxs("div",{className:`drone-item ${a>=x.scrap&&i>=x.metal?"unlocked":""}`,children:[e.jsxs("div",{className:"drone-item-content",children:[e.jsxs("div",{className:"drone-info",children:[e.jsx("h4",{className:"drone-title",style:{color:"#A78BFA"},children:"Dron Avanzado Reforzado (DAR-F)"}),e.jsxs("p",{children:["Producción: +",s(80)," chatarra/segundo"]}),e.jsxs("p",{children:["Consumo: ",s(12)," energía"]}),e.jsxs("p",{children:["Coste: ",s(x.scrap)," chatarra, ",s(x.metal)," metal refinado"]}),e.jsxs("p",{children:["Flota: ",r.reinforcedAdvanced," | En cola: ",c.reinforcedAdvanced.queue]})]}),e.jsxs("div",{className:"controls-container",children:[e.jsx(C,{queue:c.reinforcedAdvanced,itemName:"reinforcedAdvanced",onCancel:t}),e.jsx(g,{upgrades:o,droneType:"reinforcedAdvanced",onDismantle:d,droneCount:r.reinforcedAdvanced,buyAmount:n})]}),e.jsxs(f,{onClick:A,disabled:a<x.scrap||i<x.metal,tooltipText:v([{amount:x.scrap,current:a,text:"Chatarra"},{amount:x.metal,current:i,text:"Metal Refinado"}]),className:`build-button ${a>=x.scrap&&i>=x.metal?"unlocked":""}`,children:["Encargar Dron Avanzado Reforzado ",n==="max"&&`(${K})`]})]}),e.jsx("img",{src:he,alt:"Dron Avanzado Reforzado",className:"drone-item-image"})]})]}),(o.golemChassis>0||o.wyrm>0)&&e.jsxs("div",{className:"drone-category",style:{borderColor:"#F43F5E"},children:[e.jsx("h3",{style:{color:"#F43F5E"},children:"DRONES DE ÉLITE"}),o.golemChassis>0&&e.jsxs("div",{className:`drone-item ${a>=j.scrap&&E>=j.steel&&r.reinforcedAdvanced>=5?"unlocked":""} ${r.reinforcedAdvanced>=5?"":"locked"}`,children:[e.jsxs("div",{className:"drone-item-content",children:[e.jsxs("div",{className:"drone-info",children:[e.jsx("h4",{className:"drone-title",style:{color:"#F43F5E"},children:"Dron Golem (DG-1)"}),e.jsxs("p",{children:[e.jsx("strong",{children:"Descripción:"})," Un chasis masivo diseñado para procesar chatarra. Consume Chatarra para producir Metal Refinado de forma pasiva."]}),e.jsx("p",{children:"Consumo: 50 energía/segundo"}),e.jsx("p",{children:"Consume: 500 Chatarra/s | Produce: 0.5 Metal Refinado/s"}),e.jsxs("p",{children:["Coste: ",s(j.scrap)," chatarra, ",s(j.steel)," acero estructural"]}),e.jsx("p",{children:'Requisitos: 5 Drones Avanzados Reforzados Y la investigación "Chasis Golem"'}),e.jsxs("p",{children:["Flota: ",r.golem," | En cola: ",c.golem.queue]})]}),e.jsxs("div",{className:"controls-container",children:[e.jsx(C,{queue:c.golem,itemName:"golem",onCancel:t}),e.jsx(g,{upgrades:o,droneType:"golem",onDismantle:d,droneCount:r.golem,buyAmount:n})]}),e.jsxs(f,{onClick:R,disabled:a<j.scrap||E<j.steel||r.reinforcedAdvanced<5||o.golemChassis===0,tooltipText:v([{amount:j.scrap,current:a,text:"Chatarra"},{amount:j.steel,current:E,text:"Acero Estructural"},{amount:5,current:r.reinforcedAdvanced,text:"Drones Avanzados Reforzados"},{amount:1,current:o.golemChassis,text:"Investigación: Chasis Golem"}]),className:`build-button ${a>=j.scrap&&E>=j.steel&&r.reinforcedAdvanced>=5&&o.golemChassis>0?"unlocked":""}`,children:["Encargar Dron Golem ",n==="max"&&`(${re})`]})]}),e.jsx("img",{src:je,alt:"Dron Golem",className:"drone-item-image"})]})]}),o.golemChassis>0&&r.golem>=1&&e.jsxs("div",{className:`drone-item ${a>=u.scrap&&E>=u.steel&&r.golem>=1?"unlocked":""} ${r.golem>=1?"":"locked"}`,children:[e.jsxs("div",{className:"drone-item-content",children:[e.jsxs("div",{className:"drone-info",children:[e.jsx("h4",{className:"drone-title",style:{color:"#F43F5E"},children:"Dron Wyrm (DW-1)"}),e.jsxs("p",{children:[e.jsx("strong",{children:"Descripción:"})," Una maravilla de la ingeniería. Consume Chatarra para sintetizar Acero Estructural de forma pasiva."]}),e.jsx("p",{children:"Consumo: 200 energía/segundo"}),e.jsx("p",{children:"Consume: 1000 Chatarra/s | Produce: 0.25 Acero Estructural/s"}),e.jsxs("p",{children:["Coste: ",s(u.scrap)," chatarra, ",s(u.steel)," acero estructural"]}),e.jsx("p",{children:"Requisitos: 1 Dron Golem"}),e.jsxs("p",{children:["Flota: ",r.wyrm," | En cola: ",c.wyrm.queue]})]}),e.jsxs("div",{className:"controls-container",children:[e.jsx(C,{queue:c.wyrm,itemName:"wyrm",onCancel:t}),e.jsx(g,{upgrades:o,droneType:"wyrm",onDismantle:d,droneCount:r.wyrm,buyAmount:n})]}),e.jsxs(f,{onClick:w,disabled:a<u.scrap||E<u.steel||r.golem<1,tooltipText:v([{amount:u.scrap,current:a,text:"Chatarra"},{amount:u.steel,current:E,text:"Acero"},{amount:1,current:r.golem,text:"Drones Golem"}]),className:`build-button ${a>=u.scrap&&E>=u.steel&&r.golem>=1?"unlocked":""}`,children:["Encargar Dron Wyrm ",n==="max"&&`(${ae})`]})]}),e.jsx("img",{src:ue,alt:"Dron Wyrm",className:"drone-item-image"})]})]})}),g=({upgrades:b,droneType:M,droneCount:r,buyAmount:c,onDismantle:o})=>b.reassignProtocols?e.jsx("button",{onClick:()=>o(M,c),disabled:r<=0,style:{padding:"0.5rem",backgroundColor:r>0?"#EF4444":"#374151",color:"white",border:"none",borderRadius:"4px",cursor:r>0?"pointer":"not-allowed",fontSize:"0.8rem",width:"100px"},children:"Desmantelar"}):null,Q=({resources:b,bodegaResources:M,upgrades:r,droneType:c,toDrone:o,droneCount:T,onRetrofit:q})=>{var d,F;if(!r.droneRetrofitting)return e.jsx("div",{style:{width:"100px"}});const S=((d=L[c])==null?void 0:d.cost)||{},O=((F=L[o])==null?void 0:F.cost)||{},z={};let A=!0,R="Reacondicionar: ";const P={...b,...M},G=Object.entries(O);for(const[n,V]of G){const W=S[n]||0,t=V-W;t>0&&(z[n]=t,P[n]<t&&(A=!1),R+=`${s(t)} ${n}, `)}Object.keys(z).length===0?R="Mejora gratuita":R=R.slice(0,-2);const w=T>0&&A;return e.jsx(f,{onClick:()=>q(c,o),disabled:!w,tooltipText:T>0?R:"No hay drones para reacondicionar",className:`build-button retrofit-button ${w?"unlocked":""}`,children:"Mejorar"})};export{ge as default};
