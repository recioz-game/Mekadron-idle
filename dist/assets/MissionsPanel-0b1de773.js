import{R as M,u as y,a as b,b as f,r as R,j as e}from"./index-444e1db9.js";import{u as S}from"./useDragToScroll-c85dd6c3.js";const w=M.memo(({onClose:h})=>{const p=S(),{activeMissions:c,completedMissions:i}=y(),{scrap:u,maxScrap:x,energy:j,maxEnergy:N}=b(),t=f(),v=R.useCallback(s=>{t({type:"CLAIM_REWARD",payload:s})},[t]),g=s=>Math.min(s.current/s.target*100,100),E=s=>{switch(s.type){case"scrap":return`+${s.value} Chatarra`;case"energy":return`+${s.value} Energía`;case"drone":return"Dron Básico";case"unlock":return`Desbloqueo de ${s.value}`;default:return"Recompensa"}},C=s=>{if(s.completed)return!1;switch(s.reward.type){case"scrap":return u+s.reward.value<=x;case"energy":return j+s.reward.value<=N;case"drone":case"unlock":return!0;default:return!0}},n=c.filter(s=>s.isMain&&!s.completed),l=c.filter(s=>!s.isMain&&!s.completed),o=(s,d)=>{const a=g(s),r=a>=100&&C(s),m=a>=100&&!r;return e.jsxs("div",{className:`mission-item ${d?"main":"secondary"} ${a>=100?"completed":""}`,children:[e.jsxs("div",{className:"mission-header",children:[e.jsx("h4",{className:"mission-title",style:{color:d?"#D946EF":a>=100?"#22C55E":"#F59E0B"},children:s.title}),e.jsx("span",{className:"mission-reward",children:E(s.reward)})]}),e.jsx("p",{className:"mission-description",children:s.description}),e.jsxs("div",{className:"progress-info",children:[e.jsxs("div",{className:"progress-text",children:[e.jsxs("span",{children:["Progreso: ",s.current,"/",s.target]}),e.jsxs("span",{children:[Math.round(a),"%"]})]}),e.jsx("div",{className:"progress-bar-container",children:e.jsx("div",{className:"progress-bar",style:{width:`${a}%`,backgroundColor:a>=100?"#22C55E":"#06B6D4"}})})]}),e.jsxs("div",{className:"mission-objective",children:["Objetivo: ",s.objective]}),a>=100&&e.jsxs("div",{className:"claim-section",children:[m&&e.jsx("span",{className:"claim-warning",children:"Espacio insuficiente"}),e.jsx("button",{onClick:()=>v(s.id),disabled:!r,className:`claim-button ${r?"can-claim":""}`,children:r?"Reclamar":m?"Completar":"Esperando"})]})]})};return e.jsxs("div",{className:"missions-panel-container",ref:p,children:[e.jsxs("div",{className:"missions-panel-header",children:[e.jsx("h2",{children:"SISTEMA DE MISIONES"}),e.jsx("button",{onClick:h,className:"close-button",children:"Cerrar"})]}),n.length>0&&e.jsxs("div",{className:"mission-category",children:[e.jsx("h3",{style:{color:"#D946EF",borderBottom:"1px solid #D946EF"},children:"MISIÓN PRINCIPAL"}),n.map(s=>o(s,!0))]}),e.jsxs("div",{className:"mission-category",children:[e.jsx("h3",{style:{color:"#F59E0B"},children:"MISIONES SECUNDARIAS"}),l.length===0&&n.length===0?e.jsx("div",{className:"no-missions",children:"No hay misiones activas. ¡Excelente trabajo, técnico!"}):l.map(s=>o(s,!1))]}),i.length>0&&e.jsxs("div",{children:[e.jsx("h3",{style:{color:"#22C55E"},children:"MISIONES COMPLETADAS"}),e.jsxs("div",{className:"completed-missions",children:[e.jsxs("div",{className:"completed-missions-title",children:[i.length," misión(es) completada(s)"]}),e.jsx("div",{className:"completed-missions-text",children:"Continúa expandiendo la estación para desbloquear nuevas misiones."})]})]})]})});export{w as default};
