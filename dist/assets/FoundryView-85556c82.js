import{R as L,j as e,f as t,h as O,s as X,i as Y,k as Z,l as _}from"./index-5b1e887f.js";import{B as Q,Q as C}from"./QueueControls-8003cb5f.js";import{B as N}from"./BotonConTooltip-01b3c545.js";import{u as ee}from"./useDragToScroll-42566c8e.js";const E=({progress:o,time:s})=>e.jsx("div",{className:"progress-bar-container",children:e.jsx("div",{className:"progress-bar",style:{width:`${o/s*100}%`}})}),ae=L.memo(({scrap:o,energy:s,metalRefinado:c,aceroEstructural:y,fragmentosPlaca:P,circuitosDañados:B,placasCasco:w,cableadoSuperconductor:I,barraCombustible:U,metalRefinadoQueue:d,aceroEstructuralQueue:x,placasCascoQueue:h,cableadoSuperconductorQueue:j,barraCombustibleQueue:g,onCraftRefinedMetal:A,onCraftStructuralSteel:D,onCraftHullPlate:R,onCraftSuperconductorWiring:V,onCraftFuelRod:W,onCraftPurifiedMetal:z,upgrades:S,buyAmount:l,onSetBuyAmount:G,onClose:H,onCancel:M})=>{const u={scrap:1e3,energy:100},r={scrap:1e3,metal:10,energy:250},n={fragmentos:10,acero:5,energy:500},a={circuitos:10,metal:25,energy:1e3},i={metal:10,acero:5,energy:1500},f={scrap:5e3,energy:500},$=Math.min(Math.floor(o/u.scrap),Math.floor(s/u.energy)),k=Math.min(Math.floor(o/r.scrap),Math.floor(c/r.metal),Math.floor(s/r.energy)),b=Math.min(Math.floor(P/n.fragmentos),Math.floor(y/n.acero),Math.floor(s/n.energy)),T=Math.min(Math.floor(B/a.circuitos),Math.floor(c/a.metal),Math.floor(s/a.energy)),q=Math.min(Math.floor(c/i.metal),Math.floor(y/i.acero),Math.floor(s/i.energy)),m=Math.min(Math.floor(o/f.scrap),Math.floor(s/f.energy)),J=ee(),p=K=>{const F=K.filter(v=>v.current<v.amount);return F.length===0?"":"Requiere: "+F.map(v=>`${v.text} (${t(v.amount)})`).join(", ")};return e.jsx("div",{className:"foundry-view-container",children:e.jsxs("div",{className:"foundry-content-area",ref:J,children:[e.jsx("button",{onClick:H,className:"close-button",children:"×"}),e.jsx(Q,{buyAmount:l,onSetBuyAmount:G}),e.jsxs("div",{className:`foundry-item ${$>0?"unlocked":""}`,children:[e.jsxs("div",{className:"foundry-item-content",children:[e.jsx("h4",{style:{color:"#F59E0B"},children:"Metal Refinado"}),e.jsxs("p",{children:["Coste: ",t(u.scrap)," Chatarra + ",t(u.energy)," Energía"]}),e.jsxs("p",{children:["En Posesión: ",t(c)," | En cola: ",d.queue]}),d.queue>0&&e.jsxs("div",{children:[e.jsxs("p",{className:"time-info",children:["T/U: ",d.time,"s"]}),e.jsx(E,{progress:d.progress,time:d.time})]}),e.jsxs("div",{className:"build-actions",children:[e.jsxs(N,{onClick:A,disabled:$<=0,tooltipText:p([{amount:u.scrap,current:o,text:"Chatarra"},{amount:u.energy,current:s,text:"Energía"}]),className:`build-button ${$>0?"unlocked":""}`,children:["Encargar ",l==="max"&&`(${$})`]}),d.queue>0&&e.jsx(C,{itemName:"metalRefinado",onCancel:M})]})]}),e.jsx("img",{src:O,alt:"Metal Refinado",className:"foundry-item-image"})]}),e.jsxs("div",{className:`foundry-item ${k>0?"unlocked":""}`,children:[e.jsxs("div",{className:"foundry-item-content",children:[e.jsx("h4",{style:{color:"#06B6D4"},children:"Acero Estructural"}),e.jsxs("p",{children:["Coste: ",t(r.scrap)," Chatarra + ",r.metal," Metal + ",r.energy," Energía"]}),e.jsxs("p",{children:["En Posesión: ",t(y)," | En cola: ",x.queue]}),x.queue>0&&e.jsxs("div",{children:[e.jsxs("p",{className:"time-info",children:["T/U: ",x.time,"s"]}),e.jsx(E,{progress:x.progress,time:x.time})]}),e.jsxs("div",{className:"build-actions",children:[e.jsxs(N,{onClick:D,disabled:k<=0,tooltipText:p([{amount:r.scrap,current:o,text:"Chatarra"},{amount:r.metal,current:c,text:"Metal"},{amount:r.energy,current:s,text:"Energía"}]),className:`build-button ${k>0?"unlocked":""}`,children:["Encargar ",l==="max"&&`(${k})`]}),x.queue>0&&e.jsx(C,{itemName:"aceroEstructural",onCancel:M})]})]}),e.jsx("img",{src:X,alt:"Acero Estructural",className:"foundry-item-image"})]}),e.jsx("h3",{className:"section-title",children:"Componentes de Nave"}),e.jsxs("div",{className:`foundry-item ${b>0?"unlocked":""}`,children:[e.jsxs("div",{className:"foundry-item-content",children:[e.jsx("h4",{style:{color:"#F59E0B"},children:"Placa de Casco Reforzado"}),e.jsxs("p",{children:["Coste: ",n.fragmentos," Fragmentos + ",n.acero," Acero + ",n.energy," Energía"]}),e.jsxs("p",{children:["En Posesión: ",t(w)," | En cola: ",h.queue]}),h.queue>0&&e.jsxs("div",{children:[e.jsxs("p",{className:"time-info",children:["T/U: ",h.time,"s"]}),e.jsx(E,{progress:h.progress,time:h.time})]}),e.jsxs("div",{className:"build-actions",children:[e.jsxs(N,{onClick:R,disabled:b<=0,tooltipText:p([{amount:n.fragmentos,current:P,text:"Fragmentos"},{amount:n.acero,current:y,text:"Acero"},{amount:n.energy,current:s,text:"Energía"}]),className:`build-button ${b>0?"unlocked":""}`,children:["Encargar ",l==="max"&&`(${b})`]}),h.queue>0&&e.jsx(C,{itemName:"placasCasco",onCancel:M})]})]}),e.jsx("img",{src:Y,alt:"Placa de Casco",className:"foundry-item-image"})]}),e.jsxs("div",{className:`foundry-item ${T>0?"unlocked":""}`,children:[e.jsxs("div",{className:"foundry-item-content",children:[e.jsx("h4",{style:{color:"#06B6D4"},children:"Cableado de Superconductores"}),e.jsxs("p",{children:["Coste: ",a.circuitos," Circuitos + ",a.metal," Metal + ",a.energy," Energía"]}),e.jsxs("p",{children:["En Posesión: ",t(I)," | En cola: ",j.queue]}),j.queue>0&&e.jsxs("div",{children:[e.jsxs("p",{className:"time-info",children:["T/U: ",j.time,"s"]}),e.jsx(E,{progress:j.progress,time:j.time})]}),e.jsxs("div",{className:"build-actions",children:[e.jsxs(N,{onClick:V,disabled:T<=0,tooltipText:p([{amount:a.circuitos,current:B,text:"Circuitos"},{amount:a.metal,current:c,text:"Metal"},{amount:a.energy,current:s,text:"Energía"}]),className:`build-button ${T>0?"unlocked":""}`,children:["Encargar ",l==="max"&&`(${T})`]}),j.queue>0&&e.jsx(C,{itemName:"cableadoSuperconductor",onCancel:M})]})]}),e.jsx("img",{src:Z,alt:"Cableado",className:"foundry-item-image"})]}),e.jsxs("div",{className:`foundry-item ${q>0?"unlocked":""}`,children:[e.jsxs("div",{className:"foundry-item-content",children:[e.jsx("h4",{style:{color:"#FCD34D"},children:"Barra de Combustible"}),e.jsxs("p",{children:["Coste: ",i.metal," Metal + ",i.acero," Acero + ",i.energy," Energía"]}),e.jsxs("p",{children:["En Posesión: ",t(U)," | En cola: ",g.queue]}),g.queue>0&&e.jsxs("div",{children:[e.jsxs("p",{className:"time-info",children:["T/U: ",g.time,"s"]}),e.jsx(E,{progress:g.progress,time:g.time})]}),e.jsxs("div",{className:"build-actions",children:[e.jsxs(N,{onClick:W,disabled:q<=0,tooltipText:p([{amount:i.metal,current:c,text:"Metal"},{amount:i.acero,current:y,text:"Acero"},{amount:i.energy,current:s,text:"Energía"}]),className:`build-button ${q>0?"unlocked":""}`,children:["Encargar ",l==="max"&&`(${q})`]}),g.queue>0&&e.jsx(C,{itemName:"barraCombustible",onCancel:M})]})]}),e.jsx("img",{src:_,alt:"Barra de Combustible",className:"foundry-item-image"})]}),S.scrapPurification>0&&e.jsx("div",{className:`crafting-item ${m>0?"available":""}`,style:{borderColor:m>0?"#A855F7":""},children:e.jsxs("div",{className:"crafting-item-content full-width",children:[e.jsxs("div",{className:"crafting-item-info",children:[e.jsx("h4",{style:{color:"#A855F7"},children:"Purificación de Chatarra"}),e.jsx("p",{children:"Convierte una gran cantidad de recursos básicos en Metal Refinado. Es ineficiente, pero útil en emergencias."}),e.jsxs("p",{children:["Coste: ",t(f.scrap)," Chatarra + ",t(f.energy)," Energía"]})]}),e.jsxs(N,{onClick:z,disabled:m<=0,tooltipText:p([{amount:f.scrap,current:o,text:"Chatarra"},{amount:f.energy,current:s,text:"Energía"}]),className:`build-button ${m>0?"unlocked":""}`,style:{backgroundColor:m>0?"#A855F7":"",color:m>0?"white":""},children:["Purificar Chatarra ",l==="max"&&`(${m})`]})]})})]})})});export{ae as default};
