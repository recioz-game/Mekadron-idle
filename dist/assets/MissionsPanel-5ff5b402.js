import{R as b,u as y,b as M,c as f,r as R,j as s}from"./index-f079f02b.js";import{u as D}from"./useDragToScroll-db8ffe67.js";const w=b.memo(({onClose:u})=>{const p=D(),{activeMissions:c,completedMissions:i}=y(),{scrap:h,maxScrap:x,energy:j,maxEnergy:N}=M(),t=f(),g=R.useCallback(e=>{t({type:"CLAIM_REWARD",payload:e})},[t]),v=e=>Math.min(e.current/e.target*100,100),E=e=>{switch(e.type){case"scrap":return`+${e.value} Chatarra`;case"energy":return`+${e.value} Energía`;case"drone":return"Dron Básico";case"nucleoSingularidad":return"1x Núcleo de Singularidad";case"unlock":return e.value===2?"Desbloqueo: Fase 2":"Desbloqueo";default:return"Recompensa"}},C=e=>{if(e.completed)return!1;switch(e.reward.type){case"scrap":return h+e.reward.value<=x;case"energy":return j+e.reward.value<=N;case"drone":case"unlock":return!0;default:return!0}},n=c.filter(e=>e.isMain&&!e.completed),l=c.filter(e=>!e.isMain&&!e.completed),o=(e,d)=>{const a=v(e),r=a>=100&&C(e),m=a>=100&&!r;return s.jsxs("div",{className:`mission-item ${d?"main":"secondary"} ${a>=100?"completed":""}`,children:[s.jsxs("div",{className:"mission-header",children:[s.jsx("h4",{className:"mission-title",style:{color:d?"#D946EF":a>=100?"#22C55E":"#F59E0B"},children:e.title}),s.jsx("span",{className:"mission-reward",children:E(e.reward)})]}),s.jsx("p",{className:"mission-description",children:e.description}),s.jsxs("div",{className:"progress-info",children:[s.jsxs("div",{className:"progress-text",children:[s.jsxs("span",{children:["Progreso: ",e.current,"/",e.target]}),s.jsxs("span",{children:[Math.round(a),"%"]})]}),s.jsx("div",{className:"progress-bar-container",children:s.jsx("div",{className:"progress-bar",style:{width:`${a}%`,backgroundColor:a>=100?"#22C55E":"#06B6D4"}})})]}),s.jsxs("div",{className:"mission-objective",children:["Objetivo: ",e.objective]}),a>=100&&s.jsxs("div",{className:"claim-section",children:[m&&s.jsx("span",{className:"claim-warning",children:"Espacio insuficiente"}),s.jsx("button",{onClick:()=>g(e.id),disabled:!r,className:`claim-button ${r?"can-claim":""}`,children:r?"Reclamar":m?"Completar":"Esperando"})]})]})};return s.jsx("div",{className:"missions-panel-container",children:s.jsxs("div",{className:"missions-content-area",ref:p,children:[s.jsx("button",{onClick:u,className:"close-button",children:"×"}),n.length>0&&s.jsxs("div",{className:"mission-category",children:[s.jsx("h3",{style:{color:"#D946EF",borderBottom:"1px solid #D946EF"},children:"MISIÓN PRINCIPAL"}),n.map(e=>o(e,!0))]}),s.jsxs("div",{className:"mission-category",children:[s.jsx("h3",{style:{color:"#F59E0B"},children:"MISIONES SECUNDARIAS"}),l.length===0&&n.length===0?s.jsx("div",{className:"no-missions",children:"No hay misiones activas. ¡Excelente trabajo, técnico!"}):l.map(e=>o(e,!1))]}),i.length>0&&s.jsxs("div",{children:[s.jsx("h3",{style:{color:"#22C55E"},children:"MISIONES COMPLETADAS"}),s.jsxs("div",{className:"completed-missions",children:[s.jsxs("div",{className:"completed-missions-title",children:[i.length," misión(es) completada(s)"]}),s.jsx("div",{className:"completed-missions-text",children:"Continúa expandiendo la estación para desbloquear nuevas misiones."})]})]})]})})});export{w as default};
