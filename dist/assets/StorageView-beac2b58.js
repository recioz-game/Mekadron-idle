import{R as ps,j as s,f as i,a as n,g}from"./index-e148e5e3.js";import{B as js,a as U}from"./BotonConTooltip-bfb58e36.js";import{Q as w}from"./QueueControls-99fe4adf.js";import{u as hs}from"./useDragToScroll-42de5d67.js";const gs=""+new URL("storage-basic-41fbd999.png",import.meta.url).href,Ns=""+new URL("storage-medium-e68240b8.png",import.meta.url).href,Cs=""+new URL("storage-advanced-049817db.png",import.meta.url).href,qs=""+new URL("storage-quantum-6aface52.png",import.meta.url).href,fs=""+new URL("battery-lithium-ion-407b0dc1.png",import.meta.url).href,$s=""+new URL("accumulator-plasma-963d6d52.png",import.meta.url).href,vs=""+new URL("harmonic-containment-field-3b46fe0e.png",import.meta.url).href,L=({progress:b,time:r})=>s.jsx("div",{className:"progress-bar-container",children:s.jsx("div",{className:"progress-bar",style:{width:`${b/r*100}%`}})}),Rs=ps.memo(({resources:b,basicStorage:r,mediumStorage:N,advancedStorage:C,quantumHoardUnit:es,lithiumIonBattery:f,plasmaAccumulator:q,harmonicContainmentField:as,hasBuilt:a,basicStorageQueue:l,mediumStorageQueue:d,advancedStorageQueue:m,quantumHoardUnitQueue:x,lithiumIonBatteryQueue:p,plasmaAccumulatorQueue:j,harmonicContainmentFieldQueue:h,onBuildBasicStorage:ts,onBuildMediumStorage:is,onBuildAdvancedStorage:cs,onBuildQuantumHoardUnit:ns,onBuildLithiumIonBattery:os,onBuildPlasmaAccumulator:rs,onBuildHarmonicContainmentField:ls,buyAmount:c,onSetBuyAmount:ds,onClose:ms,onCancel:$,numberFormat:t})=>{const{scrap:e,metalRefinado:o}=b,xs=hs(),v=(I,G)=>{const V=I.filter(H=>H.current<H.amount);return V.length===0?"":"Requiere: "+V.map(H=>`${H.text} (${i(H.amount,G)})`).join(", ")},D=g.storage.basicStorage.costs.scrap,u=g.storage.mediumStorage.costs.scrap,A=g.storage.advancedStorage.costs.scrap,k=g.storage.quantumHoardUnit.costs.scrap,M=g.storage.quantumHoardUnit.costs.metalRefinado,P=g.storage.lithiumIonBattery.costs.scrap,z=g.storage.plasmaAccumulator.costs.scrap,T=g.storage.harmonicContainmentField.costs.scrap,R=g.storage.harmonicContainmentField.costs.metalRefinado,E=I=>{const G=I.scrap?Math.floor(e/I.scrap):1/0,V=I.metalRefinado?Math.floor(o/I.metalRefinado):1/0;return Math.min(G,V)},J=E({scrap:D}),K=c==="max"?J:Math.min(c,J),O=E({scrap:u}),W=c==="max"?O:Math.min(c,O),X=E({scrap:A}),Y=c==="max"?X:Math.min(c,X),Z=E({scrap:k,metalRefinado:M}),_=c==="max"?Z:Math.min(c,Z),y=E({scrap:P}),F=c==="max"?y:Math.min(c,y),B=E({scrap:z}),S=c==="max"?B:Math.min(c,B),Q=E({scrap:T,metalRefinado:R}),ss=c==="max"?Q:Math.min(c,Q);return s.jsx("div",{className:"storage-view-container",children:s.jsxs("div",{className:"storage-content-area",ref:xs,children:[s.jsx("button",{onClick:ms,className:"close-button",children:"×"}),s.jsx(js,{buyAmount:c,onSetBuyAmount:ds}),s.jsxs("div",{className:`storage-item ${e>=D?"unlocked":""}`,children:[s.jsxs("div",{className:"storage-item-content",children:[s.jsx("h3",{style:{color:"#F59E0B"},children:"Almacén Básico"}),s.jsxs("p",{children:["Capacidad: +",i(50,t)," chatarra máxima"]}),s.jsxs("p",{children:["Coste: ",i(D,t)," chatarra"]}),s.jsxs("p",{children:["Construidos: ",r," ",l.queue>0?`| En cola: ${l.queue} | Tiempo: ~${n(l.queue*l.time)}`:""]}),l.queue>0&&s.jsxs("div",{children:[s.jsxs("p",{className:"time-info",children:["T/U: ",n(l.time)]}),s.jsx(L,{progress:l.progress,time:l.time})]}),s.jsxs("div",{className:"build-actions",children:[s.jsxs(U,{onClick:ts,disabled:e<D,tooltipText:v([{amount:D,current:e,text:"Chatarra"}],t),className:`build-button ${e>=D?"unlocked":""}`,children:["Encargar Almacén Básico ",K>0&&`(${K})`]}),l.queue>0&&s.jsx(w,{itemName:"basicStorage",onCancel:$})]})]}),s.jsx("img",{src:gs,alt:"Almacén Básico",className:"storage-item-image"})]}),s.jsxs("div",{className:`storage-item ${e>=u&&(r>=3||a.mediumStorage)?"unlocked":""} ${r>=3||a.mediumStorage?"":"locked"}`,children:[s.jsxs("div",{className:"storage-item-content",children:[s.jsx("h3",{style:{color:"#22C55E"},children:"Almacén Medio"}),s.jsxs("p",{children:["Capacidad: +",i(500,t)," chatarra máxima"]}),s.jsxs("p",{children:["Coste: ",i(u,t)," chatarra"]}),s.jsxs("p",{children:["Construidos: ",N," ",d.queue>0?`| En cola: ${d.queue} | Tiempo: ~${n(d.queue*d.time)}`:""]}),s.jsx("p",{children:"Requisitos: 3 Almacenes Básicos (solo para el primero)"}),d.queue>0&&s.jsxs("div",{children:[s.jsxs("p",{className:"time-info",children:["T/U: ",n(d.time)]}),s.jsx(L,{progress:d.progress,time:d.time})]}),s.jsxs("div",{className:"build-actions",children:[s.jsxs(U,{onClick:is,disabled:e<u||r<3&&!a.mediumStorage,tooltipText:v([{amount:u,current:e,text:"Chatarra"},{amount:3,current:r,text:"Almacenes Básicos"}],t),className:`build-button ${e>=u&&(r>=3||a.mediumStorage)?"unlocked":""}`,children:["Encargar Almacén Medio ",W>0&&`(${W})`]}),d.queue>0&&s.jsx(w,{itemName:"mediumStorage",onCancel:$})]}),r<3&&!a.mediumStorage&&s.jsx("p",{className:"requirement-warning",children:"⚠️ Necesitas 3 Almacenes Básicos"})]}),s.jsx("img",{src:Ns,alt:"Almacén Medio",className:"storage-item-image"})]}),s.jsxs("div",{className:`storage-item ${e>=A&&(N>=1||a.advancedStorage)?"unlocked":""} ${N>=1||a.advancedStorage?"":"locked"}`,children:[s.jsxs("div",{className:"storage-item-content",children:[s.jsx("h3",{style:{color:"#D946EF"},children:"Almacén Avanzado"}),s.jsxs("p",{children:["Capacidad: +",i(5e3,t)," chatarra máxima"]}),s.jsxs("p",{children:["Coste: ",i(A,t)," chatarra"]}),s.jsxs("p",{children:["Construidos: ",C," ",m.queue>0?`| En cola: ${m.queue} | Tiempo: ~${n(m.queue*m.time)}`:""]}),s.jsx("p",{children:"Requisitos: 1 Almacén Medio (solo para el primero)"}),m.queue>0&&s.jsxs("div",{children:[s.jsxs("p",{className:"time-info",children:["T/U: ",n(m.time)]}),s.jsx(L,{progress:m.progress,time:m.time})]}),s.jsxs("div",{className:"build-actions",children:[s.jsxs(U,{onClick:cs,disabled:e<A||N<1&&!a.advancedStorage,tooltipText:v([{amount:A,current:e,text:"Chatarra"},{amount:1,current:N,text:"Almacenes Medios"}],t),className:`build-button ${e>=A&&(N>=1||a.advancedStorage)?"unlocked":""}`,style:{backgroundColor:e>=A&&(N>=1||a.advancedStorage)?"#D946EF":"#9CA3AF"},children:["Encargar Almacén Avanzado ",Y>0&&`(${Y})`]}),m.queue>0&&s.jsx(w,{itemName:"advancedStorage",onCancel:$})]}),N<1&&!a.advancedStorage&&s.jsx("p",{className:"requirement-warning",children:"⚠️ Necesitas 1 Almacén Medio"})]}),s.jsx("img",{src:Cs,alt:"Almacén Avanzado",className:"storage-item-image"})]}),s.jsxs("div",{className:`storage-item ${e>=k&&o>=M&&(C>=3||a.quantumHoardUnit)?"unlocked":""} ${C>=3||a.quantumHoardUnit?"":"locked"}`,children:[s.jsxs("div",{className:"storage-item-content",children:[s.jsx("h3",{style:{color:"#D946EF"},children:"Unidad de Acopio Cuántico"}),s.jsxs("p",{children:["Capacidad: +",i(5e4,t)," chatarra máxima"]}),s.jsxs("p",{children:["Coste: ",i(k,t)," chatarra y ",i(M,t)," metal refinado"]}),s.jsxs("p",{children:["Construidos: ",es," ",x.queue>0?`| En cola: ${x.queue} | Tiempo: ~${n(x.queue*x.time)}`:""]}),s.jsx("p",{children:"Requisitos: 3 Almacenes Avanzados (solo para el primero)"}),x.queue>0&&s.jsxs("div",{children:[s.jsxs("p",{className:"time-info",children:["T/U: ",n(x.time)]}),s.jsx(L,{progress:x.progress,time:x.time})]}),s.jsxs("div",{className:"build-actions",children:[s.jsxs(U,{onClick:ns,disabled:e<k||o<M||C<3&&!a.quantumHoardUnit,tooltipText:v([{amount:k,current:e,text:"Chatarra"},{amount:M,current:o,text:"Metal Refinado"},{amount:3,current:C,text:"Almacenes Avanzados"}],t),className:`build-button ${e>=k&&o>=M&&(C>=3||a.quantumHoardUnit)?"unlocked":""}`,style:{backgroundColor:e>=k&&o>=M&&(C>=3||a.quantumHoardUnit)?"#D946EF":"#9CA3AF"},children:["Encargar Acopio Cuántico ",_>0&&`(${_})`]}),x.queue>0&&s.jsx(w,{itemName:"quantumHoardUnit",onCancel:$})]}),C<3&&!a.quantumHoardUnit&&s.jsx("p",{className:"requirement-warning",children:"⚠️ Necesitas 3 Almacenes Avanzados"})]}),s.jsx("img",{src:qs,alt:"Unidad de Acopio Cuántico",className:"storage-item-image"})]}),s.jsx("h3",{style:{borderBottom:"2px solid #06B6D4",paddingBottom:"0.5rem",marginTop:"3rem"},children:"Almacenamiento de Energía"}),s.jsxs("div",{className:`storage-item ${e>=P?"unlocked":""}`,children:[s.jsxs("div",{className:"storage-item-content",children:[s.jsx("h3",{style:{color:"#06B6D4"},children:"Batería de Iones de Litio"}),s.jsxs("p",{children:["Capacidad: +",i(50,t)," energía máxima"]}),s.jsxs("p",{children:["Coste: ",i(P,t)," chatarra"]}),s.jsxs("p",{children:["Construidos: ",f," ",p.queue>0?`| En cola: ${p.queue} | Tiempo: ~${n(p.queue*p.time)}`:""]}),p.queue>0&&s.jsxs("div",{children:[s.jsxs("p",{className:"time-info",children:["T/U: ",n(p.time)]}),s.jsx(L,{progress:p.progress,time:p.time})]}),s.jsxs("div",{className:"build-actions",children:[s.jsxs(U,{onClick:os,disabled:e<P,tooltipText:v([{amount:P,current:e,text:"Chatarra"}],t),className:`build-button ${e>=P?"unlocked":""}`,children:["Encargar Batería ",F>0&&`(${F})`]}),p.queue>0&&s.jsx(w,{itemName:"lithiumIonBattery",onCancel:$})]})]}),s.jsx("img",{src:fs,alt:"Batería de Iones de Litio",className:"storage-item-image"})]}),s.jsxs("div",{className:`storage-item ${e>=z&&(f>=5||a.plasmaAccumulator)?"unlocked":""} ${f>=5||a.plasmaAccumulator?"":"locked"}`,children:[s.jsxs("div",{className:"storage-item-content",children:[s.jsx("h3",{style:{color:"#06B6D4"},children:"Acumulador de Plasma"}),s.jsxs("p",{children:["Capacidad: +",i(250,t)," energía máxima"]}),s.jsxs("p",{children:["Coste: ",i(z,t)," chatarra"]}),s.jsxs("p",{children:["Construidos: ",q," ",j.queue>0?`| En cola: ${j.queue} | Tiempo: ~${n(j.queue*j.time)}`:""]}),s.jsx("p",{children:"Requisitos: 5 Baterías de Iones de Litio (solo para el primero)"}),j.queue>0&&s.jsxs("div",{children:[s.jsxs("p",{className:"time-info",children:["T/U: ",n(j.time)]}),s.jsx(L,{progress:j.progress,time:j.time})]}),s.jsxs("div",{className:"build-actions",children:[s.jsxs(U,{onClick:rs,disabled:e<z||f<5&&!a.plasmaAccumulator,tooltipText:v([{amount:z,current:e,text:"Chatarra"},{amount:5,current:f,text:"Baterías de Iones de Litio"}],t),className:`build-button ${e>=z&&(f>=5||a.plasmaAccumulator)?"unlocked":""}`,children:["Encargar Acumulador ",S>0&&`(${S})`]}),j.queue>0&&s.jsx(w,{itemName:"plasmaAccumulator",onCancel:$})]}),f<5&&!a.plasmaAccumulator&&s.jsx("p",{className:"requirement-warning",children:"⚠️ Necesitas 5 Baterías de Iones de Litio"})]}),s.jsx("img",{src:$s,alt:"Acumulador de Plasma",className:"storage-item-image"})]}),s.jsxs("div",{className:`storage-item ${e>=T&&o>=R&&(q>=3||a.harmonicContainmentField)?"unlocked":""} ${q>=3||a.harmonicContainmentField?"":"locked"}`,children:[s.jsxs("div",{className:"storage-item-content",children:[s.jsx("h3",{style:{color:"#D946EF"},children:"Campo de Contención Armónico"}),s.jsxs("p",{children:["Capacidad: +",i(1200,t)," energía máxima"]}),s.jsxs("p",{children:["Coste: ",i(T,t)," chatarra y ",i(R,t)," metal refinado"]}),s.jsxs("p",{children:["Construidos: ",as," ",h.queue>0?`| En cola: ${h.queue} | Tiempo: ~${n(h.queue*h.time)}`:""]}),s.jsx("p",{children:"Requisitos: 3 Acumuladores de Plasma (solo para el primero)"}),h.queue>0&&s.jsxs("div",{children:[s.jsxs("p",{className:"time-info",children:["T/U: ",n(h.time)]}),s.jsx(L,{progress:h.progress,time:h.time})]}),s.jsxs("div",{className:"build-actions",children:[s.jsxs(U,{onClick:ls,disabled:e<T||o<R||q<3&&!a.harmonicContainmentField,tooltipText:v([{amount:T,current:e,text:"Chatarra"},{amount:R,current:o,text:"Metal Refinado"},{amount:3,current:q,text:"Acumuladores de Plasma"}],t),className:`build-button ${e>=T&&o>=R&&(q>=3||a.harmonicContainmentField)?"unlocked":""}`,style:{backgroundColor:e>=T&&o>=R&&(q>=3||a.harmonicContainmentField)?"#D946EF":"#9CA3AF"},children:["Encargar Campo de Contención ",ss>0&&`(${ss})`]}),h.queue>0&&s.jsx(w,{itemName:"harmonicContainmentField",onCancel:$})]}),q<3&&!a.harmonicContainmentField&&s.jsx("p",{className:"requirement-warning",children:"⚠️ Necesitas 3 Acumuladores de Plasma"})]}),s.jsx("img",{src:vs,alt:"Campo de Contención Armónico",className:"storage-item-image"})]})]})})});export{Rs as default};
