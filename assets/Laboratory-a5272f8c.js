import{r as ke,l as xt,e as wt,h as Pt,R as St,j as _,f as ut}from"./index-e148e5e3.js";import{u as _t}from"./useDragToScroll-42de5d67.js";var dt={exports:{}},Ke={exports:{}},Ze,st;function Et(){if(st)return Ze;st=1;var r="SECRET_DO_NOT_PASS_THIS_OR_YOU_WILL_BE_FIRED";return Ze=r,Ze}var et,ct;function Ot(){if(ct)return et;ct=1;var r=Et();function De(){}function pe(){}return pe.resetWarningCache=De,et=function(){function T(ve,A,we,m,a,d){if(d!==r){var v=new Error("Calling PropTypes validators directly is not supported by the `prop-types` package. Use PropTypes.checkPropTypes() to call them. Read more at http://fb.me/use-check-prop-types");throw v.name="Invariant Violation",v}}T.isRequired=T;function I(){return T}var ae={array:T,bigint:T,bool:T,func:T,number:T,object:T,string:T,symbol:T,any:T,arrayOf:I,element:T,elementType:T,instanceOf:I,node:T,objectOf:I,oneOf:I,oneOfType:I,shape:I,exact:I,checkPropTypes:pe,resetWarningCache:De};return ae.PropTypes=ae,ae},et}var lt;function Rt(){return lt||(lt=1,Ke.exports=Ot()()),Ke.exports}(function(r,De){(function(T,I){r.exports=I(ke,xt,Rt())})(wt,function(pe,T,I){return function(){var ae={"./src/Xarrow/utils/buzzier.js":function(m,a,d){d.r(a),d.d(a,{bzFunction:function(){return v},buzzierMinSols:function(){return n}});var v=function(o,y,b,t){return function(i){return Math.pow(1-i,3)*o+3*Math.pow(1-i,2)*i*y+3*(1-i)*Math.pow(i,2)*b+Math.pow(i,3)*t}},n=function(o,y,b,t){var i=v(o,y,b,t),h=-6*o+12*y-6*b,u=Math.pow(-6*o+12*y-6*b,2)-4*(3*y-3*o)*(-3*o+9*y-9*b+3*t),w=2*(-3*o+9*y-9*b+3*t),P=i((h+Math.sqrt(u))/w),s=i((h-Math.sqrt(u))/w);return[P,s]}},"./src/Xarrow/Xarrow.tsx":function(m,a,d){var v=this&&this.__assign||function(){return v=Object.assign||function(s){for(var p,S=1,j=arguments.length;S<j;S++){p=arguments[S];for(var D in p)Object.prototype.hasOwnProperty.call(p,D)&&(s[D]=p[D])}return s},v.apply(this,arguments)},n=this&&this.__createBinding||(Object.create?function(s,p,S,j){j===void 0&&(j=S),Object.defineProperty(s,j,{enumerable:!0,get:function(){return p[S]}})}:function(s,p,S,j){j===void 0&&(j=S),s[j]=p[S]}),E=this&&this.__setModuleDefault||(Object.create?function(s,p){Object.defineProperty(s,"default",{enumerable:!0,value:p})}:function(s,p){s.default=p}),o=this&&this.__importStar||function(s){if(s&&s.__esModule)return s;var p={};if(s!=null)for(var S in s)S!=="default"&&Object.prototype.hasOwnProperty.call(s,S)&&n(p,s,S);return E(p,s),p},y=this&&this.__spreadArray||function(s,p){for(var S=0,j=p.length,D=s.length;S<j;S++,D++)s[D]=p[S];return s},b=this&&this.__importDefault||function(s){return s&&s.__esModule?s:{default:s}};Object.defineProperty(a,"__esModule",{value:!0});var t=o(d("react")),i=b(d("./src/Xarrow/useXarrowProps.ts")),h=d("./src/Xwrapper.tsx"),u=b(d("./src/Xarrow/propTypes.ts")),w=d("./src/Xarrow/utils/GetPosition.tsx"),P=function(s){var p,S=t.useRef({svgRef:t.useRef(null),lineRef:t.useRef(null),headRef:t.useRef(null),tailRef:t.useRef(null),lineDrawAnimRef:t.useRef(null),lineDashAnimRef:t.useRef(null),headOpacityAnimRef:t.useRef(null)}),j=S.current,D=j.svgRef,V=j.lineRef,ne=j.headRef;j.tailRef;var M=j.lineDrawAnimRef,oe=j.lineDashAnimRef,ie=j.headOpacityAnimRef;t.useContext(h.XarrowContext);var G=i.default(s,S.current),C=G[0],B=C.labels,je=C.lineColor,Te=C.headColor,Ee=C.tailColor,Me=C.strokeWidth,Be=C.showHead,qe=C.showTail,U=C.dashness,e=C.headShape,c=C.tailShape,f=C.showXarrow,g=C.animateDrawing,q=C.zIndex,x=C.passProps,R=C.arrowBodyProps,Oe=C.arrowHeadProps,Xe=C.arrowTailProps,Ae=C.SVGcanvasProps,se=C.divContainerProps,Re=C.divContainerStyle,K=C.SVGcanvasStyle,N=C._debug,W=C.shouldUpdatePosition;g=s.animateDrawing;var H=t.useState(!g),ze=H[0],Ne=H[1],He=t.useState({}),$e=He[1],Fe=function(){return $e({})},X=t.useState({cx0:0,cy0:0,cw:0,ch:0,x1:0,y1:0,x2:0,y2:0,dx:0,dy:0,absDx:0,absDy:0,cpx1:0,cpy1:0,cpx2:0,cpy2:0,headOrient:0,tailOrient:0,arrowHeadOffset:{x:0,y:0},arrowTailOffset:{x:0,y:0},headOffset:0,excRight:0,excLeft:0,excUp:0,excDown:0,startPoints:[],endPoints:[],mainDivPos:{x:0,y:0},xSign:1,ySign:1,lineLength:0,fHeadSize:1,fTailSize:1,arrowPath:"",labelStartPos:{x:0,y:0},labelMiddlePos:{x:0,y:0},labelEndPos:{x:0,y:0}}),l=X[0],O=X[1];t.useLayoutEffect(function(){if(W.current){var Q=w.getPosition(G,S);O(Q),W.current=!1}});var L=l.x2-l.arrowHeadOffset.x,Ve=l.y2-l.arrowHeadOffset.y,me=l.x1-l.arrowTailOffset.x,Pe=l.y1-l.arrowTailOffset.y,$=U.strokeLen+U.nonStrokeLen,F=1;U.animation<0&&(U.animation*=-1,F=-1);var Ce,he,Se,ce,ye=0;return g&&ze==!1?(typeof g=="boolean"&&(g=1),he=g+"s",Ce=l.lineLength,ce=l.lineLength,Se=1,g<0&&(p=[ye,ce],ce=p[0],ye=p[1],he=g*-1+"s")):(Ce=U.strokeLen+" "+U.nonStrokeLen,he=1/U.animation+"s",ce=$*F,Se="indefinite",ye=0),t.useLayoutEffect(function(){V.current&&O(function(Q){var z,Le;return v(v({},Q),{lineLength:(Le=(z=V.current)===null||z===void 0?void 0:z.getTotalLength())!==null&&Le!==void 0?Le:0})})},[V.current]),t.useEffect(function(){var Q=function(){window.addEventListener("resize",Fe);var Le=function(){var _e,k;Ne(!0),(_e=ie.current)===null||_e===void 0||_e.beginElement(),(k=oe.current)===null||k===void 0||k.beginElement()},le=function(){return ne.current.style.opacity="0"};return M.current&&ne.current&&(M.current.addEventListener("endEvent",Le),M.current.addEventListener("beginEvent",le)),function(){window.removeEventListener("resize",Fe),M.current&&(M.current.removeEventListener("endEvent",Le),ne.current&&M.current.removeEventListener("beginEvent",le))}},z=Q();return function(){Ne(!1),z()}},[f]),t.default.createElement("div",v({},se,{style:v({position:"absolute",zIndex:q},Re)}),f?t.default.createElement(t.default.Fragment,null,t.default.createElement("svg",v({ref:D,width:l.cw,height:l.ch,style:v({position:"absolute",left:l.cx0,top:l.cy0,pointerEvents:"none",border:N?"1px dashed yellow":null},K),overflow:"auto"},Ae),t.default.createElement("path",v({ref:V,d:l.arrowPath,stroke:je,strokeDasharray:Ce,strokeWidth:Me,fill:"transparent",pointerEvents:"visibleStroke"},x,R),t.default.createElement(t.default.Fragment,null,ze?t.default.createElement(t.default.Fragment,null,U.animation?t.default.createElement("animate",{ref:oe,attributeName:"stroke-dashoffset",values:$*F+";0",dur:1/U.animation+"s",repeatCount:"indefinite"}):null):t.default.createElement(t.default.Fragment,null,g?t.default.createElement("animate",{ref:M,id:"svgEndAnimate",attributeName:"stroke-dashoffset",values:ce+";"+ye,dur:he,repeatCount:Se}):null))),qe?t.default.createElement("g",v({fill:Ee,pointerEvents:"auto",transform:"translate("+me+","+Pe+") rotate("+l.tailOrient+") scale("+l.fTailSize+")"},x,Xe),c.svgElem):null,Be?t.default.createElement("g",v({ref:ne,fill:Te,pointerEvents:"auto",transform:"translate("+L+","+Ve+") rotate("+l.headOrient+") scale("+l.fHeadSize+")",opacity:g&&!ze?0:1},x,Oe),t.default.createElement("animate",{ref:ie,dur:"0.4",attributeName:"opacity",from:"0",to:"1",begin:"indefinite",repeatCount:"0",fill:"freeze"}),e.svgElem):null,N?t.default.createElement(t.default.Fragment,null,t.default.createElement("circle",{r:"5",cx:l.cpx1,cy:l.cpy1,fill:"green"}),t.default.createElement("circle",{r:"5",cx:l.cpx2,cy:l.cpy2,fill:"blue"}),t.default.createElement("rect",{x:l.excLeft,y:l.excUp,width:l.absDx,height:l.absDy,fill:"none",stroke:"pink",strokeWidth:"2px"})):null),B.start?t.default.createElement("div",{style:{transform:l.dx<0?"translate(-100% , -50%)":"translate(-0% , -50%)",width:"max-content",position:"absolute",left:l.cx0+l.labelStartPos.x,top:l.cy0+l.labelStartPos.y-Me-5}},B.start):null,B.middle?t.default.createElement("div",{style:{display:"table",width:"max-content",transform:"translate(-50% , -50%)",position:"absolute",left:l.cx0+l.labelMiddlePos.x,top:l.cy0+l.labelMiddlePos.y}},B.middle):null,B.end?t.default.createElement("div",{style:{transform:l.dx>0?"translate(-100% , -50%)":"translate(-0% , -50%)",width:"max-content",position:"absolute",left:l.cx0+l.labelEndPos.x,top:l.cy0+l.labelEndPos.y+Me+5}},B.end):null,N?t.default.createElement(t.default.Fragment,null,y(y([],l.startPoints),l.endPoints).map(function(Q,z){return t.default.createElement("div",{key:z,style:{background:"gray",opacity:.5,borderRadius:"50%",transform:"translate(-50%, -50%)",height:5,width:5,position:"absolute",left:Q.x-l.mainDivPos.x,top:Q.y-l.mainDivPos.y}})})):null):null)};P.propTypes=u.default,a.default=P},"./src/Xarrow/anchors.ts":function(m,a,d){m=d.nmd(m),Object.defineProperty(a,"__esModule",{value:!0}),a.calcAnchors=void 0;var v=function(E,o){return{middle:{x:E*.5,y:o*.5},left:{x:0,y:o*.5},right:{x:E,y:o*.5},top:{x:E*.5,y:0},bottom:{x:E*.5,y:o}}},n=function(E,o){return E.map(function(y){var b=v(o.right-o.x,o.bottom-o.y),t=b[y.position],i=t.x,h=t.y;return{x:o.x+i+y.offset.x,y:o.y+h+y.offset.y,anchor:y}})};a.calcAnchors=n,d.c[d.s]},"./src/Xarrow/propTypes.ts":function(m,a,d){var v=this&&this.__importDefault||function(S){return S&&S.__esModule?S:{default:S}};Object.defineProperty(a,"__esModule",{value:!0});var n=v(d("prop-types")),E=d("./src/constants.tsx"),o=n.default.oneOf(E.cAnchorEdge),y=n.default.exact({position:o.isRequired,offset:n.default.exact({x:n.default.number,y:n.default.number}).isRequired}),b=n.default.oneOfType([o,y]),t=n.default.oneOfType([b,n.default.arrayOf(b)]),i=n.default.oneOfType([n.default.string,n.default.exact({current:n.default.any})]),h=n.default.oneOfType([n.default.element,n.default.string]),u=n.default.exact({start:h,middle:h,end:h}),w=n.default.oneOf(Object.keys(E.arrowShapes)),P=n.default.any,s=n.default.oneOfType([w,n.default.exact({svgElem:P,offsetForward:n.default.number}).isRequired]),p={start:i.isRequired,end:i.isRequired,startAnchor:t,endAnchor:t,labels:n.default.oneOfType([h,u]),color:n.default.string,lineColor:n.default.string,showHead:n.default.bool,headColor:n.default.string,headSize:n.default.number,tailSize:n.default.number,tailColor:n.default.string,strokeWidth:n.default.number,showTail:n.default.bool,path:n.default.oneOf(E.cPaths),showXarrow:n.default.bool,curveness:n.default.number,gridBreak:n.default.string,dashness:n.default.oneOfType([n.default.bool,n.default.object]),headShape:s,tailShape:s,animateDrawing:n.default.oneOfType([n.default.bool,n.default.number]),zIndex:n.default.number,passProps:n.default.object,arrowBodyProps:n.default.object,arrowHeadProps:n.default.object,arrowTailProps:n.default.object,SVGcanvasProps:n.default.object,divContainerProps:n.default.object,_extendSVGcanvas:n.default.number,_debug:n.default.bool,_cpx1Offset:n.default.number,_cpy1Offset:n.default.number,_cpx2Offset:n.default.number,_cpy2Offset:n.default.number};a.default=p},"./src/Xarrow/useXarrowProps.ts":function(m,a,d){var v=this&&this.__assign||function(){return v=Object.assign||function(e){for(var c,f=1,g=arguments.length;f<g;f++){c=arguments[f];for(var q in c)Object.prototype.hasOwnProperty.call(c,q)&&(e[q]=c[q])}return e},v.apply(this,arguments)},n=this&&this.__createBinding||(Object.create?function(e,c,f,g){g===void 0&&(g=f),Object.defineProperty(e,g,{enumerable:!0,get:function(){return c[f]}})}:function(e,c,f,g){g===void 0&&(g=f),e[g]=c[f]}),E=this&&this.__setModuleDefault||(Object.create?function(e,c){Object.defineProperty(e,"default",{enumerable:!0,value:c})}:function(e,c){e.default=c}),o=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var c={};if(e!=null)for(var f in e)f!=="default"&&Object.prototype.hasOwnProperty.call(e,f)&&n(c,e,f);return E(c,e),c},y=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(a,"__esModule",{value:!0});var b=o(d("react")),t=d("./src/Xarrow/utils/index.ts"),i=y(d("lodash")),h=d("./src/constants.tsx"),u=function(e){var c={start:null,middle:null,end:null};if(e)if(typeof e=="string"||b.default.isValidElement(e))c.middle=e;else for(var f in e)c[f]=e[f];return c},w=function(e){var c=Array.isArray(e)?e:[e],f=c.map(function(x){return typeof x=="string"?{position:x}:x});f=f.filter(function(x){return h.cAnchorEdge.includes(x.position)}),f.length==0&&(f=[{position:"auto"}]);var g=f.filter(function(x){return x.position==="auto"});g.length>0&&(f=f.filter(function(x){return x.position!=="auto"}),f.push.apply(f,g.flatMap(function(x){return["left","right","top","bottom"].map(function(R){return v(v({},x),{position:R})})})));var q=f.map(function(x){if(typeof x=="object"){var R=x;return R.position||(R.position="auto"),R.offset||(R.offset={x:0,y:0}),R.offset.y||(R.offset.y=0),R.offset.x||(R.offset.x=0),R=R,R}else return x});return q},P=function(e,c){var f=0,g=0,q,x=1;return typeof e=="object"?(f=e.strokeLen||c.strokeWidth*2,g=e.strokeLen?e.nonStrokeLen:c.strokeWidth,q=e.animation?e.animation:null):typeof e=="boolean"&&e&&(f=c.strokeWidth*2,g=c.strokeWidth,q=null),{strokeLen:f,nonStrokeLen:g,animation:q,animDirection:x}},s=function(e){return typeof e=="string"&&(e in h.arrowShapes?e=h.arrowShapes[e]:(console.warn("'"+e+"' is not supported arrow shape. the supported arrow shapes is one of "+h.cArrowShapes+`.
           reverting to default shape.`),e=h.arrowShapes.arrow1)),e=e,(e==null?void 0:e.offsetForward)===void 0&&(e.offsetForward=.25),(e==null?void 0:e.svgElem)===void 0&&(e.svgElem="path"),e},p=function(e){var c=t.xStr2absRelative(e);return c||(c={relative:.5,abs:0}),c},S=function(e,c){return c&&(c.current=!0),e},j=function(e){return e},D=function(e,c,f){return S(e,f)},V=function(e,c,f){return S(Number(e),f)},ne=function(e){return Number(e)},M={start:function(e){return t.getElementByPropGiven(e)},end:function(e){return t.getElementByPropGiven(e)},startAnchor:function(e,c,f){return S(w(e),f)},endAnchor:function(e,c,f){return S(w(e),f)},labels:function(e){return u(e)},color:j,lineColor:function(e,c){return e||c.color},headColor:function(e,c){return e||c.color},tailColor:function(e,c){return e||c.color},strokeWidth:V,showHead:D,headSize:V,showTail:D,tailSize:V,path:D,curveness:V,gridBreak:function(e,c,f){return S(p(e),f)},dashness:function(e,c){return P(e,c)},headShape:function(e){return s(e)},tailShape:function(e){return s(e)},showXarrow:j,animateDrawing:j,zIndex:ne,passProps:j,arrowBodyProps:D,arrowHeadProps:D,arrowTailProps:D,SVGcanvasProps:D,divContainerProps:D,divContainerStyle:D,SVGcanvasStyle:D,_extendSVGcanvas:D,_debug:D,_cpx1Offset:D,_cpy1Offset:D,_cpx2Offset:D,_cpy2Offset:D},oe={};for(var ie in M)oe[ie]=[ie];for(var G=0,C=["lineColor","headColor","tailColor"];G<C.length;G++){var ie=C[G];oe[ie].push("color")}var B=function(e,c){for(var f,g=0,q=Object.entries(e);g<q.length;g++){var x=q[g],R=x[0],Oe=x[1];c[R]=(f=M==null?void 0:M[R])===null||f===void 0?void 0:f.call(M,Oe,c)}return c},je={start:null,end:null,startAnchor:"auto",endAnchor:"auto",labels:null,color:"CornflowerBlue",lineColor:null,headColor:null,tailColor:null,strokeWidth:4,showHead:!0,headSize:6,showTail:!1,tailSize:6,path:"smooth",curveness:.8,gridBreak:"50%",dashness:!1,headShape:"arrow1",tailShape:"arrow1",showXarrow:!0,animateDrawing:!1,zIndex:0,passProps:{},arrowBodyProps:{},arrowHeadProps:{},arrowTailProps:{},SVGcanvasProps:{},divContainerProps:{},divContainerStyle:{},SVGcanvasStyle:{},_extendSVGcanvas:0,_debug:!1,_cpx1Offset:0,_cpy1Offset:0,_cpx2Offset:0,_cpy2Offset:0},Te={};Te=B(je,Te);var Ee={startPos:{x:0,y:0,right:0,bottom:0},endPos:{x:0,y:0,right:0,bottom:0}};function Me(e,c){return i.default.isEqual(e,c)}function Be(e){var c=b.useRef();return Me(e,c.current)||(c.current=e),c.current}function qe(e,c){b.useLayoutEffect(e,c.map(Be))}var U=function(e,c){var f=b.useState(Te),g=f[0],q=f[1],x=b.useRef(!1);g.shouldUpdatePosition=x;var R=v(v({},je),e),Oe=function(W){b.useLayoutEffect(function(){var H;g[W]=(H=M==null?void 0:M[W])===null||H===void 0?void 0:H.call(M,R[W],g,x),q(v({},g))},oe[W].map(function(H){return e[H]}))};for(var Xe in je)Oe(Xe);var Ae=b.useState(Ee),se=Ae[0],Re=Ae[1],K=t.getElemPos(g.start);qe(function(){se.startPos=K,x.current=!0,Re(v({},se))},[K]);var N=t.getElemPos(g.end);return qe(function(){se.endPos=N,x.current=!0,Re(v({},se))},[N]),b.useLayoutEffect(function(){x.current=!0,Re(v({},se))},[g.headShape.svgElem,g.tailShape.svgElem]),[g,se]};a.default=U},"./src/Xarrow/utils/GetPosition.tsx":function(m,a,d){var v=this&&this.__importDefault||function(i){return i&&i.__esModule?i:{default:i}};Object.defineProperty(a,"__esModule",{value:!0}),a.getPosition=void 0;var n=d("./src/Xarrow/anchors.ts"),E=d("./src/Xarrow/utils/index.ts"),o=v(d("lodash")),y=d("./src/constants.tsx"),b=d("./src/Xarrow/utils/buzzier.js"),t=function(i,h){var u,w,P,s,p=i[0],S=i[1],j=p.startAnchor,D=p.endAnchor,V=p.strokeWidth,ne=p.showHead,M=p.headSize,oe=p.showTail,ie=p.tailSize,G=p.path,C=p.curveness,B=p.gridBreak,je=p.headShape,Te=p.tailShape,Ee=p._extendSVGcanvas,Me=p._cpx1Offset,Be=p._cpy1Offset,qe=p._cpx2Offset,U=p._cpy2Offset,e=S.startPos,c=S.endPos,f=h.current,g=f.svgRef,q=f.lineRef,x=0,R=0,Oe=n.calcAnchors(j,e),Xe=n.calcAnchors(D,c),Ae=E.getShortestLine(Oe,Xe),se=Ae.chosenStart,Re=Ae.chosenEnd,K=se.anchor.position,N=Re.anchor.position,W=o.default.pick(se,["x","y"]),H=o.default.pick(Re,["x","y"]),ze=E.getSvgPos(g),Ne=Math.min(W.x,H.x)-ze.x,He=Math.min(W.y,H.y)-ze.y,$e=H.x-W.x,Fe=H.y-W.y,X=Math.abs(H.x-W.x),l=Math.abs(H.y-W.y),O=$e>0?1:-1,L=Fe>0?1:-1,Ve=[je.offsetForward,Te.offsetForward],me=Ve[0],Pe=Ve[1],$=M*V,F=ie*V,Ce=0,he=0,Se=0,ce=0,ye=$*me,Q=F*Pe,z=Number(C);y.cPaths.includes(G)||(G="smooth"),G==="straight"&&(z=0,G="smooth");var Le=M>ie?M:ie,le=V+V*Le/2,_e=le,k=le,be=le,Ie=le;k+=Number(Ee),_e+=Number(Ee),be+=Number(Ee),Ie+=Number(Ee);var ue=0,Z=X,de=0,ee=l;if($e<0&&(u=[Z,ue],ue=u[0],Z=u[1]),Fe<0&&(w=[ee,de],de=w[0],ee=w[1]),z===0){var ge=Math.atan(l/X);ne&&(Z-=$*(1-me)*O*Math.cos(ge),ee-=$*(1-me)*L*Math.sin(ge),ge*=L,O<0&&(ge=(Math.PI-ge*O)*O),Ce=Math.cos(ge)*ye-Math.sin(ge)*$/2,he=Math.cos(ge)*$/2+Math.sin(ge)*ye,x=ge*180/Math.PI);var xe=Math.atan(l/X);oe&&(ue+=F*(1-Pe)*O*Math.cos(xe),de+=F*(1-Pe)*L*Math.sin(xe),xe*=-L,O>0&&(xe=(Math.PI-xe*O)*O),Se=Math.cos(xe)*Q-Math.sin(xe)*F/2,ce=Math.cos(xe)*F/2+Math.sin(xe)*Q,R=xe*180/Math.PI)}else N==="middle"&&(X>l?N=O?"left":"right":N=L?"top":"bottom"),ne&&(["left","right"].includes(N)?(Ce+=ye*O,Z-=$*(1-me)*O,he+=$*O/2,N==="left"?(x=0,O<0&&(x+=180)):(x=180,O>0&&(x+=180))):["top","bottom"].includes(N)&&(Ce+=$*-L/2,he+=ye*L,ee-=$*L-he,N==="top"?(x=270,L>0&&(x+=180)):(x=90,L<0&&(x+=180))));oe&&z!==0&&(["left","right"].includes(K)?(Se+=Q*-O,ue+=F*O+Se,ce+=-(F*O)/2,K==="left"?(R=180,O<0&&(R+=180)):(R=0,O>0&&(R+=180))):["top","bottom"].includes(K)&&(ce+=Q*-L,de+=F*L+ce,Se+=F*L/2,K==="top"?(R=90,L>0&&(R+=180)):(R=270,L<0&&(R+=180))));var pt={x:Ce,y:he},vt={x:Se,y:ce},Y=ue,J=de,te=Z,re=ee,Ue={};G==="smooth"?Ue={hh:function(){Y+=X*z*O,te-=X*z*O},vv:function(){J+=l*z*L,re-=l*z*L},hv:function(){Y+=X*z*O,re-=l*z*L},vh:function(){J+=l*z*L,te-=X*z*O}}:G==="grid"&&(Ue={hh:function(){Y+=(X*B.relative+B.abs)*O,te-=(X*(1-B.relative)-B.abs)*O,ne&&(Y-=$*(1-me)/2*O,te+=$*(1-me)/2*O),oe&&(Y-=F*(1-Pe)/2*O,te+=F*(1-Pe)/2*O)},vv:function(){J+=(l*B.relative+B.abs)*L,re-=(l*(1-B.relative)-B.abs)*L,ne&&(J-=$*(1-me)/2*L,re+=$*(1-me)/2*L),oe&&(J-=F*(1-Pe)/2*L,re+=F*(1-Pe)/2*L)},hv:function(){Y=Z},vh:function(){J=ee}});var fe="";["left","right"].includes(K)?fe+="h":["bottom","top"].includes(K)?fe+="v":K==="middle"&&(fe+="m"),["left","right"].includes(N)?fe+="h":["bottom","top"].includes(N)?fe+="v":N==="middle"&&(fe+="m"),X>l?fe=fe.replace(/m/g,"h"):fe=fe.replace(/m/g,"v"),Ue[fe](),Y+=Me,J+=Be,te+=qe,re+=U;var tt=b.buzzierMinSols(ue,Y,te,Z),rt=tt[0],at=tt[1],nt=b.buzzierMinSols(de,J,re,ee),ot=nt[0],it=nt[1];rt<0&&(k+=-rt),at>X&&(_e+=at-X),ot<0&&(be+=-ot),it>l&&(Ie+=it-l),G==="grid"&&(k+=le,_e+=le,be+=le,Ie+=le),ue+=k,Z+=k,de+=be,ee+=be,Y+=k,te+=k,J+=be,re+=be;var mt=X+k+_e,ht=l+be+Ie;Ne-=k,He-=be;var Qe=b.bzFunction(ue,Y,te,Z),Ye=b.bzFunction(de,J,re,ee),yt={x:Qe(.01),y:Ye(.01)},bt={x:Qe(.5),y:Ye(.5)},gt={x:Qe(.99),y:Ye(.99)},Je;return G==="grid"?Je="M "+ue+" "+de+" L  "+Y+" "+J+" L "+te+" "+re+" "+Z+" "+ee:G==="smooth"&&(Je="M "+ue+" "+de+" C "+Y+" "+J+", "+te+" "+re+", "+Z+" "+ee),{cx0:Ne,cy0:He,x1:ue,x2:Z,y1:de,y2:ee,cw:mt,ch:ht,cpx1:Y,cpy1:J,cpx2:te,cpy2:re,dx:$e,dy:Fe,absDx:X,absDy:l,headOrient:x,tailOrient:R,labelStartPos:yt,labelMiddlePos:bt,labelEndPos:gt,excLeft:k,excRight:_e,excUp:be,excDown:Ie,headOffset:ye,arrowHeadOffset:pt,arrowTailOffset:vt,startPoints:Oe,endPoints:Xe,mainDivPos:ze,xSign:O,ySign:L,lineLength:(s=(P=q.current)===null||P===void 0?void 0:P.getTotalLength())!==null&&s!==void 0?s:0,fHeadSize:$,fTailSize:F,arrowPath:Je}};a.getPosition=t},"./src/Xarrow/utils/index.ts":function(m,a){Object.defineProperty(a,"__esModule",{value:!0}),a.getSvgPos=a.getElemPos=a.getShortestLine=a.xStr2absRelative=a.factorDpathStr=a.getElementByPropGiven=void 0;var d=function(t){var i;return typeof t=="string"?i=document.getElementById(t):i=t==null?void 0:t.current,i};a.getElementByPropGiven=d;var v=function(t,i){var h=t.split(/(\d+(?:\.\d+)?)/);return h=h.map(function(u){return Number(u)?(Number(u)*i).toString():u}),h.join("")};a.factorDpathStr=v;var n=function(t){if(typeof t!="string")return{abs:0,relative:.5};var i=t.split("%"),h=0,u=0;if(i.length==1){var w=parseFloat(i[0]);if(!isNaN(w))return h=w,{abs:h,relative:0}}else if(i.length==2){var P=[parseFloat(i[0]),parseFloat(i[1])],s=P[0],p=P[1];if(isNaN(s)||(u=s/100),isNaN(p)||(h=p),!isNaN(s)||!isNaN(p))return{abs:h,relative:u}}};a.xStr2absRelative=n;var E=function(t,i){return Math.sqrt(Math.pow(t.x-i.x,2)+Math.pow(t.y-i.y,2))},o=function(t,i){var h=1/0,u=1/0,w;return t.forEach(function(P){i.forEach(function(s){u=E(P,s),u<h&&(h=u,w={chosenStart:P,chosenEnd:s})})}),w};a.getShortestLine=o;var y=function(t){if(!t)return{x:0,y:0,right:0,bottom:0};var i=t.getBoundingClientRect();return{x:i.left,y:i.top,right:i.right,bottom:i.bottom}};a.getElemPos=y;var b=function(t){if(!t.current)return{x:0,y:0};var i=t.current.getBoundingClientRect(),h=i.left,u=i.top,w=getComputedStyle(t.current),P=Number(w.left.slice(0,-2)),s=Number(w.top.slice(0,-2));return{x:h-P,y:u-s}};a.getSvgPos=b},"./src/Xwrapper.tsx":function(m,a,d){var v=this&&this.__createBinding||(Object.create?function(u,w,P,s){s===void 0&&(s=P),Object.defineProperty(u,s,{enumerable:!0,get:function(){return w[P]}})}:function(u,w,P,s){s===void 0&&(s=P),u[s]=w[P]}),n=this&&this.__setModuleDefault||(Object.create?function(u,w){Object.defineProperty(u,"default",{enumerable:!0,value:w})}:function(u,w){u.default=w}),E=this&&this.__importStar||function(u){if(u&&u.__esModule)return u;var w={};if(u!=null)for(var P in u)P!=="default"&&Object.prototype.hasOwnProperty.call(u,P)&&v(w,u,P);return n(w,u),w};Object.defineProperty(a,"__esModule",{value:!0}),a.XarrowContext=a.XelemContext=void 0;var o=E(d("react"));a.XelemContext=o.default.createContext(null),a.XarrowContext=o.default.createContext(null);var y={},b=0,t=function(u){var w=u.children,P=u.instanceCount,s=o.useState({}),p=s[1],S=function(){return p({})};return o.useEffect(function(){P.current=b,y[P.current]=S},[]),o.default.createElement(a.XarrowContext.Provider,{value:S},w)},i=function(u){var w=u.children,P=u.instanceCount;return o.default.createElement(a.XelemContext.Provider,{value:y[P.current]},w)},h=function(u){var w=u.children,P=o.useRef(b),s=o.useState({}),p=s[1];return o.useEffect(function(){return b++,p({}),function(){delete y[P.current]}},[]),o.default.createElement(i,{instanceCount:P},o.default.createElement(t,{instanceCount:P},w))};a.default=h},"./src/constants.tsx":function(m,a,d){var v=this&&this.__importDefault||function(E){return E&&E.__esModule?E:{default:E}};Object.defineProperty(a,"__esModule",{value:!0}),a.cArrowShapes=a.arrowShapes=a.cSvgElems=a.cPaths=a.cAnchorEdge=void 0;var n=v(d("react"));a.cAnchorEdge=["middle","left","right","top","bottom","auto"],a.cPaths=["smooth","grid","straight"],a.cSvgElems=["circle","ellipse","line","path","polygon","polyline","rect"],a.arrowShapes={arrow1:{svgElem:n.default.createElement("path",{d:"M 0 0 L 1 0.5 L 0 1 L 0.25 0.5 z"}),offsetForward:.25},heart:{svgElem:n.default.createElement("path",{d:"M 0,0.25 A 0.125,0.125 0,0,1 0.5,0.25 A 0.125,0.125 0,0,1 1,0.25 Q 1,0.625 0.5,1 Q 0,0.625 0,0.25 z"}),offsetForward:.1},circle:{svgElem:n.default.createElement("circle",{r:.5,cx:.5,cy:.5}),offsetForward:0}},a.cArrowShapes=Object.keys(a.arrowShapes)},"./src/index.tsx":function(m,a,d){var v=this&&this.__createBinding||(Object.create?function(t,i,h,u){u===void 0&&(u=h),Object.defineProperty(t,u,{enumerable:!0,get:function(){return i[h]}})}:function(t,i,h,u){u===void 0&&(u=h),t[u]=i[h]}),n=this&&this.__exportStar||function(t,i){for(var h in t)h!=="default"&&!Object.prototype.hasOwnProperty.call(i,h)&&v(i,t,h)},E=this&&this.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(a,"__esModule",{value:!0}),a.useXarrow=a.Xwrapper=a.default=void 0;var o=d("./src/Xarrow/Xarrow.tsx");Object.defineProperty(a,"default",{enumerable:!0,get:function(){return E(o).default}}),n(d("./src/types.ts"),a),n(d("./src/constants.tsx"),a);var y=d("./src/Xwrapper.tsx");Object.defineProperty(a,"Xwrapper",{enumerable:!0,get:function(){return E(y).default}});var b=d("./src/useXarrow.tsx");Object.defineProperty(a,"useXarrow",{enumerable:!0,get:function(){return E(b).default}})},"./src/types.ts":function(m,a){Object.defineProperty(a,"__esModule",{value:!0})},"./src/useXarrow.tsx":function(m,a,d){Object.defineProperty(a,"__esModule",{value:!0});var v=d("react"),n=d("./src/Xwrapper.tsx"),E=function(){var o=v.useState({}),y=o[1],b=function(){return y({})},t=v.useContext(n.XelemContext);return t||(t=function(){}),v.useLayoutEffect(function(){t()}),b};a.default=E},lodash:function(m){m.exports=T},"prop-types":function(m){m.exports=I},react:function(m){m.exports=pe}},ve={};function A(m){var a=ve[m];if(a!==void 0)return a.exports;var d=ve[m]={id:m,loaded:!1,exports:{}};return ae[m].call(d.exports,d,d.exports,A),d.loaded=!0,d.exports}A.c=ve,function(){A.d=function(m,a){for(var d in a)A.o(a,d)&&!A.o(m,d)&&Object.defineProperty(m,d,{enumerable:!0,get:a[d]})}}(),function(){A.o=function(m,a){return Object.prototype.hasOwnProperty.call(m,a)}}(),function(){A.r=function(m){typeof Symbol<"u"&&Symbol.toStringTag&&Object.defineProperty(m,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(m,"__esModule",{value:!0})}}(),function(){A.nmd=function(m){return m.paths=[],m.children||(m.children=[]),m}}();var we=A(A.s="./src/index.tsx");return we}()})})(dt);var ft=dt.exports;const Ct=Pt(ft);const We={production:{name:"ProducciÃ³n",color:"#22C55E",gridRowStart:2},research:{name:"InvestigaciÃ³n",color:"#06B6D4",gridRowStart:6},foundry:{name:"FundiciÃ³n",color:"#F97316",gridRowStart:9},logistics:{name:"LogÃ­stica",color:"#F59E0B",gridRowStart:12}},Ge=[{id:"collectionEfficiency",branch:"production",tier:1,row:1,title:"RecolecciÃ³n Mejorada",description:"Aumenta la chatarra recolectada por los drones.",effect:r=>`+${r*10}% Prod. Chatarra`,cost:100,maxLevel:5,requirements:[]},{id:"droneAssembly",branch:"production",tier:2,row:1,title:"LÃ­nea de Ensamblaje",description:"Acelera la construcciÃ³n de todo tipo de drones.",effect:r=>`-${r*5}% Tiempo Constr.`,cost:150,maxLevel:5,requirements:["collectionEfficiency"]},{id:"droneScrapCost",branch:"production",tier:3,row:1,title:"GeometrÃ­a Optimizada",description:"Reduce el coste de chatarra de todos los drones.",effect:r=>`-${r*5}% Coste Chatarra`,cost:250,maxLevel:4,requirements:["droneAssembly"]},{id:"droneSelfRepair",branch:"production",tier:4,row:1,title:"AutÃ³matas de Auto-ReparaciÃ³n",description:"Otorga a los drones una probabilidad de sobrevivir a una expediciÃ³n fallida.",effect:r=>`${r*10}% Prob. Supervivencia`,cost:500,maxLevel:5,requirements:["droneScrapCost"]},{id:"reassignProtocols",branch:"production",tier:2,row:2,title:"Protocolos de ReasignaciÃ³n",description:"Desbloquea la capacidad de desmantelar drones.",effect:()=>"Desbloquea Desmantelamiento",cost:300,maxLevel:1,requirements:["collectionEfficiency"]},{id:"droneRetrofitting",branch:"production",tier:3,row:3,title:"Reacondicionamiento de Chasis",description:"Permite mejorar drones a un tier superior a un coste reducido.",effect:()=>"Desbloquea Reacondicionamiento",cost:400,maxLevel:1,requirements:["reassignProtocols"]},{id:"powerOptimization",branch:"production",tier:3,row:2,title:"OptimizaciÃ³n EnergÃ©tica",description:"Reduce el consumo de energÃ­a de los drones.",effect:r=>`-${r*5}% Consumo EnergÃ­a`,cost:120,maxLevel:5,requirements:["reassignProtocols"]},{id:"energyCalibration",branch:"production",tier:4,row:2,title:"CalibraciÃ³n de Componentes",description:"Acelera la construcciÃ³n de unidades de energÃ­a.",effect:r=>`-${r*5}% Tiempo Constr.`,cost:180,maxLevel:5,requirements:["powerOptimization"]},{id:"energyEfficiency",branch:"production",tier:5,row:2,title:"Eficiencia de Paneles",description:"Aumenta la producciÃ³n de los paneles solares.",effect:r=>`+${r*10}% Prod. Paneles`,cost:200,maxLevel:4,requirements:["energyCalibration"]},{id:"powerGrid",branch:"production",tier:6,row:2,title:"Red ElÃ©ctrica Mejorada",description:"Aumenta la producciÃ³n de todas las fuentes de energÃ­a.",effect:r=>`+${r*5}% Prod. Global`,cost:400,maxLevel:5,requirements:["energyEfficiency"]},{id:"coreEfficiency",branch:"production",tier:7,row:2,title:"Eficiencia de NÃºcleos",description:"Aumenta la producciÃ³n de los NÃºcleos EnergÃ©ticos.",effect:r=>`+${r*10}% Prod. NÃºcleos`,cost:800,maxLevel:3,requirements:["powerGrid"]},{id:"fusionTech",branch:"production",tier:8,row:2,title:"Reactores de FusiÃ³n",description:"Desbloquea el Reactor de FusiÃ³n.",effect:()=>"Desbloquea Reactor",cost:5e3,maxLevel:1,requirements:["coreEfficiency"]},{id:"poweredFabricators",branch:"production",tier:9,row:2,title:"Fabricadores Potenciados",description:"Si la energÃ­a estÃ¡ por encima del 90%, la construcciÃ³n y crafteo es un 10% mÃ¡s rÃ¡pida.",effect:r=>`+${r*10}% Velocidad (Bono)`,cost:2e3,maxLevel:3,requirements:["fusionTech"]},{id:"researchEfficiency",branch:"research",tier:1,row:1,title:"Protocolos de Datos",description:"Aumenta la generaciÃ³n base de RP.",effect:r=>`+${r*20}% RP Base`,cost:150,maxLevel:5,requirements:[]},{id:"advancedAnalysis",branch:"research",tier:2,row:1,title:"AnÃ¡lisis de Flota",description:"Los drones generan mÃ¡s RP.",effect:r=>`+${r*10}% RP por Dron`,cost:300,maxLevel:4,requirements:["researchEfficiency"]},{id:"reinforcedBasicDrones",branch:"research",tier:3,row:1,title:"Drones Reforzados I",description:"Desbloquea drones bÃ¡sicos reforzados.",effect:()=>"Desbloquea DBR-F",cost:250,maxLevel:1,requirements:["advancedAnalysis"]},{id:"reinforcedMediumDrones",branch:"research",tier:4,row:1,title:"Drones Reforzados II",description:"Desbloquea drones medios reforzados.",effect:()=>"Desbloquea DMR-F",cost:500,maxLevel:1,requirements:["reinforcedBasicDrones"]},{id:"reinforcedAdvancedDrones",branch:"research",tier:5,row:1,title:"Drones Reforzados III",description:"Desbloquea drones avanzados reforzados.",effect:()=>"Desbloquea DAR-F",cost:1e3,maxLevel:1,requirements:["reinforcedMediumDrones"]},{id:"golemChassis",branch:"research",tier:6,row:1,title:"Chasis Golem",description:"Desbloquea los poderosos Drones Golem.",effect:()=>"Desbloquea DG-1",cost:2500,maxLevel:1,requirements:["reinforcedAdvancedDrones"]},{id:"algorithmOptimization",branch:"research",tier:2,row:2,title:"Algoritmos Predictivos",description:"La energÃ­a sobrante genera mÃ¡s RP.",effect:r=>`+${r*15}% RP por EnergÃ­a Excedente`,cost:450,maxLevel:4,requirements:["advancedAnalysis"]},{id:"quantumComputing",branch:"research",tier:3,row:2,title:"ComputaciÃ³n CuÃ¡ntica",description:"Reduce el coste de todas las investigaciones.",effect:r=>`-${r*5}% Coste InvestigaciÃ³n`,cost:1500,maxLevel:3,requirements:["algorithmOptimization"]},{id:"constructionEfficiency",branch:"research",tier:4,row:2,title:"Eficiencia de ConstrucciÃ³n",description:"Reduce el tiempo de construcciÃ³n de todas las unidades.",effect:r=>`-${r*5}% Tiempo de ConstrucciÃ³n`,cost:600,maxLevel:5,requirements:["quantumComputing"]},{id:"swarmAI",branch:"research",tier:7,row:1,title:"IA de Enjambre",description:"Por cada 50 drones, +1% a la producciÃ³n global de chatarra (mÃ¡x 10%).",effect:r=>`Actualmente: +${r}%`,cost:5e3,maxLevel:10,requirements:["golemChassis"]},{id:"globalEfficiency",branch:"research",tier:8,row:1,title:"Eficiencia Global (Infinita)",description:"Aumenta permanentemente toda la producciÃ³n de chatarra.",effect:r=>`+${(r*.1).toFixed(1)}% Prod. Chatarra`,cost:1e4,maxLevel:1/0,requirements:["swarmAI"],isInfinite:!0},{id:"foundryProtocols",branch:"foundry",tier:1,row:1,title:"Protocolos de FundiciÃ³n",description:"Desbloquea la FundiciÃ³n.",effect:()=>"Desbloquea la FundiciÃ³n",cost:50,maxLevel:1,requirements:[]},{id:"metalSmeltingSpeed",branch:"foundry",tier:2,row:1,title:"FundiciÃ³n Eficiente",description:"Reduce el tiempo de crafteo del Metal Refinado.",effect:r=>`-${r*5}% Tiempo Crafteo`,cost:200,maxLevel:5,requirements:["foundryProtocols"]},{id:"smeltingEfficiency",branch:"foundry",tier:2,row:2,title:"Eficiencia de Costes I",description:"Reduce el coste de chatarra para crear Metal Refinado.",effect:r=>`-${r*5}% Coste Chatarra`,cost:400,maxLevel:4,requirements:["foundryProtocols"]},{id:"steelProductionSpeed",branch:"foundry",tier:3,row:1,title:"ProducciÃ³n de Acero",description:"Reduce el tiempo de crafteo del Acero Estructural.",effect:r=>`-${r*5}% Tiempo Crafteo`,cost:400,maxLevel:5,requirements:["metalSmeltingSpeed"]},{id:"foundryEnergy",branch:"foundry",tier:3,row:2,title:"Eficiencia de Costes II",description:"Reduce el coste de energÃ­a para crear Metal Refinado.",effect:r=>`-${r*5}% Coste EnergÃ­a`,cost:400,maxLevel:4,requirements:["smeltingEfficiency"]},{id:"hullPlateProduction",branch:"foundry",tier:4,row:1,title:"ProducciÃ³n de Placas",description:"Reduce el tiempo de crafteo de las Placas de Casco.",effect:r=>`-${r*5}% Tiempo Crafteo`,cost:600,maxLevel:5,requirements:["steelProductionSpeed"]},{id:"slagRecycling",branch:"foundry",tier:4,row:2,title:"Reciclaje de Escoria",description:"PequeÃ±a probabilidad de recuperar parte del coste de un crafteo.",effect:r=>`${r*2}% Prob. de RecuperaciÃ³n`,cost:700,maxLevel:5,requirements:["foundryEnergy"]},{id:"wiringProduction",branch:"foundry",tier:5,row:1,title:"Cableado Avanzado",description:"Reduce el tiempo de crafteo del Cableado Superconductor.",effect:r=>`-${r*5}% Tiempo Crafteo`,cost:800,maxLevel:5,requirements:["hullPlateProduction"]},{id:"lightweightAlloys",branch:"foundry",tier:5,row:2,title:"Aleaciones Ligeras",description:"Reduce el coste de metal de los drones reforzados.",effect:r=>`-${r*5}% Coste Metal Drones-F`,cost:1200,maxLevel:4,requirements:["slagRecycling"]},{id:"fuelRodProduction",branch:"foundry",tier:6,row:1,title:"SÃ­ntesis de Combustible",description:"Reduce el tiempo de crafteo de las Barras de Combustible.",effect:r=>`-${r*5}% Tiempo Crafteo`,cost:1e3,maxLevel:5,requirements:["wiringProduction"]},{id:"storageOptimization",branch:"logistics",tier:1,row:1,title:"LogÃ­stica Mejorada",description:"Aumenta la capacidad de almacenamiento de chatarra.",effect:r=>`+${r*15}% Cap. Chatarra`,cost:80,maxLevel:5,requirements:[]},{id:"storageConstruction",branch:"logistics",tier:2,row:1,title:"LogÃ­stica Eficiente",description:"Acelera la construcciÃ³n de unidades de almacenamiento.",effect:r=>`-${r*5}% Tiempo Constr.`,cost:130,maxLevel:5,requirements:["storageOptimization"]},{id:"cargoDrones",branch:"logistics",tier:3,row:1,title:"Drones de Carga",description:"Aumenta la capacidad de las unidades de almacenamiento.",effect:r=>`+${r*10}% Bono Almacenamiento`,cost:220,maxLevel:4,requirements:["storageConstruction"]},{id:"batteryTech",branch:"logistics",tier:2,row:2,title:"TecnologÃ­a de BaterÃ­as",description:"Aumenta la capacidad mÃ¡xima de energÃ­a.",effect:r=>`+${r*15}% Cap. EnergÃ­a`,cost:300,maxLevel:5,requirements:["storageOptimization"]},{id:"energyStorage",branch:"logistics",tier:3,row:2,title:"Almacenamiento EnergÃ©tico",description:"Aumenta la capacidad de las baterÃ­as.",effect:r=>`+${r*10}% Bono BaterÃ­as`,cost:350,maxLevel:4,requirements:["batteryTech"]},{id:"automatedDistribution",branch:"logistics",tier:4,row:1,title:"LogÃ­stica de Enjambre",description:"Los drones de carga se comunican para optimizar rutas, aumentando la capacidad de almacenamiento de chatarra y energÃ­a.",effect:r=>`+${r*5}% Cap. Chatarra y EnergÃ­a`,cost:800,maxLevel:3,requirements:["cargoDrones"]},{id:"matterCompression",branch:"logistics",tier:4,row:2,title:"CompresiÃ³n de Materia",description:"Reduce el coste de construcciÃ³n de unidades de almacenamiento.",effect:r=>`-${r*5}% Coste Almacenamiento`,cost:1200,maxLevel:3,requirements:["energyStorage"]}],Lt=({gameState:r,onResearchUpgrade:De,onClose:pe})=>{const{techCenter:T}=r,{unlocked:I,researchPoints:ae,upgrades:ve}=T,A=_t(),[we,m]=ke.useState(!1),[a,d]=ke.useState(null);ke.useEffect(()=>{if(a){const o=setTimeout(()=>d(null),1500);return()=>clearTimeout(o)}},[a]);const v=Math.max(...Ge.map(o=>o.tier)),n=r.rates.researchPerSecond,E=o=>o.requirements.length===0?!0:o.requirements.every(y=>Ge.find(i=>i.id===y)?(ve[y]||0)>=1:!1);return I?_.jsx("div",{className:"laboratory-container",children:_.jsxs("div",{className:"laboratory-content-area",ref:A,children:[_.jsx("button",{onClick:pe,className:"close-button",children:"Ã—"}),_.jsxs("div",{className:"research-points-summary",children:[_.jsxs("h3",{onMouseEnter:()=>m(!0),onMouseLeave:()=>m(!1),children:[_.jsxs("span",{children:["ðŸ§ª Puntos de InvestigaciÃ³n: ",ut(ae)]}),_.jsx("span",{className:"info-icon",children:"â“˜"})]}),we&&_.jsx(Dt,{total:n})]}),_.jsxs(ft.Xwrapper,{children:[_.jsxs("div",{className:"tech-tree-grid-container",children:[Object.values(We).map(o=>_.jsx("div",{className:"branch-banner",style:{gridRow:o.gridRowStart-1,gridColumn:`1 / ${v+1}`,color:o.color,borderColor:o.color},children:o.name.toUpperCase()},o.name)),Ge.map(o=>_.jsx(jt,{tech:o,researchPoints:ae,upgrades:ve,onResearchUpgrade:(y,b)=>{De(y,b),d(y)},isAvailable:E(o),color:We[o.branch].color,style:{gridColumn:o.tier,gridRow:We[o.branch].gridRowStart+o.row-1}},o.id))]}),Ge.map(o=>o.requirements.map(y=>{if(!Ge.some(u=>u.id===y))return null;const t=(ve[o.id]||0)>0,i=a===y,h=We[o.branch].color;return _.jsx(Ct,{start:y,end:o.id,strokeWidth:i?4:t?3:2,color:i?"#FFFFFF":t?h:"#4B5563",path:"smooth",startAnchor:"right",endAnchor:"left",dashness:!t&&!i,headSize:4,zIndex:i?2:1,animateDrawing:i?.7:!1},`${y}-${o.id}`)}))]})]})}):_.jsxs("div",{style:{backgroundColor:"#111827",color:"#E5E7EB",minHeight:"100vh",padding:"1rem",fontFamily:"Inter, sans-serif"},children:[_.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",marginBottom:"2rem"},children:[_.jsx("h2",{children:"LABORATORIO"}),_.jsx("button",{onClick:pe,style:{padding:"0.5rem 1rem",backgroundColor:"#EF4444",color:"white",border:"none",borderRadius:"4px",cursor:"pointer"},children:"Cerrar"})]}),_.jsxs("div",{style:{padding:"2rem",backgroundColor:"#1F2737",borderRadius:"4px",textAlign:"center",border:"2px solid #F59E0B"},children:[_.jsx("h3",{style:{color:"#F59E0B"},children:"ðŸ”’ LABORATORIO BLOQUEADO"}),_.jsx("p",{children:"Para desbloquear el Laboratorio, necesitas:"}),_.jsxs("ul",{style:{textAlign:"left",display:"inline-block",margin:"1rem 0"},children:[_.jsx("li",{children:"âœ… 3 Drones Medios"}),_.jsx("li",{children:"âœ… 1 Generador Solar Avanzado"}),_.jsx("li",{children:"âœ… 1000 Chatarra"})]})]})]})},Dt=({total:r})=>_.jsxs("div",{style:{position:"absolute",top:"100%",marginTop:"0.5rem",left:"50%",transform:"translateX(-50%)",backgroundColor:"#111827",border:"1px solid #374151",borderRadius:"8px",padding:"1rem",width:"300px",textAlign:"left",fontSize:"1.4rem",boxShadow:"0 4px 12px rgba(0,0,0,0.5)",zIndex:10},children:[_.jsx("h4",{style:{margin:0,color:"#06B6D4"},children:"GeneraciÃ³n de InvestigaciÃ³n"}),_.jsx("p",{style:{margin:"0.5rem 0",fontSize:"1.2rem",color:"#9CA3AF"},children:"La tasa de investigaciÃ³n se basa en tu tasa base, el nÃºmero de drones y tu superÃ¡vit energÃ©tico."}),_.jsx("hr",{style:{borderColor:"#374151",margin:"0.5rem 0"}}),_.jsxs("p",{style:{margin:"0.5rem 0",fontWeight:"bold"},children:["Total: ",_.jsxs("strong",{children:["+",r.toFixed(2)," /s"]})]})]}),jt=({tech:r,researchPoints:De,upgrades:pe,onResearchUpgrade:T,isAvailable:I,color:ae,style:ve})=>{const A=pe[r.id]||0;let we=r.cost;r.isInfinite&&(we=Math.floor(r.cost*Math.pow(1.15,A)));const m=I&&De>=we&&A<r.maxLevel,a=typeof r.effect=="function"?r.effect(A):r.effect,d=`tech-card ${I?m?"available":A>0?"researched":"":"locked"}`;return _.jsxs("div",{id:r.id,className:d,style:{...ve,borderLeftColor:ae},children:[_.jsx("h4",{children:r.title}),_.jsx("p",{className:"tech-card-description",children:r.description}),_.jsx("p",{className:"tech-card-effect",children:a}),_.jsxs("div",{className:"tech-card-footer",children:[_.jsxs("span",{children:["Nivel: ",A,"/",r.maxLevel===1/0?"âˆž":r.maxLevel]}),_.jsxs("button",{onClick:()=>T(r.id,we),disabled:!m,className:`research-button ${m?"can-research":""}`,style:{backgroundColor:m?ae:""},children:[A>0?"Mejorar":"Investigar"," (",ut(we)," RP)"]})]})]})},At=St.memo(Lt);export{At as default};
