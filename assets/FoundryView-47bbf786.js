import{R as ha,j as a,f as o,a as c,m as fa,s as pa,n as ga,o as ba,g as i,p as ja}from"./index-c424d34b.js";import{B as Ca,a as g}from"./BotonConTooltip-0b51b7d3.js";import{u as ya}from"./useDragToScroll-3dbb8632.js";import{Q as $}from"./QueueControls-496a35c3.js";const v=({progress:T,time:e})=>a.jsx("div",{className:"progress-bar-container",children:a.jsx("div",{className:"progress-bar",style:{width:`${T/e*100}%`}})}),$a=ha.memo(({resources:T,queues:e,onCraftRefinedMetal:q,onCraftStructuralSteel:aa,onCraftHullPlate:ea,onCraftSuperconductorWiring:ra,onCraftFuelRod:ta,onCraftPurifiedMetal:sa,upgrades:oa,buyAmount:t,onSetBuyAmount:ca,onClose:ia,onCancel:b,numberFormat:r})=>{var Q,V,W,z,G,H,J,K,L,O,U,X,Y,Z,_;const{scrap:x,energy:s,metalRefinado:u,aceroEstructural:j,fragmentosPlaca:k,circuitosDañados:P,placasCasco:na,cableadoSuperconductor:la,barraCombustible:da}=T,h={scrap:1e3,energy:100},n={scrap:1e3,metal:10,energy:250},l={fragmentos:10,acero:5,energy:500},d={circuitos:10,metal:25,energy:1e3},f={scrap:5e3,energy:500},C=Math.min(Math.floor(x/h.scrap),Math.floor(s/h.energy)),S=t==="max"?C:Math.min(t,C),y=Math.min(Math.floor(x/n.scrap),Math.floor(u/n.metal),Math.floor(s/n.energy)),B=t==="max"?y:Math.min(t,y),E=Math.min(Math.floor(k/l.fragmentos),Math.floor(j/l.acero),Math.floor(s/l.energy)),D=t==="max"?E:Math.min(t,E),N=Math.min(Math.floor(P/d.circuitos),Math.floor(u/d.metal),Math.floor(s/d.energy)),w=t==="max"?N:Math.min(t,N),M=Math.min(Math.floor(u/i.foundry.barraCombustible.costs.metalRefinado),Math.floor(j/i.foundry.barraCombustible.costs.aceroEstructural),Math.floor(s/i.foundry.barraCombustible.costs.energy)),I=t==="max"?M:Math.min(t,M),m=Math.min(Math.floor(x/f.scrap),Math.floor(s/f.energy)),A=t==="max"?m:Math.min(t,m),ma=ya(),p=(ua,xa)=>{const F=ua.filter(R=>R.current<R.amount);return F.length===0?"":"Requiere: "+F.map(R=>`${R.text} (${o(R.amount,xa)})`).join(", ")};return a.jsx("div",{className:"foundry-view-container",children:a.jsxs("div",{className:"foundry-content-area",ref:ma,children:[a.jsx("button",{onClick:ia,className:"close-button",children:"×"}),a.jsx(Ca,{buyAmount:t,onSetBuyAmount:ca}),a.jsxs("div",{className:`foundry-item ${C>0?"unlocked":""}`,children:[a.jsxs("div",{className:"foundry-item-content",children:[a.jsx("h4",{style:{color:"#F59E0B"},children:"Metal Refinado"}),a.jsxs("p",{children:["Coste: ",o(h.scrap,r)," Chatarra + ",o(h.energy,r)," Energía"]}),a.jsxs("p",{children:["En Posesión: ",o(u,r)," ",((Q=e.metalRefinado)==null?void 0:Q.queue)>0?`| En cola: ${e.metalRefinado.queue} | Tiempo: ~${c(e.metalRefinado.queue*e.metalRefinado.time)}`:""]}),((V=e.metalRefinado)==null?void 0:V.queue)>0&&a.jsxs("div",{children:[a.jsxs("p",{className:"time-info",children:["Tiempo/u: ",c(e.metalRefinado.time)]}),a.jsx(v,{progress:e.metalRefinado.progress,time:e.metalRefinado.time})]}),a.jsxs("div",{className:"build-actions",children:[a.jsxs(g,{onClick:q,disabled:C<=0,tooltipText:p([{amount:h.scrap,current:x,text:"Chatarra"},{amount:h.energy,current:s,text:"Energía"}],r),className:`build-button ${C>0?"unlocked":""}`,children:["Encargar ",S>0&&`(${S})`]}),((W=e.metalRefinado)==null?void 0:W.queue)>0&&a.jsx($,{itemName:"metalRefinado",onCancel:b})]})]}),a.jsx("img",{src:fa,alt:"Metal Refinado",className:"foundry-item-image"})]}),a.jsxs("div",{className:`foundry-item ${y>0?"unlocked":""}`,children:[a.jsxs("div",{className:"foundry-item-content",children:[a.jsx("h4",{style:{color:"#06B6D4"},children:"Acero Estructural"}),a.jsxs("p",{children:["Coste: ",o(n.scrap,r)," Chatarra + ",n.metal," Metal Refinado + ",n.energy," Energía"]}),a.jsxs("p",{children:["En Posesión: ",o(j,r)," ",((z=e.aceroEstructural)==null?void 0:z.queue)>0?`| En cola: ${e.aceroEstructural.queue} | Tiempo: ~${c(e.aceroEstructural.queue*e.aceroEstructural.time)}`:""]}),((G=e.aceroEstructural)==null?void 0:G.queue)>0&&a.jsxs("div",{children:[a.jsxs("p",{className:"time-info",children:["Tiempo/u: ",c(e.aceroEstructural.time)]}),a.jsx(v,{progress:e.aceroEstructural.progress,time:e.aceroEstructural.time})]}),a.jsxs("div",{className:"build-actions",children:[a.jsxs(g,{onClick:aa,disabled:y<=0,tooltipText:p([{amount:n.scrap,current:x,text:"Chatarra"},{amount:n.metal,current:u,text:"Metal Refinado"},{amount:n.energy,current:s,text:"Energía"}],r),className:`build-button ${y>0?"unlocked":""}`,children:["Encargar ",B>0&&`(${B})`]}),((H=e.aceroEstructural)==null?void 0:H.queue)>0&&a.jsx($,{itemName:"aceroEstructural",onCancel:b})]})]}),a.jsx("img",{src:pa,alt:"Acero Estructural",className:"foundry-item-image"})]}),a.jsx("h3",{className:"section-title",children:"Componentes de Nave"}),a.jsxs("div",{className:`foundry-item ${E>0?"unlocked":""}`,children:[a.jsxs("div",{className:"foundry-item-content",children:[a.jsx("h4",{style:{color:"#F59E0B"},children:"Placa de Casco Reforzado"}),a.jsxs("p",{children:["Coste: ",l.fragmentos," Fragmentos de Placa + ",l.acero," Acero Estructural + ",l.energy," Energía"]}),a.jsxs("p",{children:["En Posesión: ",o(na,r)," ",((J=e.placasCasco)==null?void 0:J.queue)>0?`| En cola: ${e.placasCasco.queue} | Tiempo: ~${c(e.placasCasco.queue*e.placasCasco.time)}`:""]}),((K=e.placasCasco)==null?void 0:K.queue)>0&&a.jsxs("div",{children:[a.jsxs("p",{className:"time-info",children:["Tiempo/u: ",c(e.placasCasco.time)]}),a.jsx(v,{progress:e.placasCasco.progress,time:e.placasCasco.time})]}),a.jsxs("div",{className:"build-actions",children:[a.jsxs(g,{onClick:ea,disabled:E<=0,tooltipText:p([{amount:l.fragmentos,current:k,text:"Fragmentos de Placa"},{amount:l.acero,current:j,text:"Acero Estructural"},{amount:l.energy,current:s,text:"Energía"}],r),className:`build-button ${E>0?"unlocked":""}`,children:["Encargar ",D>0&&`(${D})`]}),((L=e.placasCasco)==null?void 0:L.queue)>0&&a.jsx($,{itemName:"placasCasco",onCancel:b})]})]}),a.jsx("img",{src:ga,alt:"Placa de Casco",className:"foundry-item-image"})]}),a.jsxs("div",{className:`foundry-item ${N>0?"unlocked":""}`,children:[a.jsxs("div",{className:"foundry-item-content",children:[a.jsx("h4",{style:{color:"#06B6D4"},children:"Cableado de Superconductores"}),a.jsxs("p",{children:["Coste: ",d.circuitos," Circuitos Dañados + ",d.metal," Metal Refinado + ",d.energy," Energía"]}),a.jsxs("p",{children:["En Posesión: ",o(la,r)," ",((O=e.cableadoSuperconductor)==null?void 0:O.queue)>0?`| En cola: ${e.cableadoSuperconductor.queue} | Tiempo: ~${c(e.cableadoSuperconductor.queue*e.cableadoSuperconductor.time)}`:""]}),((U=e.cableadoSuperconductor)==null?void 0:U.queue)>0&&a.jsxs("div",{children:[a.jsxs("p",{className:"time-info",children:["Tiempo/u: ",c(e.cableadoSuperconductor.time)]}),a.jsx(v,{progress:e.cableadoSuperconductor.progress,time:e.cableadoSuperconductor.time})]}),a.jsxs("div",{className:"build-actions",children:[a.jsxs(g,{onClick:ra,disabled:N<=0,tooltipText:p([{amount:d.circuitos,current:P,text:"Circuitos Dañados"},{amount:d.metal,current:u,text:"Metal Refinado"},{amount:d.energy,current:s,text:"Energía"}],r),className:`build-button ${N>0?"unlocked":""}`,children:["Encargar ",w>0&&`(${w})`]}),((X=e.cableadoSuperconductor)==null?void 0:X.queue)>0&&a.jsx($,{itemName:"cableadoSuperconductor",onCancel:b})]})]}),a.jsx("img",{src:ba,alt:"Cableado",className:"foundry-item-image"})]}),a.jsxs("div",{className:`foundry-item ${M>0?"unlocked":""}`,children:[a.jsxs("div",{className:"foundry-item-content",children:[a.jsx("h4",{style:{color:"#FCD34D"},children:"Barra de Combustible"}),a.jsxs("p",{children:["Coste: ",i.foundry.barraCombustible.costs.metalRefinado," Metal Refinado + ",i.foundry.barraCombustible.costs.aceroEstructural," Acero Estructural + ",i.foundry.barraCombustible.costs.energy," Energía"]}),a.jsxs("p",{children:["Tiempo de Crafteo Base: ",c(i.foundry.barraCombustible.time)]}),a.jsxs("p",{children:["En Posesión: ",o(da,r)," ",((Y=e.barraCombustible)==null?void 0:Y.queue)>0?`| En cola: ${e.barraCombustible.queue} | Tiempo: ~${c(e.barraCombustible.queue*e.barraCombustible.time)}`:""]}),((Z=e.barraCombustible)==null?void 0:Z.queue)>0&&a.jsxs("div",{children:[a.jsxs("p",{className:"time-info",children:["Tiempo/u: ",c(e.barraCombustible.time)]}),a.jsx(v,{progress:e.barraCombustible.progress,time:e.barraCombustible.time})]}),a.jsxs("div",{className:"build-actions",children:[a.jsxs(g,{onClick:ta,disabled:M<=0,tooltipText:p([{amount:i.foundry.barraCombustible.costs.metalRefinado,current:u,text:"Metal Refinado"},{amount:i.foundry.barraCombustible.costs.aceroEstructural,current:j,text:"Acero Estructural"},{amount:i.foundry.barraCombustible.costs.energy,current:s,text:"Energía"}],r),className:`build-button ${M>0?"unlocked":""}`,children:["Encargar ",I>0&&`(${I})`]}),((_=e.barraCombustible)==null?void 0:_.queue)>0&&a.jsx($,{itemName:"barraCombustible",onCancel:b})]})]}),a.jsx("img",{src:ja,alt:"Barra de Combustible",className:"foundry-item-image"})]}),oa.scrapPurification>0&&a.jsx("div",{className:`crafting-item ${m>0?"available":""}`,style:{borderColor:m>0?"#A855F7":""},children:a.jsxs("div",{className:"crafting-item-content full-width",children:[a.jsxs("div",{className:"crafting-item-info",children:[a.jsx("h4",{style:{color:"#A855F7"},children:"Purificación de Chatarra"}),a.jsx("p",{children:"Convierte una gran cantidad de recursos básicos en Metal Refinado. Es ineficiente, pero útil en emergencias."}),a.jsxs("p",{children:["Coste: ",o(f.scrap,r)," Chatarra + ",o(f.energy,r)," Energía"]})]}),a.jsxs(g,{onClick:sa,disabled:m<=0,tooltipText:p([{amount:f.scrap,current:x,text:"Chatarra"},{amount:f.energy,current:s,text:"Energía"}],r),className:`build-button ${m>0?"unlocked":""}`,style:{backgroundColor:m>0?"#A855F7":"",color:m>0?"white":""},children:["Purificar Chatarra ",A>0&&`(${A})`]})]})})]})})});export{$a as default};
