import{R as re,j as e,f as s,d as W}from"./index-22dcefa4.js";import{B as se}from"./BuyAmountSelector-eff27179.js";import{B as u}from"./BotonConTooltip-fa0a09a1.js";import{Q as C}from"./QueueControls-cd01b480.js";const ne="/Mekadron-idle/assets/drone-basic-85491f9f.png",oe="/Mekadron-idle/assets/drone-medium-fd303461.png",ce="/Mekadron-idle/assets/drone-advanced-474a19f4.png",ie="/Mekadron-idle/assets/drone-expedition-cdc67b44.png",te="/Mekadron-idle/assets/drone-reinforced-basic-d13b19bd.png",de="/Mekadron-idle/assets/drone-reinforced-medium-4a10a63f.png",le="/Mekadron-idle/assets/drone-reinforced-advanced-f52beac6.png",me="/Mekadron-idle/assets/drone-expedition-v2-cdfeb4b3.png",xe="/Mekadron-idle/assets/drone-golem-bb288f4d.png",he="/Mekadron-idle/assets/drone-wyrm-2cd90d83.png",ve=re.memo(({resources:b,drones:a,queues:o,upgrades:n,onBuildBasicDrone:B,onBuildMediumDrone:O,onBuildAdvancedDrone:P,onBuildReinforcedBasic:S,onBuildReinforcedMedium:z,onBuildReinforcedAdvanced:A,onBuildGolemDrone:M,onBuildExpeditionDrone:V,onBuildExpeditionV2Drone:w,onBuildWyrm:I,onDismantle:t,onRetrofit:R,buyAmount:c,onSetBuyAmount:G,onClose:$,onCancel:f})=>{const{scrap:r,metalRefinado:i,aceroEstructural:E}=b,y=15,F=250,T=1500,d={scrap:600,metal:5},l={scrap:2500,metal:15},m={scrap:7e3,metal:30},x={scrap:3e3,metal:20},h={scrap:15e3,metal:100},p={scrap:75e3,steel:5},j={scrap:25e4,steel:25},v=D=>{const q=D.scrap>0?Math.floor(r/D.scrap):1/0,k=D.metal&&D.metal>0?Math.floor(i/D.metal):1/0,ae=D.steel&&D.steel>0?Math.floor(E/D.steel):1/0;return Math.min(q,k,ae)},Q=v({scrap:y}),U=v({scrap:F}),X=v({scrap:T}),Y=v(d),Z=v(l),H=v(m),J=v(x),K=v(h),_=v(p),ee=v(j),N=D=>{const q=D.filter(k=>k.current<k.amount);return q.length===0?"":"Requiere: "+q.map(k=>`${k.text} (${s(k.amount)})`).join(", ")};return e.jsxs("div",{className:"workshop-container",children:[e.jsxs("div",{className:"workshop-header",children:[e.jsx("h2",{children:"TALLER DE DRONES"}),e.jsx("button",{onClick:$,className:"close-button",children:"Cerrar"})]}),e.jsxs("div",{className:"drone-category",style:{borderColor:"#F59E0B"},children:[e.jsx("h3",{style:{color:"#F59E0B"},children:"DRONES DE RECICLADO"}),e.jsx(se,{buyAmount:c,onSetBuyAmount:G}),e.jsxs("div",{className:`drone-item ${r>=y?"unlocked":""}`,children:[e.jsxs("div",{className:"drone-item-content",children:[e.jsxs("div",{className:"drone-info",children:[e.jsx("h4",{className:"drone-title",style:{color:"#F59E0B"},children:"Dron Básico de Reciclado (DBR)"}),e.jsxs("p",{children:["Producción: +",s(1)," chatarra/segundo"]}),e.jsxs("p",{children:["Consumo: ",s(1)," energía"]}),e.jsxs("p",{children:["Coste: ",s(y)," chatarra"]}),e.jsxs("p",{children:["Flota: ",a.basic," | En cola: ",o.basic.queue]})]}),e.jsxs("div",{className:"controls-container",children:[e.jsx(C,{queue:o.basic,itemName:"basic",onCancel:f}),e.jsx(g,{upgrades:n,droneType:"basic",onDismantle:t,droneCount:a.basic,buyAmount:c}),e.jsx(L,{resources:b,upgrades:n,droneType:"basic",toDrone:"medium",onRetrofit:R,droneCount:a.basic})]}),e.jsxs(u,{onClick:B,disabled:r<y,tooltipText:N([{resource:"scrap",amount:y,current:r,text:"Chatarra"}]),className:`build-button ${r>=y?"unlocked":""}`,children:["Encargar Dron Básico ",c==="max"&&`(${Q})`]})]}),e.jsx("img",{src:ne,alt:"Dron Básico",className:"drone-item-image"})]}),e.jsxs("div",{className:`drone-item ${r>=F&&a.basic>=5?"unlocked":""} ${a.basic>=5?"":"locked"}`,children:[e.jsxs("div",{className:"drone-item-content",children:[e.jsxs("div",{className:"drone-info",children:[e.jsx("h4",{className:"drone-title",style:{color:"#06B6D4"},children:"Dron Medio de Reciclado (DMR)"}),e.jsxs("p",{children:["Producción: +",s(5)," chatarra/segundo"]}),e.jsxs("p",{children:["Consumo: ",s(3)," energía"]}),e.jsxs("p",{children:["Coste: ",s(F)," chatarra"]}),e.jsxs("p",{children:["Flota: ",a.medium," | En cola: ",o.medium.queue]}),e.jsx("p",{children:"Requisitos: 5 Drones Básicos"})]}),e.jsxs("div",{className:"controls-container",children:[e.jsx(C,{queue:o.medium,itemName:"medium",onCancel:f}),e.jsx(g,{upgrades:n,droneType:"medium",onDismantle:t,droneCount:a.medium,buyAmount:c}),e.jsx(L,{resources:b,upgrades:n,droneType:"medium",toDrone:"advanced",onRetrofit:R,droneCount:a.medium})]}),e.jsxs(u,{onClick:O,disabled:r<F||a.basic<5,tooltipText:N([{amount:F,current:r,text:"Chatarra"},{amount:5,current:a.basic,text:"Drones Básicos"}]),className:`build-button ${r>=F&&a.basic>=5?"unlocked":""}`,children:["Encargar Dron Medio ",c==="max"&&`(${U})`]}),a.basic<5&&e.jsx("p",{className:"requirement-warning",children:"⚠️ Necesitas 5 Drones Básicos para desbloquear"})]}),e.jsx("img",{src:oe,alt:"Dron Medio",className:"drone-item-image"})]}),e.jsxs("div",{className:`drone-item ${r>=T&&a.medium>=3?"unlocked":""} ${a.medium>=3?"":"locked"}`,children:[e.jsxs("div",{className:"drone-item-content",children:[e.jsxs("div",{className:"drone-info",children:[e.jsx("h4",{className:"drone-title",style:{color:"#22C55E"},children:"Dron Avanzado de Reciclado (DAR)"}),e.jsxs("p",{children:["Producción: +",s(20)," chatarra/segundo"]}),e.jsxs("p",{children:["Consumo: ",s(5)," energía"]}),e.jsxs("p",{children:["Coste: ",s(T)," chatarra"]}),e.jsxs("p",{children:["Flota: ",a.advanced," | En cola: ",o.advanced.queue]}),e.jsx("p",{children:"Requisitos: 3 Drones Medios"})]}),e.jsxs("div",{className:"controls-container",children:[e.jsx(C,{queue:o.advanced,itemName:"advanced",onCancel:f}),e.jsx(g,{upgrades:n,droneType:"advanced",onDismantle:t,droneCount:a.advanced,buyAmount:c})]}),e.jsxs(u,{onClick:P,disabled:r<T||a.medium<3,tooltipText:N([{amount:T,current:r,text:"Chatarra"},{amount:3,current:a.medium,text:"Drones Medios"}]),className:`build-button ${r>=T&&a.medium>=3?"unlocked":""}`,children:["Encargar Dron Avanzado ",c==="max"&&`(${X})`]}),a.medium<3&&e.jsx("p",{className:"requirement-warning",children:"⚠️ Necesitas 3 Drones Medios para desbloquear"})]}),e.jsx("img",{src:ce,alt:"Dron Avanzado",className:"drone-item-image"})]})]}),e.jsxs("div",{className:"drone-category",style:{borderColor:"#10B981"},children:[e.jsx("h3",{style:{color:"#10B981"},children:"DRONES DE EXPEDICIÓN"}),e.jsxs("div",{className:`drone-item ${r>=x.scrap&&i>=x.metal&&a.advanced>=2?"unlocked":""} ${a.advanced>=2?"":"locked"}`,children:[e.jsxs("div",{className:"drone-item-content",children:[e.jsxs("div",{className:"drone-info",children:[e.jsx("h4",{className:"drone-title",style:{color:"#10B981"},children:"Dron de Expedición (DE-1)"}),e.jsx("p",{children:"Función: Realiza expediciones para obtener recursos especiales"}),e.jsxs("p",{children:["Consumo: ",s(2)," energía (en expediciones)"]}),e.jsxs("p",{children:["Coste: ",s(x.scrap)," chatarra, ",s(x.metal)," metal refinado"]}),e.jsx("p",{children:"Requisitos: 2 Drones Avanzados"}),e.jsxs("p",{children:["Flota: ",a.expeditionDrone," | En cola: ",o.expeditionDrone.queue]})]}),e.jsxs("div",{className:"controls-container",children:[e.jsx(C,{queue:o.expeditionDrone,itemName:"expedition",onCancel:f}),e.jsx(g,{upgrades:n,droneType:"expeditionDrone",onDismantle:t,droneCount:a.expeditionDrone,buyAmount:c})]}),e.jsxs(u,{onClick:V,disabled:r<x.scrap||i<x.metal||a.advanced<2,tooltipText:N([{amount:x.scrap,current:r,text:"Chatarra"},{amount:x.metal,current:i,text:"Metal Refinado"},{amount:2,current:a.advanced,text:"Drones Avanzados"}]),className:`build-button ${r>=x.scrap&&i>=x.metal&&a.advanced>=2?"unlocked":""}`,children:["Encargar Dron de Expedición ",c==="max"&&`(${J})`]}),a.advanced<2&&e.jsx("p",{className:"requirement-warning",children:"⚠️ Necesitas 2 Drones Avanzados para desbloquear"})]}),e.jsx("img",{src:ie,alt:"Dron de Expedición",className:"drone-item-image"})]}),e.jsxs("div",{className:`drone-item ${r>=h.scrap&&i>=h.metal&&a.expeditionDrone>=5?"unlocked":""} ${a.expeditionDrone>=5?"":"locked"}`,children:[e.jsxs("div",{className:"drone-item-content",children:[e.jsxs("div",{className:"drone-info",children:[e.jsx("h4",{className:"drone-title",style:{color:"#059669"},children:"Dron de Expedición v2 (DE-2)"}),e.jsx("p",{children:"Función: Realiza expediciones avanzadas para obtener recursos raros"}),e.jsxs("p",{children:["Consumo: ",s(5)," energía (en expediciones)"]}),e.jsxs("p",{children:["Coste: ",s(h.scrap)," chatarra, ",s(h.metal)," metal refinado"]}),e.jsx("p",{children:"Requisitos: 5 Drones de Expedición"}),e.jsxs("p",{children:["Flota: ",a.expeditionV2Drone," | En cola: ",o.expeditionV2Drone.queue]})]}),e.jsxs("div",{className:"controls-container",children:[e.jsx(C,{queue:o.expeditionV2Drone,itemName:"expeditionV2",onCancel:f}),e.jsx(g,{upgrades:n,droneType:"expeditionV2Drone",onDismantle:t,droneCount:a.expeditionV2Drone,buyAmount:c})]}),e.jsxs(u,{onClick:w,disabled:r<h.scrap||i<h.metal||a.expeditionDrone<5,tooltipText:N([{amount:h.scrap,current:r,text:"Chatarra"},{amount:h.metal,current:i,text:"Metal Refinado"},{amount:5,current:a.expeditionDrone,text:"Drones de Expedición"}]),className:`build-button ${r>=h.scrap&&i>=h.metal&&a.expeditionDrone>=5?"unlocked":""}`,children:["Encargar Dron de Expedición v2 ",c==="max"&&`(${K})`]}),a.expeditionDrone<5&&e.jsx("p",{className:"requirement-warning",children:"⚠️ Necesitas 5 Drones de Expedición para desbloquear"})]}),e.jsx("img",{src:me,alt:"Dron de Expedición v2",className:"drone-item-image"})]})]}),(n.reinforcedBasicDrones>0||n.reinforcedMediumDrones>0||n.reinforcedAdvancedDrones>0)&&e.jsxs("div",{className:"drone-category",style:{borderColor:"#8B5CF6"},children:[e.jsx("h3",{style:{color:"#8B5CF6"},children:"DRONES REFORZADOS"}),n.reinforcedBasicDrones>0&&e.jsxs("div",{className:`drone-item ${r>=d.scrap&&i>=d.metal?"unlocked":""}`,children:[e.jsxs("div",{className:"drone-item-content",children:[e.jsxs("div",{className:"drone-info",children:[e.jsx("h4",{className:"drone-title",style:{color:"#A78BFA"},children:"Dron Básico Reforzado (DBR-F)"}),e.jsxs("p",{children:["Producción: +",s(8)," chatarra/segundo"]}),e.jsxs("p",{children:["Consumo: ",s(3)," energía"]}),e.jsxs("p",{children:["Coste: ",s(d.scrap)," chatarra, ",s(d.metal)," metal refinado"]}),e.jsxs("p",{children:["Flota: ",a.reinforcedBasic," | En cola: ",o.reinforcedBasic.queue]})]}),e.jsxs("div",{className:"controls-container",children:[e.jsx(C,{queue:o.reinforcedBasic,itemName:"reinforcedBasic",onCancel:f}),e.jsx(g,{upgrades:n,droneType:"reinforcedBasic",onDismantle:t,droneCount:a.reinforcedBasic,buyAmount:c})]}),e.jsxs(u,{onClick:S,disabled:r<d.scrap||i<d.metal,tooltipText:N([{amount:d.scrap,current:r,text:"Chatarra"},{amount:d.metal,current:i,text:"Metal Refinado"}]),className:`build-button ${r>=d.scrap&&i>=d.metal?"unlocked":""}`,children:["Encargar Dron Básico Reforzado ",c==="max"&&`(${Y})`]})]}),e.jsx("img",{src:te,alt:"Dron Básico Reforzado",className:"drone-item-image"})]}),n.reinforcedMediumDrones>0&&e.jsxs("div",{className:`drone-item ${r>=l.scrap&&i>=l.metal?"unlocked":""}`,children:[e.jsxs("div",{className:"drone-item-content",children:[e.jsxs("div",{className:"drone-info",children:[e.jsx("h4",{className:"drone-title",style:{color:"#A78BFA"},children:"Dron Medio Reforzado (DMR-F)"}),e.jsxs("p",{children:["Producción: +",s(25)," chatarra/segundo"]}),e.jsxs("p",{children:["Consumo: ",s(6)," energía"]}),e.jsxs("p",{children:["Coste: ",s(l.scrap)," chatarra, ",s(l.metal)," metal refinado"]}),e.jsxs("p",{children:["Flota: ",a.reinforcedMedium," | En cola: ",o.reinforcedMedium.queue]})]}),e.jsxs("div",{className:"controls-container",children:[e.jsx(C,{queue:o.reinforcedMedium,itemName:"reinforcedMedium",onCancel:f}),e.jsx(g,{upgrades:n,droneType:"reinforcedMedium",onDismantle:t,droneCount:a.reinforcedMedium,buyAmount:c})]}),e.jsxs(u,{onClick:z,disabled:r<l.scrap||i<l.metal,tooltipText:N([{amount:l.scrap,current:r,text:"Chatarra"},{amount:l.metal,current:i,text:"Metal Refinado"}]),className:`build-button ${r>=l.scrap&&i>=l.metal?"unlocked":""}`,children:["Encargar Dron Medio Reforzado ",c==="max"&&`(${Z})`]})]}),e.jsx("img",{src:de,alt:"Dron Medio Reforzado",className:"drone-item-image"})]}),n.reinforcedAdvancedDrones>0&&e.jsxs("div",{className:`drone-item ${r>=m.scrap&&i>=m.metal?"unlocked":""}`,children:[e.jsxs("div",{className:"drone-item-content",children:[e.jsxs("div",{className:"drone-info",children:[e.jsx("h4",{className:"drone-title",style:{color:"#A78BFA"},children:"Dron Avanzado Reforzado (DAR-F)"}),e.jsxs("p",{children:["Producción: +",s(80)," chatarra/segundo"]}),e.jsxs("p",{children:["Consumo: ",s(12)," energía"]}),e.jsxs("p",{children:["Coste: ",s(m.scrap)," chatarra, ",s(m.metal)," metal refinado"]}),e.jsxs("p",{children:["Flota: ",a.reinforcedAdvanced," | En cola: ",o.reinforcedAdvanced.queue]})]}),e.jsxs("div",{className:"controls-container",children:[e.jsx(C,{queue:o.reinforcedAdvanced,itemName:"reinforcedAdvanced",onCancel:f}),e.jsx(g,{upgrades:n,droneType:"reinforcedAdvanced",onDismantle:t,droneCount:a.reinforcedAdvanced,buyAmount:c})]}),e.jsxs(u,{onClick:A,disabled:r<m.scrap||i<m.metal,tooltipText:N([{amount:m.scrap,current:r,text:"Chatarra"},{amount:m.metal,current:i,text:"Metal Refinado"}]),className:`build-button ${r>=m.scrap&&i>=m.metal?"unlocked":""}`,children:["Encargar Dron Avanzado Reforzado ",c==="max"&&`(${H})`]})]}),e.jsx("img",{src:le,alt:"Dron Avanzado Reforzado",className:"drone-item-image"})]})]}),(n.golemChassis>0||n.wyrm>0)&&e.jsxs("div",{className:"drone-category",style:{borderColor:"#F43F5E"},children:[e.jsx("h3",{style:{color:"#F43F5E"},children:"DRONES DE ÉLITE"}),n.golemChassis>0&&e.jsxs("div",{className:`drone-item ${r>=p.scrap&&E>=p.steel&&a.reinforcedAdvanced>=5?"unlocked":""} ${a.reinforcedAdvanced>=5?"":"locked"}`,children:[e.jsxs("div",{className:"drone-item-content",children:[e.jsxs("div",{className:"drone-info",children:[e.jsxs("p",{children:[e.jsx("strong",{children:"Descripción:"})," Un chasis masivo diseñado para procesar chatarra. Consume Chatarra para producir Metal Refinado de forma pasiva."]}),e.jsx("p",{children:"Consumo: 50 energía/segundo"}),e.jsx("p",{children:"Consume: 500 Chatarra/s | Produce: 0.5 Metal Refinado/s"}),e.jsxs("p",{children:["Coste: ",s(p.scrap)," chatarra, ",s(p.steel)," acero estructural"]}),e.jsx("p",{children:'Requisitos: 5 Drones Avanzados Reforzados Y la investigación "Chasis Golem"'}),e.jsxs("p",{children:["Flota: ",a.golem," | En cola: ",o.golem.queue]})]}),e.jsxs("div",{className:"controls-container",children:[e.jsx(C,{queue:o.golem,itemName:"golem",onCancel:f}),e.jsx(g,{upgrades:n,droneType:"golem",onDismantle:t,droneCount:a.golem,buyAmount:c})]}),e.jsxs(u,{onClick:M,disabled:r<p.scrap||E<p.steel||a.reinforcedAdvanced<5||n.golemChassis===0,tooltipText:N([{amount:p.scrap,current:r,text:"Chatarra"},{amount:p.steel,current:E,text:"Acero Estructural"},{amount:5,current:a.reinforcedAdvanced,text:"Drones Avanzados Reforzados"},{amount:1,current:n.golemChassis,text:"Investigación: Chasis Golem"}]),className:`build-button ${r>=p.scrap&&E>=p.steel&&a.reinforcedAdvanced>=5&&n.golemChassis>0?"unlocked":""}`,children:["Encargar Dron Golem ",c==="max"&&`(${_})`]})]}),e.jsx("img",{src:xe,alt:"Dron Golem",className:"drone-item-image"})]})]}),n.golemChassis>0&&a.golem>=1&&e.jsxs("div",{className:`drone-item ${r>=j.scrap&&E>=j.steel&&a.golem>=1?"unlocked":""} ${a.golem>=1?"":"locked"}`,children:[e.jsxs("div",{className:"drone-item-content",children:[e.jsxs("div",{className:"drone-info",children:[e.jsx("h4",{className:"drone-title",style:{color:"#F43F5E"},children:"Dron Wyrm (DW-1)"}),e.jsxs("p",{children:[e.jsx("strong",{children:"Descripción:"})," Una maravilla de la ingeniería. Consume Chatarra y Metal Refinado para sintetizar Acero Estructural de forma pasiva."]}),e.jsx("p",{children:"Consumo: 200 energía/segundo"}),e.jsx("p",{children:"Consume: 1000 Chatarra/s y 1 Metal Refinado/s | Produce: 0.1 Acero Estructural/s"}),e.jsxs("p",{children:["Coste: ",s(j.scrap)," chatarra, ",s(j.steel)," acero"]}),e.jsx("p",{children:"Requisitos: 1 Dron Golem"}),e.jsxs("p",{children:["Flota: ",a.wyrm," | En cola: ",o.wyrm.queue]})]}),e.jsxs("div",{className:"controls-container",children:[e.jsx(C,{queue:o.wyrm,itemName:"wyrm",onCancel:f}),e.jsx(g,{upgrades:n,droneType:"wyrm",onDismantle:t,droneCount:a.wyrm,buyAmount:c})]}),e.jsxs(u,{onClick:I,disabled:r<j.scrap||E<j.steel||a.golem<1,tooltipText:N([{amount:j.scrap,current:r,text:"Chatarra"},{amount:j.steel,current:E,text:"Acero"},{amount:1,current:a.golem,text:"Drones Golem"}]),className:`build-button ${r>=j.scrap&&E>=j.steel&&a.golem>=1?"unlocked":""}`,children:["Encargar Dron Wyrm ",c==="max"&&`(${ee})`]})]}),e.jsx("img",{src:he,alt:"Dron Wyrm",className:"drone-item-image"})]})]})}),g=({upgrades:b,droneType:a,droneCount:o,buyAmount:n,onDismantle:B})=>b.reassignProtocols?e.jsx("button",{onClick:()=>B(a,n),disabled:o<=0,style:{padding:"0.5rem",backgroundColor:o>0?"#EF4444":"#374151",color:"white",border:"none",borderRadius:"4px",cursor:o>0?"pointer":"not-allowed",fontSize:"0.8rem",width:"100px"},children:"Desmantelar"}):null,L=({resources:b,upgrades:a,droneType:o,toDrone:n,droneCount:B,onRetrofit:O})=>{var I,t;if(!a.droneRetrofitting)return e.jsx("div",{style:{width:"100px"}});const P=((I=W[o])==null?void 0:I.cost)||{},S=((t=W[n])==null?void 0:t.cost)||{},z={};let A=!0,M="Reacondicionar: ";const V=Object.entries(S);for(const[R,c]of V){const G=P[R]||0,$=c-G;$>0&&(z[R]=$,b[R]<$&&(A=!1),M+=`${s($)} ${R}, `)}Object.keys(z).length===0?M="Mejora gratuita":M=M.slice(0,-2);const w=B>0&&A;return e.jsx(u,{onClick:()=>O(o,n),disabled:!w,tooltipText:B>0?M:"No hay drones para reacondicionar",className:`build-button retrofit-button ${w?"unlocked":""}`,children:"Mejorar"})};export{ve as default};
