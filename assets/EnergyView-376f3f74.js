import{R as Ne,r as ve,j as e,f as c,a as t}from"./index-0c2ce0e4.js";import{B as qe,a as M}from"./BotonConTooltip-8c074f38.js";import{Q as E}from"./QueueControls-907c4650.js";import{u as $e}from"./useDragToScroll-9347a98d.js";const fe="/Mekadron-idle/assets/energy-solar-panel-basic-50867de1.png",ke="/Mekadron-idle/assets/energy-solar-panel-medium-905ab7eb.png",Me="/Mekadron-idle/assets/energy-solar-panel-advanced-c947fd28.png",Ee="/Mekadron-idle/assets/energy-core-damaged-43f3fd4b.png",Te="/Mekadron-idle/assets/energy-core-stabilized-35d5e644.png",ye="/Mekadron-idle/assets/energy-core-empowered-a43cb883.png",Re="/Mekadron-idle/assets/fusion-reactor-9d28f766.png",T=({progress:u,time:w})=>e.jsx("div",{className:"progress-bar-container",children:e.jsx("div",{className:"progress-bar",style:{width:`${u/w*100}%`}})}),Ae=Ne.memo(({resources:u,currentEnergy:w,maxEnergy:ie,energyConsumption:D,solarPanels:h,mediumSolarPanels:g,advancedSolar:N,energyCores:v,stabilizedEnergyCores:q,empoweredEnergyCores:$,fusionReactors:b,hasBuilt:i,solarPanelsQueue:r,mediumSolarPanelsQueue:o,advancedSolarQueue:d,energyCoresQueue:m,stabilizedEnergyCoresQueue:x,empoweredEnergyCoresQueue:j,fusionReactorQueue:p,onBuildSolarPanel:ce,onBuildMediumSolar:ne,onBuildAdvancedSolar:te,onBuildEnergyCore:le,onBuildStabilizedEnergyCore:re,onBuildEmpoweredEnergyCore:oe,onBuildFusionReactor:de,buyAmount:n,onSetBuyAmount:me,onClose:xe,onCancel:f,upgrades:je,numberFormat:s})=>{const{scrap:a,metalRefinado:z}=u,pe=$e(),k=(G,ge)=>{const ae=G.filter(U=>U.current<U.amount);return ae.length===0?"":"Requiere: "+ae.map(U=>`${U.text} (${c(U.amount,ge)})`).join(", ")},y=75,R=200,C=500,P=2e3,I=1e4,S=2e4,l={scrap:1e4,metalRefinado:25},A=G=>Math.floor(a/G),H=A(y),J=n==="max"?H:Math.min(n,H),K=A(R),L=n==="max"?K:Math.min(n,K),W=A(C),X=n==="max"?W:Math.min(n,W),Y=A(P),Z=n==="max"?Y:Math.min(n,Y),_=A(I),B=n==="max"?_:Math.min(n,_),F=A(S),Q=n==="max"?F:Math.min(n,F),ee=Math.min(Math.floor(a/l.scrap),Math.floor(z/l.metalRefinado)),se=n==="max"?ee:Math.min(n,ee),[O,he]=ve.useState(!0),V=h*3+g*10+N*30+v*50+q*75+$*150+b*250;return e.jsx("div",{className:"energy-view-container",children:e.jsxs("div",{className:"energy-content-area",ref:pe,children:[e.jsx("button",{onClick:xe,className:"close-button",children:"×"}),e.jsxs("div",{className:"energy-summary",children:[e.jsxs("div",{className:"summary-header",onClick:()=>he(!O),children:[e.jsx("h3",{style:{color:"#06B6D4"},children:"RESUMEN ENERGÉTICO"}),e.jsx("span",{className:`collapse-arrow ${O?"open":""}`,children:"▶"})]}),O&&e.jsxs("div",{className:"energy-summary-content",children:[e.jsxs("div",{className:"summary-item",children:[e.jsx("span",{className:"summary-label",children:"Almacenado:"}),e.jsxs("span",{className:"summary-value",children:[c(w,s)," / ",c(ie,s)]})]}),e.jsxs("div",{className:"summary-item",children:[e.jsx("span",{className:"summary-label",children:"Balance:"}),e.jsxs("span",{className:"summary-value",style:{color:V>=D?"#22C55E":"#EF4444"},children:[(V-D).toFixed(1),"/s"]})]}),e.jsxs("div",{className:"summary-details",children:["(Producción: +",c(V,s),"/s | Consumo: -",c(D,s),"/s)"]})]})]}),e.jsx(qe,{buyAmount:n,onSetBuyAmount:me}),e.jsxs("div",{className:`energy-item ${a>=y?"unlocked":""}`,children:[e.jsxs("div",{className:"energy-item-content",children:[e.jsx("h3",{style:{color:"#F59E0B"},children:"Panel Solar Básico"}),e.jsxs("p",{children:["Producción: +",c(3,s)," energía/segundo"]}),e.jsxs("p",{children:["Coste: ",c(y,s)," chatarra"]}),e.jsxs("p",{children:["Instalados: ",h," ",r.queue>0?`| En cola: ${r.queue} | Tiempo: ~${t(r.queue*r.time)}`:""]}),r.queue>0&&e.jsxs("div",{children:[e.jsxs("p",{className:"time-info",children:["T/U: ",t(r.time)]}),e.jsx(T,{progress:r.progress,time:r.time})]}),e.jsxs("div",{className:"build-actions",children:[e.jsxs(M,{onClick:ce,disabled:a<y,tooltipText:k([{amount:y,current:a,text:"Chatarra"}],s),className:`build-button ${a>=y?"unlocked":""}`,children:["Encargar Panel Solar ",J>0&&`(${J})`]}),r.queue>0&&e.jsx(E,{itemName:"solarPanels",onCancel:f})]})]}),e.jsx("img",{src:fe,alt:"Panel Solar Básico",className:"energy-item-image"})]}),e.jsxs("div",{className:`energy-item ${a>=R&&(h>=5||i.mediumSolarPanels)?"unlocked":""} ${h>=5||i.mediumSolarPanels?"":"locked"}`,children:[e.jsxs("div",{className:"energy-item-content",children:[e.jsx("h3",{style:{color:"#F59E0B"},children:"Panel Solar Medio"}),e.jsxs("p",{children:["Producción: +",c(10,s)," energía/segundo"]}),e.jsxs("p",{children:["Coste: ",c(R,s)," chatarra"]}),e.jsxs("p",{children:["Instalados: ",g," ",o.queue>0?`| En cola: ${o.queue} | Tiempo: ~${t(o.queue*o.time)}`:""]}),e.jsx("p",{children:"Requisitos: 5 Paneles Solares Básicos (solo para el primero)"}),o.queue>0&&e.jsxs("div",{children:[e.jsxs("p",{className:"time-info",children:["T/U: ",t(o.time)]}),e.jsx(T,{progress:o.progress,time:o.time})]}),e.jsxs("div",{className:"build-actions",children:[e.jsxs(M,{onClick:ne,disabled:a<R||h<5&&!i.mediumSolarPanels,tooltipText:k([{amount:R,current:a,text:"Chatarra"},{amount:5,current:h,text:"Paneles Solares Básicos"}],s),className:`build-button ${a>=R&&(h>=5||i.mediumSolarPanels)?"unlocked":""}`,children:["Encargar Panel Medio ",L>0&&`(${L})`]}),o.queue>0&&e.jsx(E,{itemName:"mediumSolarPanels",onCancel:f})]}),h<5&&!i.mediumSolarPanels&&e.jsx("p",{className:"requirement-warning",children:"⚠️ Necesitas 5 Paneles Solares Básicos"})]}),e.jsx("img",{src:ke,alt:"Panel Solar Medio",className:"energy-item-image"})]}),e.jsxs("div",{className:`energy-item ${a>=C&&(g>=1||i.advancedSolar)?"unlocked":""} ${g>=1||i.advancedSolar?"":"locked"}`,children:[e.jsxs("div",{className:"energy-item-content",children:[e.jsx("h3",{style:{color:"#06B6D4"},children:"Panel Solar Avanzado"}),e.jsxs("p",{children:["Producción: +",c(30,s)," energía/segundo"]}),e.jsxs("p",{children:["Coste: ",c(C,s)," chatarra"]}),e.jsxs("p",{children:["Instalados: ",N," ",d.queue>0?`| En cola: ${d.queue} | Tiempo: ~${t(d.queue*d.time)}`:""]}),e.jsx("p",{children:"Requisitos: 1 Panel Solar Medio (solo para el primero)"}),d.queue>0&&e.jsxs("div",{children:[e.jsxs("p",{className:"time-info",children:["T/U: ",t(d.time)]}),e.jsx(T,{progress:d.progress,time:d.time})]}),e.jsxs("div",{className:"build-actions",children:[e.jsxs(M,{onClick:te,disabled:a<C||g<1&&!i.advancedSolar,tooltipText:k([{amount:C,current:a,text:"Chatarra"},{amount:1,current:g,text:"Paneles Solares Medios"}],s),className:`build-button ${a>=C&&(g>=1||i.advancedSolar)?"unlocked":""}`,children:["Encargar Panel Avanzado ",X>0&&`(${X})`]}),d.queue>0&&e.jsx(E,{itemName:"advancedSolar",onCancel:f})]}),g<1&&!i.advancedSolar&&e.jsx("p",{className:"requirement-warning",children:"⚠️ Necesitas 1 Panel Solar Medio"})]}),e.jsx("img",{src:Me,alt:"Panel Solar Avanzado",className:"energy-item-image"})]}),e.jsxs("div",{className:`energy-item ${a>=P&&(N>=3||i.energyCores)?"unlocked":""} ${N>=3||i.energyCores?"":"locked"}`,children:[e.jsxs("div",{className:"energy-item-content",children:[e.jsx("h3",{style:{color:"#F87171"},children:"Núcleo Energético Averiado"}),e.jsxs("p",{children:["Producción: +",c(50,s)," energía/segundo"]}),e.jsxs("p",{children:["Capacidad: +",c(100,s)," energía máxima"]}),e.jsxs("p",{children:["Coste: ",c(P,s)," chatarra"]}),e.jsxs("p",{children:["Instalados: ",v," ",m.queue>0?`| En cola: ${m.queue} | Tiempo: ~${t(m.queue*m.time)}`:""]}),e.jsx("p",{children:"Requisitos: 3 Paneles Solares Avanzados (solo para el primero)"}),m.queue>0&&e.jsxs("div",{children:[e.jsxs("p",{className:"time-info",children:["T/U: ",t(m.time)]}),e.jsx(T,{progress:m.progress,time:m.time})]}),e.jsxs("div",{className:"build-actions",children:[e.jsxs(M,{onClick:le,disabled:a<P||N<3&&!i.energyCores,tooltipText:k([{amount:P,current:a,text:"Chatarra"},{amount:3,current:N,text:"Paneles Solares Avanzados"}],s),className:`build-button ${a>=P&&(N>=3||i.energyCores)?"unlocked":""}`,children:["Encargar Núcleo Averiado ",Z>0&&`(${Z})`]}),m.queue>0&&e.jsx(E,{itemName:"energyCores",onCancel:f})]}),N<3&&!i.energyCores&&e.jsx("p",{className:"requirement-warning",children:"⚠️ Necesitas 3 Paneles Solares Avanzados"})]}),e.jsx("img",{src:Ee,alt:"Núcleo Energético Averiado",className:"energy-item-image"})]}),e.jsxs("div",{className:`energy-item ${a>=I&&(v>=3||i.stabilizedEnergyCores)?"unlocked":""} ${v>=3||i.stabilizedEnergyCores?"":"locked"}`,children:[e.jsxs("div",{className:"energy-item-content",children:[e.jsx("h3",{style:{color:"#4ADE80"},children:"Núcleo Energético Estabilizado"}),e.jsxs("p",{children:["Producción: +",c(75,s)," energía/segundo"]}),e.jsxs("p",{children:["Capacidad: +",c(150,s)," energía máxima"]}),e.jsxs("p",{children:["Coste: ",c(I,s)," chatarra"]}),e.jsxs("p",{children:["Instalados: ",q," ",x.queue>0?`| En cola: ${x.queue} | Tiempo: ~${t(x.queue*x.time)}`:""]}),e.jsx("p",{children:"Requisitos: 3 Núcleos Averiados (solo para el primero)"}),x.queue>0&&e.jsxs("div",{children:[e.jsxs("p",{className:"time-info",children:["T/U: ",t(x.time)]}),e.jsx(T,{progress:x.progress,time:x.time})]}),e.jsxs("div",{className:"build-actions",children:[e.jsxs(M,{onClick:re,disabled:a<I||v<3&&!i.stabilizedEnergyCores,tooltipText:k([{amount:I,current:a,text:"Chatarra"},{amount:3,current:v,text:"Núcleos Averiados"}],s),className:`build-button ${a>=I&&(v>=3||i.stabilizedEnergyCores)?"unlocked":""}`,children:["Encargar Núcleo Estabilizado ",B>0&&`(${B})`]}),x.queue>0&&e.jsx(E,{itemName:"stabilizedEnergyCores",onCancel:f})]}),v<3&&!i.stabilizedEnergyCores&&e.jsx("p",{className:"requirement-warning",children:"⚠️ Necesitas 3 Núcleos Averiados"})]}),e.jsx("img",{src:Te,alt:"Núcleo Energético Estabilizado",className:"energy-item-image"})]}),e.jsxs("div",{className:`energy-item ${a>=S&&(q>=3||i.empoweredEnergyCores)?"unlocked":""} ${q>=3||i.empoweredEnergyCores?"":"locked"}`,children:[e.jsxs("div",{className:"energy-item-content",children:[e.jsx("h3",{style:{color:"#22C55E"},children:"Núcleo Energético Potenciado"}),e.jsxs("p",{children:["Producción: +",c(150,s)," energía/segundo"]}),e.jsxs("p",{children:["Capacidad: +",c(300,s)," energía máxima"]}),e.jsxs("p",{children:["Coste: ",c(S,s)," chatarra"]}),e.jsxs("p",{children:["Instalados: ",$," ",j.queue>0?`| En cola: ${j.queue} | Tiempo: ~${t(j.queue*j.time)}`:""]}),e.jsx("p",{children:"Requisitos: 3 Núcleos Estabilizados (solo para el primero)"}),j.queue>0&&e.jsxs("div",{children:[e.jsxs("p",{className:"time-info",children:["T/U: ",t(j.time)]}),e.jsx(T,{progress:j.progress,time:j.time})]}),e.jsxs("div",{className:"build-actions",children:[e.jsxs(M,{onClick:oe,disabled:a<S||q<3&&!i.empoweredEnergyCores,tooltipText:k([{amount:S,current:a,text:"Chatarra"},{amount:3,current:q,text:"Núcleos Estabilizados"}],s),className:`build-button ${a>=S&&(q>=3||i.empoweredEnergyCores)?"unlocked":""}`,children:["Encargar Núcleo Potenciado ",Q>0&&`(${Q})`]}),j.queue>0&&e.jsx(E,{itemName:"empoweredEnergyCores",onCancel:f})]}),q<3&&!i.empoweredEnergyCores&&e.jsx("p",{className:"requirement-warning",children:"⚠️ Necesitas 3 Núcleos Estabilizados"})]}),e.jsx("img",{src:ye,alt:"Núcleo Energético Potenciado",className:"energy-item-image"})]}),je.fusionTech>0&&e.jsxs("div",{className:`energy-item ${a>=l.scrap&&z>=l.metalRefinado&&$>=1?"unlocked":""} ${$>=1?"":"locked"}`,children:[e.jsxs("div",{className:"energy-item-content",children:[e.jsx("h3",{style:{color:"#8B5CF6"},children:"Reactor de Fusión"}),e.jsxs("p",{children:["Producción: +",c(250,s)," energía/segundo"]}),e.jsxs("p",{children:["Capacidad: +",c(1e3,s)," energía máxima"]}),e.jsxs("p",{children:["Coste: ",c(l.scrap,s)," Chatarra + ",c(l.metalRefinado,s)," Metal Refinado"]}),e.jsxs("p",{children:["Construidos: ",b," ",p.queue>0?`| En cola: ${p.queue} | Tiempo: ~${t(p.queue*p.time)}`:""]}),e.jsx("p",{children:"Requisitos: 1 Núcleo Potenciado (anteriormente 10 averiados)"}),p.queue>0&&e.jsxs("div",{children:[e.jsxs("p",{className:"time-info",children:["T/U: ",t(p.time)]}),e.jsx(T,{progress:p.progress,time:p.time})]}),e.jsxs("div",{className:"build-actions",children:[e.jsxs(M,{onClick:de,disabled:a<l.scrap||z<l.metalRefinado||$<1,tooltipText:k([{amount:l.scrap,current:a,text:"Chatarra"},{amount:l.metalRefinado,current:z,text:"Metal Refinado"},{amount:1,current:$,text:"Núcleos Potenciados"}],s),className:`build-button ${a>=l.scrap&&z>=l.metalRefinado&&$>=1?"unlocked":""}`,children:["Encargar Reactor de Fusión ",se>0&&`(${se})`]}),p.queue>0&&e.jsx(E,{itemName:"fusionReactor",onCancel:f})]}),$<1&&e.jsx("p",{className:"requirement-warning",children:"⚠️ Necesitas 1 Núcleo Potenciado"})]}),e.jsx("img",{src:Re,alt:"Reactor de Fusión",className:"energy-item-image"})]})]})})});export{Ae as default};
