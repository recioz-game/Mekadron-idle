import{R as he,j as e,f as o,a as c,m as pe,s as fe,n as ge,o as je,p as Ce}from"./index-28cc5e8d.js";import{B as be,a as g}from"./BotonConTooltip-c16e3930.js";import{u as Ee}from"./useDragToScroll-720c5975.js";import{Q as v}from"./QueueControls-c952c21b.js";const R=({progress:T,time:a})=>e.jsx("div",{className:"progress-bar-container",children:e.jsx("div",{className:"progress-bar",style:{width:`${T/a*100}%`}})}),ve=he.memo(({resources:T,queues:a,onCraftRefinedMetal:q,onCraftStructuralSteel:ee,onCraftHullPlate:ae,onCraftSuperconductorWiring:te,onCraftFuelRod:re,onCraftPurifiedMetal:se,upgrades:oe,buyAmount:r,onSetBuyAmount:ce,onClose:ie,onCancel:j,numberFormat:t})=>{var Q,V,W,z,G,H,J,K,L,O,U,X,Y,Z,_;const{scrap:x,energy:s,metalRefinado:u,aceroEstructural:C,fragmentosPlaca:k,circuitosDañados:P,placasCasco:ne,cableadoSuperconductor:le,barraCombustible:de}=T,h={scrap:1e3,energy:100},i={scrap:1e3,metal:10,energy:250},n={fragmentos:10,acero:5,energy:500},l={circuitos:10,metal:25,energy:1e3},d={metal:10,acero:5,energy:1500},p={scrap:5e3,energy:500},b=Math.min(Math.floor(x/h.scrap),Math.floor(s/h.energy)),S=r==="max"?b:Math.min(r,b),E=Math.min(Math.floor(x/i.scrap),Math.floor(u/i.metal),Math.floor(s/i.energy)),B=r==="max"?E:Math.min(r,E),N=Math.min(Math.floor(k/n.fragmentos),Math.floor(C/n.acero),Math.floor(s/n.energy)),w=r==="max"?N:Math.min(r,N),y=Math.min(Math.floor(P/l.circuitos),Math.floor(u/l.metal),Math.floor(s/l.energy)),D=r==="max"?y:Math.min(r,y),M=Math.min(Math.floor(u/d.metal),Math.floor(C/d.acero),Math.floor(s/d.energy)),I=r==="max"?M:Math.min(r,M),m=Math.min(Math.floor(x/p.scrap),Math.floor(s/p.energy)),A=r==="max"?m:Math.min(r,m),me=Ee(),f=(ue,xe)=>{const F=ue.filter($=>$.current<$.amount);return F.length===0?"":"Requiere: "+F.map($=>`${$.text} (${o($.amount,xe)})`).join(", ")};return e.jsx("div",{className:"foundry-view-container",children:e.jsxs("div",{className:"foundry-content-area",ref:me,children:[e.jsx("button",{onClick:ie,className:"close-button",children:"×"}),e.jsx(be,{buyAmount:r,onSetBuyAmount:ce}),e.jsxs("div",{className:`foundry-item ${b>0?"unlocked":""}`,children:[e.jsxs("div",{className:"foundry-item-content",children:[e.jsx("h4",{style:{color:"#F59E0B"},children:"Metal Refinado"}),e.jsxs("p",{children:["Coste: ",o(h.scrap,t)," Chatarra + ",o(h.energy,t)," Energía"]}),e.jsxs("p",{children:["En Posesión: ",o(u,t)," ",((Q=a.metalRefinado)==null?void 0:Q.queue)>0?`| En cola: ${a.metalRefinado.queue} | Tiempo: ~${c(a.metalRefinado.queue*a.metalRefinado.time)}`:""]}),((V=a.metalRefinado)==null?void 0:V.queue)>0&&e.jsxs("div",{children:[e.jsxs("p",{className:"time-info",children:["Tiempo/u: ",c(a.metalRefinado.time)]}),e.jsx(R,{progress:a.metalRefinado.progress,time:a.metalRefinado.time})]}),e.jsxs("div",{className:"build-actions",children:[e.jsxs(g,{onClick:q,disabled:b<=0,tooltipText:f([{amount:h.scrap,current:x,text:"Chatarra"},{amount:h.energy,current:s,text:"Energía"}],t),className:`build-button ${b>0?"unlocked":""}`,children:["Encargar ",S>0&&`(${S})`]}),((W=a.metalRefinado)==null?void 0:W.queue)>0&&e.jsx(v,{itemName:"metalRefinado",onCancel:j})]})]}),e.jsx("img",{src:pe,alt:"Metal Refinado",className:"foundry-item-image"})]}),e.jsxs("div",{className:`foundry-item ${E>0?"unlocked":""}`,children:[e.jsxs("div",{className:"foundry-item-content",children:[e.jsx("h4",{style:{color:"#06B6D4"},children:"Acero Estructural"}),e.jsxs("p",{children:["Coste: ",o(i.scrap,t)," Chatarra + ",i.metal," Metal Refinado + ",i.energy," Energía"]}),e.jsxs("p",{children:["En Posesión: ",o(C,t)," ",((z=a.aceroEstructural)==null?void 0:z.queue)>0?`| En cola: ${a.aceroEstructural.queue} | Tiempo: ~${c(a.aceroEstructural.queue*a.aceroEstructural.time)}`:""]}),((G=a.aceroEstructural)==null?void 0:G.queue)>0&&e.jsxs("div",{children:[e.jsxs("p",{className:"time-info",children:["Tiempo/u: ",c(a.aceroEstructural.time)]}),e.jsx(R,{progress:a.aceroEstructural.progress,time:a.aceroEstructural.time})]}),e.jsxs("div",{className:"build-actions",children:[e.jsxs(g,{onClick:ee,disabled:E<=0,tooltipText:f([{amount:i.scrap,current:x,text:"Chatarra"},{amount:i.metal,current:u,text:"Metal Refinado"},{amount:i.energy,current:s,text:"Energía"}],t),className:`build-button ${E>0?"unlocked":""}`,children:["Encargar ",B>0&&`(${B})`]}),((H=a.aceroEstructural)==null?void 0:H.queue)>0&&e.jsx(v,{itemName:"aceroEstructural",onCancel:j})]})]}),e.jsx("img",{src:fe,alt:"Acero Estructural",className:"foundry-item-image"})]}),e.jsx("h3",{className:"section-title",children:"Componentes de Nave"}),e.jsxs("div",{className:`foundry-item ${N>0?"unlocked":""}`,children:[e.jsxs("div",{className:"foundry-item-content",children:[e.jsx("h4",{style:{color:"#F59E0B"},children:"Placa de Casco Reforzado"}),e.jsxs("p",{children:["Coste: ",n.fragmentos," Fragmentos de Placa + ",n.acero," Acero Estructural + ",n.energy," Energía"]}),e.jsxs("p",{children:["En Posesión: ",o(ne,t)," ",((J=a.placasCasco)==null?void 0:J.queue)>0?`| En cola: ${a.placasCasco.queue} | Tiempo: ~${c(a.placasCasco.queue*a.placasCasco.time)}`:""]}),((K=a.placasCasco)==null?void 0:K.queue)>0&&e.jsxs("div",{children:[e.jsxs("p",{className:"time-info",children:["Tiempo/u: ",c(a.placasCasco.time)]}),e.jsx(R,{progress:a.placasCasco.progress,time:a.placasCasco.time})]}),e.jsxs("div",{className:"build-actions",children:[e.jsxs(g,{onClick:ae,disabled:N<=0,tooltipText:f([{amount:n.fragmentos,current:k,text:"Fragmentos de Placa"},{amount:n.acero,current:C,text:"Acero Estructural"},{amount:n.energy,current:s,text:"Energía"}],t),className:`build-button ${N>0?"unlocked":""}`,children:["Encargar ",w>0&&`(${w})`]}),((L=a.placasCasco)==null?void 0:L.queue)>0&&e.jsx(v,{itemName:"placasCasco",onCancel:j})]})]}),e.jsx("img",{src:ge,alt:"Placa de Casco",className:"foundry-item-image"})]}),e.jsxs("div",{className:`foundry-item ${y>0?"unlocked":""}`,children:[e.jsxs("div",{className:"foundry-item-content",children:[e.jsx("h4",{style:{color:"#06B6D4"},children:"Cableado de Superconductores"}),e.jsxs("p",{children:["Coste: ",l.circuitos," Circuitos Dañados + ",l.metal," Metal Refinado + ",l.energy," Energía"]}),e.jsxs("p",{children:["En Posesión: ",o(le,t)," ",((O=a.cableadoSuperconductor)==null?void 0:O.queue)>0?`| En cola: ${a.cableadoSuperconductor.queue} | Tiempo: ~${c(a.cableadoSuperconductor.queue*a.cableadoSuperconductor.time)}`:""]}),((U=a.cableadoSuperconductor)==null?void 0:U.queue)>0&&e.jsxs("div",{children:[e.jsxs("p",{className:"time-info",children:["Tiempo/u: ",c(a.cableadoSuperconductor.time)]}),e.jsx(R,{progress:a.cableadoSuperconductor.progress,time:a.cableadoSuperconductor.time})]}),e.jsxs("div",{className:"build-actions",children:[e.jsxs(g,{onClick:te,disabled:y<=0,tooltipText:f([{amount:l.circuitos,current:P,text:"Circuitos Dañados"},{amount:l.metal,current:u,text:"Metal Refinado"},{amount:l.energy,current:s,text:"Energía"}],t),className:`build-button ${y>0?"unlocked":""}`,children:["Encargar ",D>0&&`(${D})`]}),((X=a.cableadoSuperconductor)==null?void 0:X.queue)>0&&e.jsx(v,{itemName:"cableadoSuperconductor",onCancel:j})]})]}),e.jsx("img",{src:je,alt:"Cableado",className:"foundry-item-image"})]}),e.jsxs("div",{className:`foundry-item ${M>0?"unlocked":""}`,children:[e.jsxs("div",{className:"foundry-item-content",children:[e.jsx("h4",{style:{color:"#FCD34D"},children:"Barra de Combustible"}),e.jsxs("p",{children:["Coste: ",d.metal," Metal Refinado + ",d.acero," Acero Estructural + ",d.energy," Energía"]}),e.jsxs("p",{children:["En Posesión: ",o(de,t)," ",((Y=a.barraCombustible)==null?void 0:Y.queue)>0?`| En cola: ${a.barraCombustible.queue} | Tiempo: ~${c(a.barraCombustible.queue*a.barraCombustible.time)}`:""]}),((Z=a.barraCombustible)==null?void 0:Z.queue)>0&&e.jsxs("div",{children:[e.jsxs("p",{className:"time-info",children:["Tiempo/u: ",c(a.barraCombustible.time)]}),e.jsx(R,{progress:a.barraCombustible.progress,time:a.barraCombustible.time})]}),e.jsxs("div",{className:"build-actions",children:[e.jsxs(g,{onClick:re,disabled:M<=0,tooltipText:f([{amount:d.metal,current:u,text:"Metal Refinado"},{amount:d.acero,current:C,text:"Acero Estructural"},{amount:d.energy,current:s,text:"Energía"}],t),className:`build-button ${M>0?"unlocked":""}`,children:["Encargar ",I>0&&`(${I})`]}),((_=a.barraCombustible)==null?void 0:_.queue)>0&&e.jsx(v,{itemName:"barraCombustible",onCancel:j})]})]}),e.jsx("img",{src:Ce,alt:"Barra de Combustible",className:"foundry-item-image"})]}),oe.scrapPurification>0&&e.jsx("div",{className:`crafting-item ${m>0?"available":""}`,style:{borderColor:m>0?"#A855F7":""},children:e.jsxs("div",{className:"crafting-item-content full-width",children:[e.jsxs("div",{className:"crafting-item-info",children:[e.jsx("h4",{style:{color:"#A855F7"},children:"Purificación de Chatarra"}),e.jsx("p",{children:"Convierte una gran cantidad de recursos básicos en Metal Refinado. Es ineficiente, pero útil en emergencias."}),e.jsxs("p",{children:["Coste: ",o(p.scrap,t)," Chatarra + ",o(p.energy,t)," Energía"]})]}),e.jsxs(g,{onClick:se,disabled:m<=0,tooltipText:f([{amount:p.scrap,current:x,text:"Chatarra"},{amount:p.energy,current:s,text:"Energía"}],t),className:`build-button ${m>0?"unlocked":""}`,style:{backgroundColor:m>0?"#A855F7":"",color:m>0?"white":""},children:["Purificar Chatarra ",A>0&&`(${A})`]})]})})]})})});export{ve as default};
