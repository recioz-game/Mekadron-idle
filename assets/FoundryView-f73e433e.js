import{R as S,j as s,f as i,a as q,i as F,s as b,k as Q,l as ss,m as es}from"./index-bd01013b.js";import{B as ts,a as M}from"./BotonConTooltip-00fde3ca.js";import{u as is}from"./useDragToScroll-836d6b51.js";import{Q as C}from"./QueueControls-2dbc4c6d.js";const E=({progress:h,time:t})=>s.jsx("div",{className:"progress-bar-container",children:s.jsx("div",{className:"progress-bar",style:{width:`${h/t*100}%`}})}),ls=S.memo(({scrap:h,energy:t,metalRefinado:j,aceroEstructural:v,fragmentosPlaca:I,circuitosDañados:U,placasCasco:D,cableadoSuperconductor:V,barraCombustible:W,metalRefinadoQueue:n,aceroEstructuralQueue:r,placasCascoQueue:o,cableadoSuperconductorQueue:a,barraCombustibleQueue:l,onCraftRefinedMetal:z,onCraftStructuralSteel:G,onCraftHullPlate:H,onCraftSuperconductorWiring:J,onCraftFuelRod:K,onCraftPurifiedMetal:L,upgrades:O,buyAmount:g,onSetBuyAmount:X,onClose:Y,onCancel:u,numberFormat:e})=>{const p={scrap:1e3,energy:100},c={scrap:1e3,metal:10,energy:250},d={fragmentos:10,acero:5,energy:500},m={circuitos:10,metal:25,energy:1e3},x={metal:10,acero:5,energy:1500},N={scrap:5e3,energy:500},T=Math.min(Math.floor(h/p.scrap),Math.floor(t/p.energy)),k=Math.min(Math.floor(h/c.scrap),Math.floor(j/c.metal),Math.floor(t/c.energy)),P=Math.min(Math.floor(I/d.fragmentos),Math.floor(v/d.acero),Math.floor(t/d.energy)),B=Math.min(Math.floor(U/m.circuitos),Math.floor(j/m.metal),Math.floor(t/m.energy)),w=Math.min(Math.floor(j/x.metal),Math.floor(v/x.acero),Math.floor(t/x.energy)),f=Math.min(Math.floor(h/N.scrap),Math.floor(t/N.energy)),Z=is(),y=(_,R)=>{const A=_.filter($=>$.current<$.amount);return A.length===0?"":"Requiere: "+A.map($=>`${$.text} (${i($.amount,R)})`).join(", ")};return s.jsx("div",{className:"foundry-view-container",children:s.jsxs("div",{className:"foundry-content-area",ref:Z,children:[s.jsx("button",{onClick:Y,className:"close-button",children:"×"}),s.jsx(ts,{buyAmount:g,onSetBuyAmount:X}),s.jsxs("div",{className:`foundry-item ${T>0?"unlocked":""}`,children:[s.jsxs("div",{className:"foundry-item-content",children:[s.jsx("h4",{style:{color:"#F59E0B"},children:"Metal Refinado"}),s.jsxs("p",{children:["Coste: ",i(p.scrap,e)," Chatarra + ",i(p.energy,e)," Energía"]}),s.jsxs("p",{children:["En Posesión: ",i(j,e)," | En cola: ",n.queue," ",n.queue>0?`| Tiempo: ~${q(n.queue*n.time)}`:""]}),n.queue>0&&s.jsxs("div",{children:[s.jsxs("p",{className:"time-info",children:["T/U: ",n.time,"s"]}),s.jsx(E,{progress:n.progress,time:n.time})]}),s.jsxs("div",{className:"build-actions",children:[s.jsxs(M,{onClick:z,disabled:T<=0,tooltipText:y([{amount:p.scrap,current:h,text:"Chatarra"},{amount:p.energy,current:t,text:"Energía"}],e),className:`build-button ${T>0?"unlocked":""}`,children:["Encargar ",g==="max"&&`(${T})`]}),n.queue>0&&s.jsx(C,{itemName:"metalRefinado",onCancel:u})]})]}),s.jsx("img",{src:F,alt:"Metal Refinado",className:"foundry-item-image"})]}),s.jsxs("div",{className:`foundry-item ${k>0?"unlocked":""}`,children:[s.jsxs("div",{className:"foundry-item-content",children:[s.jsx("h4",{style:{color:"#06B6D4"},children:"Acero Estructural"}),s.jsxs("p",{children:["Coste: ",i(c.scrap,e)," Chatarra + ",c.metal," Metal + ",c.energy," Energía"]}),s.jsxs("p",{children:["En Posesión: ",i(v,e)," | En cola: ",r.queue," ",r.queue>0?`| Tiempo: ~${q(r.queue*r.time)}`:""]}),r.queue>0&&s.jsxs("div",{children:[s.jsxs("p",{className:"time-info",children:["T/U: ",r.time,"s"]}),s.jsx(E,{progress:r.progress,time:r.time})]}),s.jsxs("div",{className:"build-actions",children:[s.jsxs(M,{onClick:G,disabled:k<=0,tooltipText:y([{amount:c.scrap,current:h,text:"Chatarra"},{amount:c.metal,current:j,text:"Metal"},{amount:c.energy,current:t,text:"Energía"}],e),className:`build-button ${k>0?"unlocked":""}`,children:["Encargar ",g==="max"&&`(${k})`]}),r.queue>0&&s.jsx(C,{itemName:"aceroEstructural",onCancel:u})]})]}),s.jsx("img",{src:b,alt:"Acero Estructural",className:"foundry-item-image"})]}),s.jsx("h3",{className:"section-title",children:"Componentes de Nave"}),s.jsxs("div",{className:`foundry-item ${P>0?"unlocked":""}`,children:[s.jsxs("div",{className:"foundry-item-content",children:[s.jsx("h4",{style:{color:"#F59E0B"},children:"Placa de Casco Reforzado"}),s.jsxs("p",{children:["Coste: ",d.fragmentos," Fragmentos + ",d.acero," Acero + ",d.energy," Energía"]}),s.jsxs("p",{children:["En Posesión: ",i(D,e)," | En cola: ",o.queue," ",o.queue>0?`| Tiempo: ~${q(o.queue*o.time)}`:""]}),o.queue>0&&s.jsxs("div",{children:[s.jsxs("p",{className:"time-info",children:["T/U: ",o.time,"s"]}),s.jsx(E,{progress:o.progress,time:o.time})]}),s.jsxs("div",{className:"build-actions",children:[s.jsxs(M,{onClick:H,disabled:P<=0,tooltipText:y([{amount:d.fragmentos,current:I,text:"Fragmentos"},{amount:d.acero,current:v,text:"Acero"},{amount:d.energy,current:t,text:"Energía"}],e),className:`build-button ${P>0?"unlocked":""}`,children:["Encargar ",g==="max"&&`(${P})`]}),o.queue>0&&s.jsx(C,{itemName:"placasCasco",onCancel:u})]})]}),s.jsx("img",{src:Q,alt:"Placa de Casco",className:"foundry-item-image"})]}),s.jsxs("div",{className:`foundry-item ${B>0?"unlocked":""}`,children:[s.jsxs("div",{className:"foundry-item-content",children:[s.jsx("h4",{style:{color:"#06B6D4"},children:"Cableado de Superconductores"}),s.jsxs("p",{children:["Coste: ",m.circuitos," Circuitos + ",m.metal," Metal + ",m.energy," Energía"]}),s.jsxs("p",{children:["En Posesión: ",i(V,e)," | En cola: ",a.queue," ",a.queue>0?`| Tiempo: ~${q(a.queue*a.time)}`:""]}),a.queue>0&&s.jsxs("div",{children:[s.jsxs("p",{className:"time-info",children:["T/U: ",a.time,"s"]}),s.jsx(E,{progress:a.progress,time:a.time})]}),s.jsxs("div",{className:"build-actions",children:[s.jsxs(M,{onClick:J,disabled:B<=0,tooltipText:y([{amount:m.circuitos,current:U,text:"Circuitos"},{amount:m.metal,current:j,text:"Metal"},{amount:m.energy,current:t,text:"Energía"}],e),className:`build-button ${B>0?"unlocked":""}`,children:["Encargar ",g==="max"&&`(${B})`]}),a.queue>0&&s.jsx(C,{itemName:"cableadoSuperconductor",onCancel:u})]})]}),s.jsx("img",{src:ss,alt:"Cableado",className:"foundry-item-image"})]}),s.jsxs("div",{className:`foundry-item ${w>0?"unlocked":""}`,children:[s.jsxs("div",{className:"foundry-item-content",children:[s.jsx("h4",{style:{color:"#FCD34D"},children:"Barra de Combustible"}),s.jsxs("p",{children:["Coste: ",x.metal," Metal + ",x.acero," Acero + ",x.energy," Energía"]}),s.jsxs("p",{children:["En Posesión: ",i(W,e)," | En cola: ",l.queue," ",l.queue>0?`| Tiempo: ~${q(l.queue*l.time)}`:""]}),l.queue>0&&s.jsxs("div",{children:[s.jsxs("p",{className:"time-info",children:["T/U: ",l.time,"s"]}),s.jsx(E,{progress:l.progress,time:l.time})]}),s.jsxs("div",{className:"build-actions",children:[s.jsxs(M,{onClick:K,disabled:w<=0,tooltipText:y([{amount:x.metal,current:j,text:"Metal"},{amount:x.acero,current:v,text:"Acero"},{amount:x.energy,current:t,text:"Energía"}],e),className:`build-button ${w>0?"unlocked":""}`,children:["Encargar ",g==="max"&&`(${w})`]}),l.queue>0&&s.jsx(C,{itemName:"barraCombustible",onCancel:u})]})]}),s.jsx("img",{src:es,alt:"Barra de Combustible",className:"foundry-item-image"})]}),O.scrapPurification>0&&s.jsx("div",{className:`crafting-item ${f>0?"available":""}`,style:{borderColor:f>0?"#A855F7":""},children:s.jsxs("div",{className:"crafting-item-content full-width",children:[s.jsxs("div",{className:"crafting-item-info",children:[s.jsx("h4",{style:{color:"#A855F7"},children:"Purificación de Chatarra"}),s.jsx("p",{children:"Convierte una gran cantidad de recursos básicos en Metal Refinado. Es ineficiente, pero útil en emergencias."}),s.jsxs("p",{children:["Coste: ",i(N.scrap,e)," Chatarra + ",i(N.energy,e)," Energía"]})]}),s.jsxs(M,{onClick:L,disabled:f<=0,tooltipText:y([{amount:N.scrap,current:h,text:"Chatarra"},{amount:N.energy,current:t,text:"Energía"}],e),className:`build-button ${f>0?"unlocked":""}`,style:{backgroundColor:f>0?"#A855F7":"",color:f>0?"white":""},children:["Purificar Chatarra ",g==="max"&&`(${f})`]})]})})]})})});export{ls as default};
