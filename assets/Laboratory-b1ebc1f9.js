import{r as Ue,l as xt,e as gt,h as wt,R as Pt,j as S,f as ut,i as St,k as _t}from"./index-cc0840f2.js";import{u as Ot}from"./useDragToScroll-9e8e6873.js";var ft={exports:{}},Je={exports:{}},Ke,it;function Et(){if(it)return Ke;it=1;var D="SECRET_DO_NOT_PASS_THIS_OR_YOU_WILL_BE_FIRED";return Ke=D,Ke}var Ze,st;function Rt(){if(st)return Ze;st=1;var D=Et();function Te(){}function pe(){}return pe.resetWarningCache=Te,Ze=function(){function C(ve,X,Me,m,r,u){if(u!==D){var p=new Error("Calling PropTypes validators directly is not supported by the `prop-types` package. Use PropTypes.checkPropTypes() to call them. Read more at http://fb.me/use-check-prop-types");throw p.name="Invariant Violation",p}}C.isRequired=C;function V(){return C}var ae={array:C,bigint:C,bool:C,func:C,number:C,object:C,string:C,symbol:C,any:C,arrayOf:V,element:C,elementType:C,instanceOf:V,node:C,objectOf:V,oneOf:V,oneOfType:V,shape:V,exact:V,checkPropTypes:pe,resetWarningCache:Te};return ae.PropTypes=ae,ae},Ze}var lt;function jt(){return lt||(lt=1,Je.exports=Rt()()),Je.exports}(function(D,Te){(function(C,V){D.exports=V(Ue,xt,jt())})(gt,function(pe,C,V){return function(){var ae={"./src/Xarrow/utils/buzzier.js":function(m,r,u){u.r(r),u.d(r,{bzFunction:function(){return p},buzzierMinSols:function(){return a}});var p=function(h,f,y,t){return function(n){return Math.pow(1-n,3)*h+3*Math.pow(1-n,2)*n*f+3*(1-n)*Math.pow(n,2)*y+Math.pow(n,3)*t}},a=function(h,f,y,t){var n=p(h,f,y,t),v=-6*h+12*f-6*y,l=Math.pow(-6*h+12*f-6*y,2)-4*(3*f-3*h)*(-3*h+9*f-9*y+3*t),x=2*(-3*h+9*f-9*y+3*t),w=n((v+Math.sqrt(l))/x),o=n((v-Math.sqrt(l))/x);return[w,o]}},"./src/Xarrow/Xarrow.tsx":function(m,r,u){var p=this&&this.__assign||function(){return p=Object.assign||function(o){for(var d,P=1,M=arguments.length;P<M;P++){d=arguments[P];for(var T in d)Object.prototype.hasOwnProperty.call(d,T)&&(o[T]=d[T])}return o},p.apply(this,arguments)},a=this&&this.__createBinding||(Object.create?function(o,d,P,M){M===void 0&&(M=P),Object.defineProperty(o,M,{enumerable:!0,get:function(){return d[P]}})}:function(o,d,P,M){M===void 0&&(M=P),o[M]=d[P]}),_=this&&this.__setModuleDefault||(Object.create?function(o,d){Object.defineProperty(o,"default",{enumerable:!0,value:d})}:function(o,d){o.default=d}),h=this&&this.__importStar||function(o){if(o&&o.__esModule)return o;var d={};if(o!=null)for(var P in o)P!=="default"&&Object.prototype.hasOwnProperty.call(o,P)&&a(d,o,P);return _(d,o),d},f=this&&this.__spreadArray||function(o,d){for(var P=0,M=d.length,T=o.length;P<M;P++,T++)o[T]=d[P];return o},y=this&&this.__importDefault||function(o){return o&&o.__esModule?o:{default:o}};Object.defineProperty(r,"__esModule",{value:!0});var t=h(u("react")),n=y(u("./src/Xarrow/useXarrowProps.ts")),v=u("./src/Xwrapper.tsx"),l=y(u("./src/Xarrow/propTypes.ts")),x=u("./src/Xarrow/utils/GetPosition.tsx"),w=function(o){var d,P=t.useRef({svgRef:t.useRef(null),lineRef:t.useRef(null),headRef:t.useRef(null),tailRef:t.useRef(null),lineDrawAnimRef:t.useRef(null),lineDashAnimRef:t.useRef(null),headOpacityAnimRef:t.useRef(null)}),M=P.current,T=M.svgRef,k=M.lineRef,ne=M.headRef;M.tailRef;var L=M.lineDrawAnimRef,oe=M.lineDashAnimRef,ie=M.headOpacityAnimRef;t.useContext(v.XarrowContext);var W=n.default(o,P.current),R=W[0],N=R.labels,De=R.lineColor,Ce=R.headColor,_e=R.tailColor,Le=R.strokeWidth,Ne=R.showHead,Ae=R.showTail,Q=R.dashness,e=R.headShape,i=R.tailShape,c=R.showXarrow,b=R.animateDrawing,A=R.zIndex,g=R.passProps,E=R.arrowBodyProps,Oe=R.arrowHeadProps,Fe=R.arrowTailProps,Xe=R.SVGcanvasProps,se=R.divContainerProps,Ee=R.divContainerStyle,K=R.SVGcanvasStyle,G=R._debug,U=R.shouldUpdatePosition;b=o.animateDrawing;var I=t.useState(!b),ze=I[0],Ge=I[1],We=t.useState({}),He=We[1],Be=function(){return He({})},F=t.useState({cx0:0,cy0:0,cw:0,ch:0,x1:0,y1:0,x2:0,y2:0,dx:0,dy:0,absDx:0,absDy:0,cpx1:0,cpy1:0,cpx2:0,cpy2:0,headOrient:0,tailOrient:0,arrowHeadOffset:{x:0,y:0},arrowTailOffset:{x:0,y:0},headOffset:0,excRight:0,excLeft:0,excUp:0,excDown:0,startPoints:[],endPoints:[],mainDivPos:{x:0,y:0},xSign:1,ySign:1,lineLength:0,fHeadSize:1,fTailSize:1,arrowPath:"",labelStartPos:{x:0,y:0},labelMiddlePos:{x:0,y:0},labelEndPos:{x:0,y:0}}),s=F[0],O=F[1];t.useLayoutEffect(function(){if(U.current){var Y=x.getPosition(W,P);O(Y),U.current=!1}});var j=s.x2-s.arrowHeadOffset.x,Ie=s.y2-s.arrowHeadOffset.y,he=s.x1-s.arrowTailOffset.x,we=s.y1-s.arrowTailOffset.y,H=Q.strokeLen+Q.nonStrokeLen,B=1;Q.animation<0&&(Q.animation*=-1,B=-1);var Re,ye,Pe,le,me=0;return b&&ze==!1?(typeof b=="boolean"&&(b=1),ye=b+"s",Re=s.lineLength,le=s.lineLength,Pe=1,b<0&&(d=[me,le],le=d[0],me=d[1],ye=b*-1+"s")):(Re=Q.strokeLen+" "+Q.nonStrokeLen,ye=1/Q.animation+"s",le=H*B,Pe="indefinite",me=0),t.useLayoutEffect(function(){k.current&&O(function(Y){var z,je;return p(p({},Y),{lineLength:(je=(z=k.current)===null||z===void 0?void 0:z.getTotalLength())!==null&&je!==void 0?je:0})})},[k.current]),t.useEffect(function(){var Y=function(){window.addEventListener("resize",Be);var je=function(){var Se,$;Ge(!0),(Se=ie.current)===null||Se===void 0||Se.beginElement(),($=oe.current)===null||$===void 0||$.beginElement()},ue=function(){return ne.current.style.opacity="0"};return L.current&&ne.current&&(L.current.addEventListener("endEvent",je),L.current.addEventListener("beginEvent",ue)),function(){window.removeEventListener("resize",Be),L.current&&(L.current.removeEventListener("endEvent",je),ne.current&&L.current.removeEventListener("beginEvent",ue))}},z=Y();return function(){Ge(!1),z()}},[c]),t.default.createElement("div",p({},se,{style:p({position:"absolute",zIndex:A},Ee)}),c?t.default.createElement(t.default.Fragment,null,t.default.createElement("svg",p({ref:T,width:s.cw,height:s.ch,style:p({position:"absolute",left:s.cx0,top:s.cy0,pointerEvents:"none",border:G?"1px dashed yellow":null},K),overflow:"auto"},Xe),t.default.createElement("path",p({ref:k,d:s.arrowPath,stroke:De,strokeDasharray:Re,strokeWidth:Le,fill:"transparent",pointerEvents:"visibleStroke"},g,E),t.default.createElement(t.default.Fragment,null,ze?t.default.createElement(t.default.Fragment,null,Q.animation?t.default.createElement("animate",{ref:oe,attributeName:"stroke-dashoffset",values:H*B+";0",dur:1/Q.animation+"s",repeatCount:"indefinite"}):null):t.default.createElement(t.default.Fragment,null,b?t.default.createElement("animate",{ref:L,id:"svgEndAnimate",attributeName:"stroke-dashoffset",values:le+";"+me,dur:ye,repeatCount:Pe}):null))),Ae?t.default.createElement("g",p({fill:_e,pointerEvents:"auto",transform:"translate("+he+","+we+") rotate("+s.tailOrient+") scale("+s.fTailSize+")"},g,Fe),i.svgElem):null,Ne?t.default.createElement("g",p({ref:ne,fill:Ce,pointerEvents:"auto",transform:"translate("+j+","+Ie+") rotate("+s.headOrient+") scale("+s.fHeadSize+")",opacity:b&&!ze?0:1},g,Oe),t.default.createElement("animate",{ref:ie,dur:"0.4",attributeName:"opacity",from:"0",to:"1",begin:"indefinite",repeatCount:"0",fill:"freeze"}),e.svgElem):null,G?t.default.createElement(t.default.Fragment,null,t.default.createElement("circle",{r:"5",cx:s.cpx1,cy:s.cpy1,fill:"green"}),t.default.createElement("circle",{r:"5",cx:s.cpx2,cy:s.cpy2,fill:"blue"}),t.default.createElement("rect",{x:s.excLeft,y:s.excUp,width:s.absDx,height:s.absDy,fill:"none",stroke:"pink",strokeWidth:"2px"})):null),N.start?t.default.createElement("div",{style:{transform:s.dx<0?"translate(-100% , -50%)":"translate(-0% , -50%)",width:"max-content",position:"absolute",left:s.cx0+s.labelStartPos.x,top:s.cy0+s.labelStartPos.y-Le-5}},N.start):null,N.middle?t.default.createElement("div",{style:{display:"table",width:"max-content",transform:"translate(-50% , -50%)",position:"absolute",left:s.cx0+s.labelMiddlePos.x,top:s.cy0+s.labelMiddlePos.y}},N.middle):null,N.end?t.default.createElement("div",{style:{transform:s.dx>0?"translate(-100% , -50%)":"translate(-0% , -50%)",width:"max-content",position:"absolute",left:s.cx0+s.labelEndPos.x,top:s.cy0+s.labelEndPos.y+Le+5}},N.end):null,G?t.default.createElement(t.default.Fragment,null,f(f([],s.startPoints),s.endPoints).map(function(Y,z){return t.default.createElement("div",{key:z,style:{background:"gray",opacity:.5,borderRadius:"50%",transform:"translate(-50%, -50%)",height:5,width:5,position:"absolute",left:Y.x-s.mainDivPos.x,top:Y.y-s.mainDivPos.y}})})):null):null)};w.propTypes=l.default,r.default=w},"./src/Xarrow/anchors.ts":function(m,r,u){m=u.nmd(m),Object.defineProperty(r,"__esModule",{value:!0}),r.calcAnchors=void 0;var p=function(_,h){return{middle:{x:_*.5,y:h*.5},left:{x:0,y:h*.5},right:{x:_,y:h*.5},top:{x:_*.5,y:0},bottom:{x:_*.5,y:h}}},a=function(_,h){return _.map(function(f){var y=p(h.right-h.x,h.bottom-h.y),t=y[f.position],n=t.x,v=t.y;return{x:h.x+n+f.offset.x,y:h.y+v+f.offset.y,anchor:f}})};r.calcAnchors=a,u.c[u.s]},"./src/Xarrow/propTypes.ts":function(m,r,u){var p=this&&this.__importDefault||function(P){return P&&P.__esModule?P:{default:P}};Object.defineProperty(r,"__esModule",{value:!0});var a=p(u("prop-types")),_=u("./src/constants.tsx"),h=a.default.oneOf(_.cAnchorEdge),f=a.default.exact({position:h.isRequired,offset:a.default.exact({x:a.default.number,y:a.default.number}).isRequired}),y=a.default.oneOfType([h,f]),t=a.default.oneOfType([y,a.default.arrayOf(y)]),n=a.default.oneOfType([a.default.string,a.default.exact({current:a.default.any})]),v=a.default.oneOfType([a.default.element,a.default.string]),l=a.default.exact({start:v,middle:v,end:v}),x=a.default.oneOf(Object.keys(_.arrowShapes)),w=a.default.any,o=a.default.oneOfType([x,a.default.exact({svgElem:w,offsetForward:a.default.number}).isRequired]),d={start:n.isRequired,end:n.isRequired,startAnchor:t,endAnchor:t,labels:a.default.oneOfType([v,l]),color:a.default.string,lineColor:a.default.string,showHead:a.default.bool,headColor:a.default.string,headSize:a.default.number,tailSize:a.default.number,tailColor:a.default.string,strokeWidth:a.default.number,showTail:a.default.bool,path:a.default.oneOf(_.cPaths),showXarrow:a.default.bool,curveness:a.default.number,gridBreak:a.default.string,dashness:a.default.oneOfType([a.default.bool,a.default.object]),headShape:o,tailShape:o,animateDrawing:a.default.oneOfType([a.default.bool,a.default.number]),zIndex:a.default.number,passProps:a.default.object,arrowBodyProps:a.default.object,arrowHeadProps:a.default.object,arrowTailProps:a.default.object,SVGcanvasProps:a.default.object,divContainerProps:a.default.object,_extendSVGcanvas:a.default.number,_debug:a.default.bool,_cpx1Offset:a.default.number,_cpy1Offset:a.default.number,_cpx2Offset:a.default.number,_cpy2Offset:a.default.number};r.default=d},"./src/Xarrow/useXarrowProps.ts":function(m,r,u){var p=this&&this.__assign||function(){return p=Object.assign||function(e){for(var i,c=1,b=arguments.length;c<b;c++){i=arguments[c];for(var A in i)Object.prototype.hasOwnProperty.call(i,A)&&(e[A]=i[A])}return e},p.apply(this,arguments)},a=this&&this.__createBinding||(Object.create?function(e,i,c,b){b===void 0&&(b=c),Object.defineProperty(e,b,{enumerable:!0,get:function(){return i[c]}})}:function(e,i,c,b){b===void 0&&(b=c),e[b]=i[c]}),_=this&&this.__setModuleDefault||(Object.create?function(e,i){Object.defineProperty(e,"default",{enumerable:!0,value:i})}:function(e,i){e.default=i}),h=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var i={};if(e!=null)for(var c in e)c!=="default"&&Object.prototype.hasOwnProperty.call(e,c)&&a(i,e,c);return _(i,e),i},f=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(r,"__esModule",{value:!0});var y=h(u("react")),t=u("./src/Xarrow/utils/index.ts"),n=f(u("lodash")),v=u("./src/constants.tsx"),l=function(e){var i={start:null,middle:null,end:null};if(e)if(typeof e=="string"||y.default.isValidElement(e))i.middle=e;else for(var c in e)i[c]=e[c];return i},x=function(e){var i=Array.isArray(e)?e:[e],c=i.map(function(g){return typeof g=="string"?{position:g}:g});c=c.filter(function(g){return v.cAnchorEdge.includes(g.position)}),c.length==0&&(c=[{position:"auto"}]);var b=c.filter(function(g){return g.position==="auto"});b.length>0&&(c=c.filter(function(g){return g.position!=="auto"}),c.push.apply(c,b.flatMap(function(g){return["left","right","top","bottom"].map(function(E){return p(p({},g),{position:E})})})));var A=c.map(function(g){if(typeof g=="object"){var E=g;return E.position||(E.position="auto"),E.offset||(E.offset={x:0,y:0}),E.offset.y||(E.offset.y=0),E.offset.x||(E.offset.x=0),E=E,E}else return g});return A},w=function(e,i){var c=0,b=0,A,g=1;return typeof e=="object"?(c=e.strokeLen||i.strokeWidth*2,b=e.strokeLen?e.nonStrokeLen:i.strokeWidth,A=e.animation?e.animation:null):typeof e=="boolean"&&e&&(c=i.strokeWidth*2,b=i.strokeWidth,A=null),{strokeLen:c,nonStrokeLen:b,animation:A,animDirection:g}},o=function(e){return typeof e=="string"&&(e in v.arrowShapes?e=v.arrowShapes[e]:(console.warn("'"+e+"' is not supported arrow shape. the supported arrow shapes is one of "+v.cArrowShapes+`.
           reverting to default shape.`),e=v.arrowShapes.arrow1)),e=e,(e==null?void 0:e.offsetForward)===void 0&&(e.offsetForward=.25),(e==null?void 0:e.svgElem)===void 0&&(e.svgElem="path"),e},d=function(e){var i=t.xStr2absRelative(e);return i||(i={relative:.5,abs:0}),i},P=function(e,i){return i&&(i.current=!0),e},M=function(e){return e},T=function(e,i,c){return P(e,c)},k=function(e,i,c){return P(Number(e),c)},ne=function(e){return Number(e)},L={start:function(e){return t.getElementByPropGiven(e)},end:function(e){return t.getElementByPropGiven(e)},startAnchor:function(e,i,c){return P(x(e),c)},endAnchor:function(e,i,c){return P(x(e),c)},labels:function(e){return l(e)},color:M,lineColor:function(e,i){return e||i.color},headColor:function(e,i){return e||i.color},tailColor:function(e,i){return e||i.color},strokeWidth:k,showHead:T,headSize:k,showTail:T,tailSize:k,path:T,curveness:k,gridBreak:function(e,i,c){return P(d(e),c)},dashness:function(e,i){return w(e,i)},headShape:function(e){return o(e)},tailShape:function(e){return o(e)},showXarrow:M,animateDrawing:M,zIndex:ne,passProps:M,arrowBodyProps:T,arrowHeadProps:T,arrowTailProps:T,SVGcanvasProps:T,divContainerProps:T,divContainerStyle:T,SVGcanvasStyle:T,_extendSVGcanvas:T,_debug:T,_cpx1Offset:T,_cpy1Offset:T,_cpx2Offset:T,_cpy2Offset:T},oe={};for(var ie in L)oe[ie]=[ie];for(var W=0,R=["lineColor","headColor","tailColor"];W<R.length;W++){var ie=R[W];oe[ie].push("color")}var N=function(e,i){for(var c,b=0,A=Object.entries(e);b<A.length;b++){var g=A[b],E=g[0],Oe=g[1];i[E]=(c=L==null?void 0:L[E])===null||c===void 0?void 0:c.call(L,Oe,i)}return i},De={start:null,end:null,startAnchor:"auto",endAnchor:"auto",labels:null,color:"CornflowerBlue",lineColor:null,headColor:null,tailColor:null,strokeWidth:4,showHead:!0,headSize:6,showTail:!1,tailSize:6,path:"smooth",curveness:.8,gridBreak:"50%",dashness:!1,headShape:"arrow1",tailShape:"arrow1",showXarrow:!0,animateDrawing:!1,zIndex:0,passProps:{},arrowBodyProps:{},arrowHeadProps:{},arrowTailProps:{},SVGcanvasProps:{},divContainerProps:{},divContainerStyle:{},SVGcanvasStyle:{},_extendSVGcanvas:0,_debug:!1,_cpx1Offset:0,_cpy1Offset:0,_cpx2Offset:0,_cpy2Offset:0},Ce={};Ce=N(De,Ce);var _e={startPos:{x:0,y:0,right:0,bottom:0},endPos:{x:0,y:0,right:0,bottom:0}};function Le(e,i){return n.default.isEqual(e,i)}function Ne(e){var i=y.useRef();return Le(e,i.current)||(i.current=e),i.current}function Ae(e,i){y.useLayoutEffect(e,i.map(Ne))}var Q=function(e,i){var c=y.useState(Ce),b=c[0],A=c[1],g=y.useRef(!1);b.shouldUpdatePosition=g;var E=p(p({},De),e),Oe=function(U){y.useLayoutEffect(function(){var I;b[U]=(I=L==null?void 0:L[U])===null||I===void 0?void 0:I.call(L,E[U],b,g),A(p({},b))},oe[U].map(function(I){return e[I]}))};for(var Fe in De)Oe(Fe);var Xe=y.useState(_e),se=Xe[0],Ee=Xe[1],K=t.getElemPos(b.start);Ae(function(){se.startPos=K,g.current=!0,Ee(p({},se))},[K]);var G=t.getElemPos(b.end);return Ae(function(){se.endPos=G,g.current=!0,Ee(p({},se))},[G]),y.useLayoutEffect(function(){g.current=!0,Ee(p({},se))},[b.headShape.svgElem,b.tailShape.svgElem]),[b,se]};r.default=Q},"./src/Xarrow/utils/GetPosition.tsx":function(m,r,u){var p=this&&this.__importDefault||function(n){return n&&n.__esModule?n:{default:n}};Object.defineProperty(r,"__esModule",{value:!0}),r.getPosition=void 0;var a=u("./src/Xarrow/anchors.ts"),_=u("./src/Xarrow/utils/index.ts"),h=p(u("lodash")),f=u("./src/constants.tsx"),y=u("./src/Xarrow/utils/buzzier.js"),t=function(n,v){var l,x,w,o,d=n[0],P=n[1],M=d.startAnchor,T=d.endAnchor,k=d.strokeWidth,ne=d.showHead,L=d.headSize,oe=d.showTail,ie=d.tailSize,W=d.path,R=d.curveness,N=d.gridBreak,De=d.headShape,Ce=d.tailShape,_e=d._extendSVGcanvas,Le=d._cpx1Offset,Ne=d._cpy1Offset,Ae=d._cpx2Offset,Q=d._cpy2Offset,e=P.startPos,i=P.endPos,c=v.current,b=c.svgRef,A=c.lineRef,g=0,E=0,Oe=a.calcAnchors(M,e),Fe=a.calcAnchors(T,i),Xe=_.getShortestLine(Oe,Fe),se=Xe.chosenStart,Ee=Xe.chosenEnd,K=se.anchor.position,G=Ee.anchor.position,U=h.default.pick(se,["x","y"]),I=h.default.pick(Ee,["x","y"]),ze=_.getSvgPos(b),Ge=Math.min(U.x,I.x)-ze.x,We=Math.min(U.y,I.y)-ze.y,He=I.x-U.x,Be=I.y-U.y,F=Math.abs(I.x-U.x),s=Math.abs(I.y-U.y),O=He>0?1:-1,j=Be>0?1:-1,Ie=[De.offsetForward,Ce.offsetForward],he=Ie[0],we=Ie[1],H=L*k,B=ie*k,Re=0,ye=0,Pe=0,le=0,me=H*he,Y=B*we,z=Number(R);f.cPaths.includes(W)||(W="smooth"),W==="straight"&&(z=0,W="smooth");var je=L>ie?L:ie,ue=k+k*je/2,Se=ue,$=ue,be=ue,Ve=ue;$+=Number(_e),Se+=Number(_e),be+=Number(_e),Ve+=Number(_e);var fe=0,Z=F,ce=0,ee=s;if(He<0&&(l=[Z,fe],fe=l[0],Z=l[1]),Be<0&&(x=[ee,ce],ce=x[0],ee=x[1]),z===0){var xe=Math.atan(s/F);ne&&(Z-=H*(1-he)*O*Math.cos(xe),ee-=H*(1-he)*j*Math.sin(xe),xe*=j,O<0&&(xe=(Math.PI-xe*O)*O),Re=Math.cos(xe)*me-Math.sin(xe)*H/2,ye=Math.cos(xe)*H/2+Math.sin(xe)*me,g=xe*180/Math.PI);var ge=Math.atan(s/F);oe&&(fe+=B*(1-we)*O*Math.cos(ge),ce+=B*(1-we)*j*Math.sin(ge),ge*=-j,O>0&&(ge=(Math.PI-ge*O)*O),Pe=Math.cos(ge)*Y-Math.sin(ge)*B/2,le=Math.cos(ge)*B/2+Math.sin(ge)*Y,E=ge*180/Math.PI)}else G==="middle"&&(F>s?G=O?"left":"right":G=j?"top":"bottom"),ne&&(["left","right"].includes(G)?(Re+=me*O,Z-=H*(1-he)*O,ye+=H*O/2,G==="left"?(g=0,O<0&&(g+=180)):(g=180,O>0&&(g+=180))):["top","bottom"].includes(G)&&(Re+=H*-j/2,ye+=me*j,ee-=H*j-ye,G==="top"?(g=270,j>0&&(g+=180)):(g=90,j<0&&(g+=180))));oe&&z!==0&&(["left","right"].includes(K)?(Pe+=Y*-O,fe+=B*O+Pe,le+=-(B*O)/2,K==="left"?(E=180,O<0&&(E+=180)):(E=0,O>0&&(E+=180))):["top","bottom"].includes(K)&&(le+=Y*-j,ce+=B*j+le,Pe+=B*j/2,K==="top"?(E=90,j>0&&(E+=180)):(E=270,j<0&&(E+=180))));var dt={x:Re,y:ye},pt={x:Pe,y:le},q=fe,J=ce,te=Z,re=ee,$e={};W==="smooth"?$e={hh:function(){q+=F*z*O,te-=F*z*O},vv:function(){J+=s*z*j,re-=s*z*j},hv:function(){q+=F*z*O,re-=s*z*j},vh:function(){J+=s*z*j,te-=F*z*O}}:W==="grid"&&($e={hh:function(){q+=(F*N.relative+N.abs)*O,te-=(F*(1-N.relative)-N.abs)*O,ne&&(q-=H*(1-he)/2*O,te+=H*(1-he)/2*O),oe&&(q-=B*(1-we)/2*O,te+=B*(1-we)/2*O)},vv:function(){J+=(s*N.relative+N.abs)*j,re-=(s*(1-N.relative)-N.abs)*j,ne&&(J-=H*(1-he)/2*j,re+=H*(1-he)/2*j),oe&&(J-=B*(1-we)/2*j,re+=B*(1-we)/2*j)},hv:function(){q=Z},vh:function(){J=ee}});var de="";["left","right"].includes(K)?de+="h":["bottom","top"].includes(K)?de+="v":K==="middle"&&(de+="m"),["left","right"].includes(G)?de+="h":["bottom","top"].includes(G)?de+="v":G==="middle"&&(de+="m"),F>s?de=de.replace(/m/g,"h"):de=de.replace(/m/g,"v"),$e[de](),q+=Le,J+=Ne,te+=Ae,re+=Q;var et=y.buzzierMinSols(fe,q,te,Z),tt=et[0],rt=et[1],at=y.buzzierMinSols(ce,J,re,ee),nt=at[0],ot=at[1];tt<0&&($+=-tt),rt>F&&(Se+=rt-F),nt<0&&(be+=-nt),ot>s&&(Ve+=ot-s),W==="grid"&&($+=ue,Se+=ue,be+=ue,Ve+=ue),fe+=$,Z+=$,ce+=be,ee+=be,q+=$,te+=$,J+=be,re+=be;var vt=F+$+Se,ht=s+be+Ve;Ge-=$,We-=be;var Qe=y.bzFunction(fe,q,te,Z),Ye=y.bzFunction(ce,J,re,ee),yt={x:Qe(.01),y:Ye(.01)},mt={x:Qe(.5),y:Ye(.5)},bt={x:Qe(.99),y:Ye(.99)},qe;return W==="grid"?qe="M "+fe+" "+ce+" L  "+q+" "+J+" L "+te+" "+re+" "+Z+" "+ee:W==="smooth"&&(qe="M "+fe+" "+ce+" C "+q+" "+J+", "+te+" "+re+", "+Z+" "+ee),{cx0:Ge,cy0:We,x1:fe,x2:Z,y1:ce,y2:ee,cw:vt,ch:ht,cpx1:q,cpy1:J,cpx2:te,cpy2:re,dx:He,dy:Be,absDx:F,absDy:s,headOrient:g,tailOrient:E,labelStartPos:yt,labelMiddlePos:mt,labelEndPos:bt,excLeft:$,excRight:Se,excUp:be,excDown:Ve,headOffset:me,arrowHeadOffset:dt,arrowTailOffset:pt,startPoints:Oe,endPoints:Fe,mainDivPos:ze,xSign:O,ySign:j,lineLength:(o=(w=A.current)===null||w===void 0?void 0:w.getTotalLength())!==null&&o!==void 0?o:0,fHeadSize:H,fTailSize:B,arrowPath:qe}};r.getPosition=t},"./src/Xarrow/utils/index.ts":function(m,r){Object.defineProperty(r,"__esModule",{value:!0}),r.getSvgPos=r.getElemPos=r.getShortestLine=r.xStr2absRelative=r.factorDpathStr=r.getElementByPropGiven=void 0;var u=function(t){var n;return typeof t=="string"?n=document.getElementById(t):n=t==null?void 0:t.current,n};r.getElementByPropGiven=u;var p=function(t,n){var v=t.split(/(\d+(?:\.\d+)?)/);return v=v.map(function(l){return Number(l)?(Number(l)*n).toString():l}),v.join("")};r.factorDpathStr=p;var a=function(t){if(typeof t!="string")return{abs:0,relative:.5};var n=t.split("%"),v=0,l=0;if(n.length==1){var x=parseFloat(n[0]);if(!isNaN(x))return v=x,{abs:v,relative:0}}else if(n.length==2){var w=[parseFloat(n[0]),parseFloat(n[1])],o=w[0],d=w[1];if(isNaN(o)||(l=o/100),isNaN(d)||(v=d),!isNaN(o)||!isNaN(d))return{abs:v,relative:l}}};r.xStr2absRelative=a;var _=function(t,n){return Math.sqrt(Math.pow(t.x-n.x,2)+Math.pow(t.y-n.y,2))},h=function(t,n){var v=1/0,l=1/0,x;return t.forEach(function(w){n.forEach(function(o){l=_(w,o),l<v&&(v=l,x={chosenStart:w,chosenEnd:o})})}),x};r.getShortestLine=h;var f=function(t){if(!t)return{x:0,y:0,right:0,bottom:0};var n=t.getBoundingClientRect();return{x:n.left,y:n.top,right:n.right,bottom:n.bottom}};r.getElemPos=f;var y=function(t){if(!t.current)return{x:0,y:0};var n=t.current.getBoundingClientRect(),v=n.left,l=n.top,x=getComputedStyle(t.current),w=Number(x.left.slice(0,-2)),o=Number(x.top.slice(0,-2));return{x:v-w,y:l-o}};r.getSvgPos=y},"./src/Xwrapper.tsx":function(m,r,u){var p=this&&this.__createBinding||(Object.create?function(l,x,w,o){o===void 0&&(o=w),Object.defineProperty(l,o,{enumerable:!0,get:function(){return x[w]}})}:function(l,x,w,o){o===void 0&&(o=w),l[o]=x[w]}),a=this&&this.__setModuleDefault||(Object.create?function(l,x){Object.defineProperty(l,"default",{enumerable:!0,value:x})}:function(l,x){l.default=x}),_=this&&this.__importStar||function(l){if(l&&l.__esModule)return l;var x={};if(l!=null)for(var w in l)w!=="default"&&Object.prototype.hasOwnProperty.call(l,w)&&p(x,l,w);return a(x,l),x};Object.defineProperty(r,"__esModule",{value:!0}),r.XarrowContext=r.XelemContext=void 0;var h=_(u("react"));r.XelemContext=h.default.createContext(null),r.XarrowContext=h.default.createContext(null);var f={},y=0,t=function(l){var x=l.children,w=l.instanceCount,o=h.useState({}),d=o[1],P=function(){return d({})};return h.useEffect(function(){w.current=y,f[w.current]=P},[]),h.default.createElement(r.XarrowContext.Provider,{value:P},x)},n=function(l){var x=l.children,w=l.instanceCount;return h.default.createElement(r.XelemContext.Provider,{value:f[w.current]},x)},v=function(l){var x=l.children,w=h.useRef(y),o=h.useState({}),d=o[1];return h.useEffect(function(){return y++,d({}),function(){delete f[w.current]}},[]),h.default.createElement(n,{instanceCount:w},h.default.createElement(t,{instanceCount:w},x))};r.default=v},"./src/constants.tsx":function(m,r,u){var p=this&&this.__importDefault||function(_){return _&&_.__esModule?_:{default:_}};Object.defineProperty(r,"__esModule",{value:!0}),r.cArrowShapes=r.arrowShapes=r.cSvgElems=r.cPaths=r.cAnchorEdge=void 0;var a=p(u("react"));r.cAnchorEdge=["middle","left","right","top","bottom","auto"],r.cPaths=["smooth","grid","straight"],r.cSvgElems=["circle","ellipse","line","path","polygon","polyline","rect"],r.arrowShapes={arrow1:{svgElem:a.default.createElement("path",{d:"M 0 0 L 1 0.5 L 0 1 L 0.25 0.5 z"}),offsetForward:.25},heart:{svgElem:a.default.createElement("path",{d:"M 0,0.25 A 0.125,0.125 0,0,1 0.5,0.25 A 0.125,0.125 0,0,1 1,0.25 Q 1,0.625 0.5,1 Q 0,0.625 0,0.25 z"}),offsetForward:.1},circle:{svgElem:a.default.createElement("circle",{r:.5,cx:.5,cy:.5}),offsetForward:0}},r.cArrowShapes=Object.keys(r.arrowShapes)},"./src/index.tsx":function(m,r,u){var p=this&&this.__createBinding||(Object.create?function(t,n,v,l){l===void 0&&(l=v),Object.defineProperty(t,l,{enumerable:!0,get:function(){return n[v]}})}:function(t,n,v,l){l===void 0&&(l=v),t[l]=n[v]}),a=this&&this.__exportStar||function(t,n){for(var v in t)v!=="default"&&!Object.prototype.hasOwnProperty.call(n,v)&&p(n,t,v)},_=this&&this.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(r,"__esModule",{value:!0}),r.useXarrow=r.Xwrapper=r.default=void 0;var h=u("./src/Xarrow/Xarrow.tsx");Object.defineProperty(r,"default",{enumerable:!0,get:function(){return _(h).default}}),a(u("./src/types.ts"),r),a(u("./src/constants.tsx"),r);var f=u("./src/Xwrapper.tsx");Object.defineProperty(r,"Xwrapper",{enumerable:!0,get:function(){return _(f).default}});var y=u("./src/useXarrow.tsx");Object.defineProperty(r,"useXarrow",{enumerable:!0,get:function(){return _(y).default}})},"./src/types.ts":function(m,r){Object.defineProperty(r,"__esModule",{value:!0})},"./src/useXarrow.tsx":function(m,r,u){Object.defineProperty(r,"__esModule",{value:!0});var p=u("react"),a=u("./src/Xwrapper.tsx"),_=function(){var h=p.useState({}),f=h[1],y=function(){return f({})},t=p.useContext(a.XelemContext);return t||(t=function(){}),p.useLayoutEffect(function(){t()}),y};r.default=_},lodash:function(m){m.exports=C},"prop-types":function(m){m.exports=V},react:function(m){m.exports=pe}},ve={};function X(m){var r=ve[m];if(r!==void 0)return r.exports;var u=ve[m]={id:m,loaded:!1,exports:{}};return ae[m].call(u.exports,u,u.exports,X),u.loaded=!0,u.exports}X.c=ve,function(){X.d=function(m,r){for(var u in r)X.o(r,u)&&!X.o(m,u)&&Object.defineProperty(m,u,{enumerable:!0,get:r[u]})}}(),function(){X.o=function(m,r){return Object.prototype.hasOwnProperty.call(m,r)}}(),function(){X.r=function(m){typeof Symbol<"u"&&Symbol.toStringTag&&Object.defineProperty(m,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(m,"__esModule",{value:!0})}}(),function(){X.nmd=function(m){return m.paths=[],m.children||(m.children=[]),m}}();var Me=X(X.s="./src/index.tsx");return Me}()})})(ft);var ct=ft.exports;const Tt=wt(ct);const ke={production:{name:"ProducciÃ³n",color:"#22C55E",gridRowStart:2},research:{name:"InvestigaciÃ³n",color:"#06B6D4",gridRowStart:6},foundry:{name:"FundiciÃ³n",color:"#F97316",gridRowStart:9},logistics:{name:"LogÃ­stica",color:"#F59E0B",gridRowStart:12}},Mt=({gameState:D,onResearchUpgrade:Te,onClose:pe})=>{const{techCenter:C}=D,{unlocked:V,researchPoints:ae,upgrades:ve}=C,X=Ot(),[Me,m]=Ue.useState(!1),[r,u]=Ue.useState(null);Ue.useEffect(()=>{if(r){const f=setTimeout(()=>u(null),1500);return()=>clearTimeout(f)}},[r]);const p=Object.values(_t),a=Math.max(...p.map(f=>f.tier)),_=D.rates.researchPerSecond,h=f=>f.requirements.length===0?!0:f.requirements.every(y=>(ve[y]||0)>=1);return V?S.jsx("div",{className:"laboratory-container",children:S.jsxs("div",{className:"laboratory-content-area",ref:X,children:[S.jsx("button",{onClick:pe,className:"close-button",children:"Ã—"}),S.jsxs("div",{className:"research-points-summary",children:[S.jsxs("h3",{onMouseEnter:()=>m(!0),onMouseLeave:()=>m(!1),children:[S.jsxs("span",{children:["ðŸ§ª Puntos de InvestigaciÃ³n: ",ut(ae)]}),S.jsx("span",{className:"info-icon",children:"â“˜"})]}),Me&&S.jsx(Dt,{total:_})]}),S.jsxs(ct.Xwrapper,{children:[S.jsxs("div",{className:"tech-tree-grid-container",children:[Object.values(ke).map(f=>S.jsx("div",{className:"branch-banner",style:{gridRow:f.gridRowStart-1,gridColumn:`1 / ${a+2}`,color:f.color,borderColor:f.color},children:f.name.toUpperCase()},f.name)),p.map(f=>S.jsx(Ct,{tech:f,researchPoints:ae,upgrades:ve,onResearchUpgrade:y=>{Te(y),u(y)},isAvailable:h(f),color:ke[f.branch].color,style:{gridColumn:f.tier,gridRow:ke[f.branch].gridRowStart+f.row-1}},f.id))]}),p.map(f=>f.requirements.map(y=>{if(!p.some(x=>x.id===y))return null;const n=(ve[f.id]||0)>0,v=r===y,l=ke[f.branch].color;return S.jsx(Tt,{start:y,end:f.id,strokeWidth:v?4:n?3:2,color:v?"#FFFFFF":n?l:"#4B5563",path:"smooth",startAnchor:"right",endAnchor:"left",dashness:!n&&!v,headSize:4,zIndex:v?2:1,animateDrawing:v?.7:!1},`${y}-${f.id}`)}))]})]})}):S.jsxs("div",{style:{backgroundColor:"#111827",color:"#E5E7EB",minHeight:"100vh",padding:"1rem",fontFamily:"Inter, sans-serif"},children:[S.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",marginBottom:"2rem"},children:[S.jsx("h2",{children:"LABORATORIO"}),S.jsx("button",{onClick:pe,style:{padding:"0.5rem 1rem",backgroundColor:"#EF4444",color:"white",border:"none",borderRadius:"4px",cursor:"pointer"},children:"Cerrar"})]}),S.jsxs("div",{style:{padding:"2rem",backgroundColor:"#1F2737",borderRadius:"4px",textAlign:"center",border:"2px solid #F59E0B"},children:[S.jsx("h3",{style:{color:"#F59E0B"},children:"ðŸ”’ LABORATORIO BLOQUEADO"}),S.jsx("p",{children:"Para desbloquear el Laboratorio, necesitas:"}),S.jsxs("ul",{style:{textAlign:"left",display:"inline-block",margin:"1rem 0"},children:[S.jsx("li",{children:"âœ… 3 Drones Medios"}),S.jsx("li",{children:"âœ… 1 Generador Solar Avanzado"}),S.jsx("li",{children:"âœ… 1000 Chatarra"})]})]})]})},Dt=({total:D})=>S.jsxs("div",{style:{position:"absolute",top:"100%",marginTop:"0.5rem",left:"50%",transform:"translateX(-50%)",backgroundColor:"#111827",border:"1px solid #374151",borderRadius:"8px",padding:"1rem",width:"300px",textAlign:"left",fontSize:"1.4rem",boxShadow:"0 4px 12px rgba(0,0,0,0.5)",zIndex:10},children:[S.jsx("h4",{style:{margin:0,color:"#06B6D4"},children:"GeneraciÃ³n de InvestigaciÃ³n"}),S.jsx("p",{style:{margin:"0.5rem 0",fontSize:"1.2rem",color:"#9CA3AF"},children:"La tasa de investigaciÃ³n se basa en tu tasa base, el nÃºmero de drones y tu superÃ¡vit energÃ©tico."}),S.jsx("hr",{style:{borderColor:"#374151",margin:"0.5rem 0"}}),S.jsxs("p",{style:{margin:"0.5rem 0",fontWeight:"bold"},children:["Total: ",S.jsxs("strong",{children:["+",D.toFixed(2)," /s"]})]})]}),Ct=({tech:D,researchPoints:Te,upgrades:pe,onResearchUpgrade:C,isAvailable:V,color:ae,style:ve})=>{const X=pe[D.id]||0,Me=St(D.id,X),m=V&&Te>=Me&&X<D.maxLevel,r=D.description(X),u=`tech-card ${V?m?"available":X>0?"researched":"":"locked"}`;return S.jsxs("div",{id:D.id,className:u,style:{...ve,borderLeftColor:ae},children:[S.jsx("h4",{children:D.name}),S.jsx("p",{className:"tech-card-description",children:D.baseDescription||D.description(0).split("+")[0].split("-")[0].split("D")[0]})," ",S.jsx("p",{className:"tech-card-effect",children:r}),S.jsxs("div",{className:"tech-card-footer",children:[S.jsxs("span",{children:["Nivel: ",X,"/",D.maxLevel===1/0?"âˆž":D.maxLevel]}),S.jsxs("button",{onClick:()=>C(D.id),disabled:!m,className:`research-button ${m?"can-research":""}`,style:{backgroundColor:m?ae:""},children:[X>0?"Mejorar":"Investigar"," (",ut(Me)," RP)"]})]})]})},zt=Pt.memo(Mt);export{zt as default};
